!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Hummer=t():e.Hummer=t()}(window,function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=50)}([function(e,t){e.exports=i;var n=null;try{n=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function i(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function r(e){return!0===(e&&e.__isLong__)}i.prototype.__isLong__,Object.defineProperty(i.prototype,"__isLong__",{value:!0}),i.isLong=r;var o={},s={};function a(e,t){var n,i,r;return t?(r=0<=(e>>>=0)&&e<256)&&(i=s[e])?i:(n=u(e,(0|e)<0?-1:0,!0),r&&(s[e]=n),n):(r=-128<=(e|=0)&&e<128)&&(i=o[e])?i:(n=u(e,e<0?-1:0,!1),r&&(o[e]=n),n)}function l(e,t){if(isNaN(e))return t?v:m;if(t){if(e<0)return v;if(e>=f)return _}else{if(e<=-g)return k;if(e+1>=g)return I}return e<0?l(-e,t).neg():u(e%d|0,e/d|0,t)}function u(e,t,n){return new i(e,t,n)}i.fromInt=a,i.fromNumber=l,i.fromBits=u;var c=Math.pow;function h(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return m;if("number"==typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var i;if((i=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===i)return h(e.substring(1),t,n).neg();for(var r=l(c(n,8)),o=m,s=0;s<e.length;s+=8){var a=Math.min(8,e.length-s),u=parseInt(e.substring(s,s+a),n);if(a<8){var p=l(c(n,a));o=o.mul(p).add(l(u))}else o=(o=o.mul(r)).add(l(u))}return o.unsigned=t,o}function p(e,t){return"number"==typeof e?l(e,t):"string"==typeof e?h(e,t):u(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}i.fromString=h,i.fromValue=p;var d=4294967296,f=d*d,g=f/2,y=a(1<<24),m=a(0);i.ZERO=m;var v=a(0,!0);i.UZERO=v;var b=a(1);i.ONE=b;var w=a(1,!0);i.UONE=w;var S=a(-1);i.NEG_ONE=S;var I=u(-1,2147483647,!1);i.MAX_VALUE=I;var _=u(-1,-1,!0);i.MAX_UNSIGNED_VALUE=_;var k=u(0,-2147483648,!1);i.MIN_VALUE=k;var O=i.prototype;O.toInt=function(){return this.unsigned?this.low>>>0:this.low},O.toNumber=function(){return this.unsigned?(this.high>>>0)*d+(this.low>>>0):this.high*d+(this.low>>>0)},O.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(k)){var t=l(e),n=this.div(t),i=n.mul(t).sub(this);return n.toString(e)+i.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var r=l(c(e,6),this.unsigned),o=this,s="";;){var a=o.div(r),u=(o.sub(a.mul(r)).toInt()>>>0).toString(e);if((o=a).isZero())return u+s;for(;u.length<6;)u="0"+u;s=""+u+s}},O.getHighBits=function(){return this.high},O.getHighBitsUnsigned=function(){return this.high>>>0},O.getLowBits=function(){return this.low},O.getLowBitsUnsigned=function(){return this.low>>>0},O.getNumBitsAbs=function(){if(this.isNegative())return this.eq(k)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},O.isZero=function(){return 0===this.high&&0===this.low},O.eqz=O.isZero,O.isNegative=function(){return!this.unsigned&&this.high<0},O.isPositive=function(){return this.unsigned||this.high>=0},O.isOdd=function(){return 1==(1&this.low)},O.isEven=function(){return 0==(1&this.low)},O.equals=function(e){return r(e)||(e=p(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&(this.high===e.high&&this.low===e.low)},O.eq=O.equals,O.notEquals=function(e){return!this.eq(e)},O.neq=O.notEquals,O.ne=O.notEquals,O.lessThan=function(e){return this.comp(e)<0},O.lt=O.lessThan,O.lessThanOrEqual=function(e){return this.comp(e)<=0},O.lte=O.lessThanOrEqual,O.le=O.lessThanOrEqual,O.greaterThan=function(e){return this.comp(e)>0},O.gt=O.greaterThan,O.greaterThanOrEqual=function(e){return this.comp(e)>=0},O.gte=O.greaterThanOrEqual,O.ge=O.greaterThanOrEqual,O.compare=function(e){if(r(e)||(e=p(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},O.comp=O.compare,O.negate=function(){return!this.unsigned&&this.eq(k)?k:this.not().add(b)},O.neg=O.negate,O.add=function(e){r(e)||(e=p(e));var t=this.high>>>16,n=65535&this.high,i=this.low>>>16,o=65535&this.low,s=e.high>>>16,a=65535&e.high,l=e.low>>>16,c=0,h=0,d=0,f=0;return d+=(f+=o+(65535&e.low))>>>16,h+=(d+=i+l)>>>16,c+=(h+=n+a)>>>16,c+=t+s,u((d&=65535)<<16|(f&=65535),(c&=65535)<<16|(h&=65535),this.unsigned)},O.subtract=function(e){return r(e)||(e=p(e)),this.add(e.neg())},O.sub=O.subtract,O.multiply=function(e){if(this.isZero())return m;if(r(e)||(e=p(e)),n)return u(n.mul(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned);if(e.isZero())return m;if(this.eq(k))return e.isOdd()?k:m;if(e.eq(k))return this.isOdd()?k:m;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(y)&&e.lt(y))return l(this.toNumber()*e.toNumber(),this.unsigned);var t=this.high>>>16,i=65535&this.high,o=this.low>>>16,s=65535&this.low,a=e.high>>>16,c=65535&e.high,h=e.low>>>16,d=65535&e.low,f=0,g=0,v=0,b=0;return v+=(b+=s*d)>>>16,g+=(v+=o*d)>>>16,v&=65535,g+=(v+=s*h)>>>16,f+=(g+=i*d)>>>16,g&=65535,f+=(g+=o*h)>>>16,g&=65535,f+=(g+=s*c)>>>16,f+=t*d+i*h+o*c+s*a,u((v&=65535)<<16|(b&=65535),(f&=65535)<<16|(g&=65535),this.unsigned)},O.mul=O.multiply,O.divide=function(e){if(r(e)||(e=p(e)),e.isZero())throw Error("division by zero");var t,i,o;if(n)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?u((this.unsigned?n.div_u:n.div_s)(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?v:m;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return v;if(e.gt(this.shru(1)))return w;o=v}else{if(this.eq(k))return e.eq(b)||e.eq(S)?k:e.eq(k)?b:(t=this.shr(1).div(e).shl(1)).eq(m)?e.isNegative()?b:S:(i=this.sub(e.mul(t)),o=t.add(i.div(e)));if(e.eq(k))return this.unsigned?v:m;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();o=m}for(i=this;i.gte(e);){t=Math.max(1,Math.floor(i.toNumber()/e.toNumber()));for(var s=Math.ceil(Math.log(t)/Math.LN2),a=s<=48?1:c(2,s-48),h=l(t),d=h.mul(e);d.isNegative()||d.gt(i);)d=(h=l(t-=a,this.unsigned)).mul(e);h.isZero()&&(h=b),o=o.add(h),i=i.sub(d)}return o},O.div=O.divide,O.modulo=function(e){return r(e)||(e=p(e)),n?u((this.unsigned?n.rem_u:n.rem_s)(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},O.mod=O.modulo,O.rem=O.modulo,O.not=function(){return u(~this.low,~this.high,this.unsigned)},O.and=function(e){return r(e)||(e=p(e)),u(this.low&e.low,this.high&e.high,this.unsigned)},O.or=function(e){return r(e)||(e=p(e)),u(this.low|e.low,this.high|e.high,this.unsigned)},O.xor=function(e){return r(e)||(e=p(e)),u(this.low^e.low,this.high^e.high,this.unsigned)},O.shiftLeft=function(e){return r(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?u(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):u(0,this.low<<e-32,this.unsigned)},O.shl=O.shiftLeft,O.shiftRight=function(e){return r(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?u(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):u(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},O.shr=O.shiftRight,O.shiftRightUnsigned=function(e){if(r(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return e<32?u(this.low>>>e|t<<32-e,t>>>e,this.unsigned):u(32===e?t:t>>>e-32,0,this.unsigned)},O.shru=O.shiftRightUnsigned,O.shr_u=O.shiftRightUnsigned,O.toSigned=function(){return this.unsigned?u(this.low,this.high,!1):this},O.toUnsigned=function(){return this.unsigned?this:u(this.low,this.high,!0)},O.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},O.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},O.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},i.fromBytes=function(e,t,n){return n?i.fromBytesLE(e,t):i.fromBytesBE(e,t)},i.fromBytesLE=function(e,t){return new i(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},i.fromBytesBE=function(e,t){return new i(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),r=n(26),o=n(8),s=n(52);class a{static inet_ntoa(e){let t,n,i,r,o="",s=new Uint8Array(4),a=new DataView(s.buffer);return a.setUint32(0,e),t=a.getUint8(0),n=a.getUint8(1),i=a.getUint8(2),o=(r=a.getUint8(3))+"."+i+"."+n+"."+t}static isBiggerUint(e,t){if(e===t)return!1;if(e>t){return e-t<2147483647}return!(t-e<2147483647)}static isEqualOrBiggerUint(e,t){if(e===t)return!0;if(e>t){return e-t<2147483647}return!(t-e<2147483647)}static isBiggerUint8(e,t){if(e===t)return!1;if(e>t){return e-t<127}return!(t-e<127)}static getUintMax(){return 4294967295}static isUintMax(e){return 4294967295===e}static getIntMax(){return 2147483647}static getIntMin(){return-1*this.getIntMax()}static isUint64Max(e){return 4294967295===e.high&&4294967295===e.low}static uint2ip(e){let t,n,i,r;return(t=255&e)+"."+(n=e>>8&255)+"."+(i=e>>16&255)+"."+(r=e>>24&255)}static ip2uint(e){let t=e.split(".");return(parseInt(t[3])<<24)+(parseInt(t[2])<<16)+(parseInt(t[1])<<8)+parseInt(t[0])>>>0}static isNumber(e){return null!==e&&("number"==typeof e&&!isNaN(e-0)||"object"==typeof e&&e.constructor===Number)}static isString(e){return"string"==Object.prototype.toString.call(e).match(/^\[object (.*)\]$/)[1].toLowerCase()}static isEmpty(e){return void 0===e||null==e||""==e}static isMap(e){return"map"==Object.prototype.toString.call(e).match(/^\[object (.*)\]$/)[1].toLowerCase()}static isObject(e){return"object"==Object.prototype.toString.call(e).match(/^\[object (.*)\]$/)[1].toLowerCase()}static toMap(e){if(a.isMap(e))return e;if(a.isObject(e)){let t=new Map;for(let n of Object.keys(e))t.set(n,e[n].toString());return t}return null}static bin2hex(e){var t,n,i,r="";for(t=0,n=(e+="").length;t<n;t++)r+=(i=e.charCodeAt(t).toString(16)).length<2?"0"+i:i;return r}static getUUID(e){var t="";try{var n=document.createElement("canvas"),i=n.getContext("2d"),r=e;i.fillStyle="#f60",i.fillRect(0,0,8,10),i.fillStyle="#FF0000",i.fillText(r,4,17);var o=n.toDataURL().replace("data:image/png;base64,",""),s=atob(o);t=a.bin2hex(s.slice(-16,-12))}catch(e){var l=[];for(let e=0;e<8;e++)l[e]="0123456789abcdef".substr(Math.floor(16*Math.random()),1);t=l.join("")}var u=[];for(let e=0;e<28;e++)u[e]="0123456789abcdef".substr(Math.floor(16*Math.random()),1);return u[6]="4",u[11]="0123456789abcdef".substr(3&u[19]|8,1),u[0]=u[5]=u[10]=u[15]="-",t+u.join("")}static getCookie(e,t=!1){if(t)return wx.getStorageSync(e.toString());if(document.cookie.length>0){var n=document.cookie.indexOf(e+"=");if(-1!=n){n=n+e.length+1;var i=document.cookie.indexOf(";",n);return-1==i&&(i=document.cookie.length),decodeURI(document.cookie.substring(n,i))}}return""}static setCookie(e,t,n,i,r,o){n||(n=24);var s=new Date;s.setTime(s.getTime()+60*n*60*1e3),document.cookie=e+"="+window.encodeURI(t)+";expires="+s.toUTCString()+(r?";domain="+r:"")+(i?";path="+i:"")+(!0===o?";secure":"")}static setWxCookie(e,t){wx.setStorageSync(e,t),wx.setStorageSync("oscookieDate",Date.now())}static getUidInCertainInterval(){return parseInt(""+(1125e4*Math.random()+4283717296),10)}static getOrGenerateUid(e,t){if(!t)return a.getUidInCertainInterval();let n=a.getCookie("svc_anonymous_uid");if(!n){let t=a.getUidInCertainInterval(),n="https:"==document.location.protocol;return a.setCookie("svc_anonymous_uid",t.toString(),168,"/",e,n),o.default.warn("Utils.getOrGenerateUid save uid to cookie uid="+t),t}return o.default.warn("Utils.getOrGenerateUid get uid from cookie uid="+n),parseInt(n)}static DelayPromise(e){return new Promise(function(t){setTimeout(t,e)})}static number2ProtoUInt64(e){if(e<=a.getUintMax())return new r.default(0,e);let t=i.fromString(e.toString());return new r.default(t.high,t.low)}static wxPromise(e,t){return new Promise(function(n,i){let r=Object.assign({},t,{success(e){n(e),t&&t.success&&t.success(e)},fail(n){o.default.error(e+" "+JSON.stringify(n)),i(n),t&&t.fail&&t.fail(n)}});wx[e](r)})}static yFetch(e){let t=s.default(!0,{},{method:"GET"},e);return a.wxPromise("request",t)}static payload2DataView(e){let t=new Uint8Array(e.byteLength);return t.set(e,0),e=null,new DataView(t.buffer)}static stringfyMap(e){let t=a.map2Object(e);return JSON.stringify(t)}static map2Object(e){let t={};for(let[n,i]of e)a.isMap(i)?t[n]=a.map2Object(i):t[n]=i;return t}}t.default=a},function(e,t,n){"use strict";var i,r,o=e.exports=n(7),s=n(42);o.codegen=n(88),o.fetch=n(89),o.path=n(90),o.fs=o.inquire("fs"),o.toArray=function(e){if(e){for(var t=Object.keys(e),n=new Array(t.length),i=0;i<t.length;)n[i]=e[t[i++]];return n}return[]},o.toObject=function(e){for(var t={},n=0;n<e.length;){var i=e[n++],r=e[n++];void 0!==r&&(t[i]=r)}return t};var a=/\\/g,l=/"/g;o.isReserved=function(e){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(e)},o.safeProp=function(e){return!/^[$\w_]+$/.test(e)||o.isReserved(e)?'["'+e.replace(a,"\\\\").replace(l,'\\"')+'"]':"."+e},o.ucFirst=function(e){return e.charAt(0).toUpperCase()+e.substring(1)};var u=/_([a-z])/g;o.camelCase=function(e){return e.substring(0,1)+e.substring(1).replace(u,function(e,t){return t.toUpperCase()})},o.compareFieldsById=function(e,t){return e.id-t.id},o.decorateType=function(e,t){if(e.$type)return t&&e.$type.name!==t&&(o.decorateRoot.remove(e.$type),e.$type.name=t,o.decorateRoot.add(e.$type)),e.$type;i||(i=n(20));var r=new i(t||e.name);return o.decorateRoot.add(r),r.ctor=e,Object.defineProperty(e,"$type",{value:r,enumerable:!1}),Object.defineProperty(e.prototype,"$type",{value:r,enumerable:!1}),r};var c=0;o.decorateEnum=function(e){if(e.$type)return e.$type;r||(r=n(6));var t=new r("Enum"+c++,e);return o.decorateRoot.add(t),Object.defineProperty(e,"$type",{value:t,enumerable:!1}),t},Object.defineProperty(o,"decorateRoot",{get:function(){return s.decorated||(s.decorated=new(n(25)))}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(30);t.default=class{constructor(e=!0){this.hasHeader=e,this.segments=[],this.data=null,this.totalLen=0,this.uri=0,this.hasHeader&&(this.pushUInt32(10),this.pushUInt32(this.uri),this.pushUInt16(200))}destroy(){}marshall(){if(0===this.segments.length)return null;this.data=new Uint8Array(this.totalLen);let e=0;for(let t=0;t<this.segments.length;++t){let n=this.segments[t];this.data.set(n,e),e+=n.length}return this.hasHeader&&(this.replaceUInt32(0,this.totalLen),this.replaceUInt32(4,this.uri)),this.data}setUri(e){this.uri=e}replaceUInt32(e,t){new DataView(this.data.buffer).setUint32(e,t,!0)}pushUInt8(e){let t=new Uint8Array(1);new DataView(t.buffer).setUint8(0,e),this.segments.push(t),this.totalLen++}pushBool(e){this.pushUInt8(e?1:0)}pushUInt16(e){let t=new Uint8Array(2);new DataView(t.buffer).setUint16(0,e,!0),this.segments.push(t),this.totalLen+=2}pushUInt32(e){let t=new Uint8Array(4);new DataView(t.buffer).setUint32(0,e,!0),this.segments.push(t),this.totalLen+=4}pushUInt64(e){let t=new Uint8Array(8),n=new DataView(t.buffer);n.setUint32(0,e.low,!0),n.setUint32(4,e.high,!0),this.segments.push(t),this.totalLen+=8}pushUGID(e){this.pushUInt16(12),this.pushUInt32(e.sid),this.pushUInt32(e.appId),this.pushUInt32(e.channelId)}pushUint8Array(e){this.pushUInt16(e.length),this.segments.push(e),this.totalLen+=e.length}pushUint8ArrayWithoutLen(e){this.segments.push(e),this.totalLen+=e.length}pushUint8Array32(e){this.pushUInt32(e.length),this.segments.push(e),this.totalLen+=e.length}pushUIntArray(e){this.pushUInt32(e.length);for(let t=0;t<e.length;t++)this.pushUInt32(e[t])}pushString(e){this.pushUInt16(e.length);let t=new Uint8Array(e.length),n=new DataView(t.buffer);for(let t=0;t<e.length;++t)n.setUint8(t,e.charCodeAt(t));this.segments.push(t),this.totalLen+=e.length}pushString32(e){this.pushUInt32(e.length);let t=new Uint8Array(e.length),n=new DataView(t.buffer);for(let t=0;t<e.length;++t)n.setUint8(t,e.charCodeAt(t));this.segments.push(t),this.totalLen+=e.length}pushUInt32AndUInt32Map(e){this.pushUInt32(e.size);for(let t of e)this.pushUInt32(t[0]),this.pushUInt32(t[1])}pushUtf8String(e){let t=i.default.encodeUtf8(e);this.pushUint8Array(t)}pushUtf8String32(e){let t=i.default.encodeUtf8(e);this.pushUint8Array32(t)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={PSvcLoginReqURI:1446744,PSvcLoginResURI:1447e3,PSvcLogoutReqURI:1447256,PSvcLogoutResURI:1447512,PSvcPingURI:1447768,PSvcPongURI:1448024,PAPForceOutURI:1448280,PSvcRouteReqURI:1449304,PSvcRouteResURI:1449560,PSvcUnicastURI:1449816,PSvcUnicastResURI:1450072,PSvcSubsGroupReqURI:1450328,PSvcSubsGroupResURI:1450584,PSvcBroadcastURI:1450840,PCS_ServiceSubcribeUserGroupV2URI:1452376,PCS_ServiceSubcribeUserGroupResV2URI:1452632,PCS_ServiceBroadCastV2URI:1452888,PCS_UserGroupChangeBcURI:3424461,CommonAuthOpsResURI:256205,PJoinChannelReqURI:256461,PLeaveChannelReqURI:256973,PTextChatReqURI:261325,PTextChatBroadResURI:261581,PChlInfoUpdateBcURI:269005,PKickOffUserBcURI:269773,DisableUserTextBcURI:270285,DisableChannelTextBcURI:270797,PAnonJoinChannelReqURI:281805,PAnonLeaveChannelReqURI:282061,PCS_DismissChatRoomBcURI:270285,PCS_UpdateChatRoomInfoBcURI:270541,PCS_UpdateChatRoomRolerBcURI:270797,PCS_KickOffUserBcURI:271053,PCS_SendBroadcastBcURI:271565,PCS_TextChatBcURI:773837,PCS_ChatRoomUserCountBcURI:3421389,PCS_ChatRoomUserBcURI:3423949,PCS_SendUnicastUcURI:526029,PGetApInfoReqURI:29470,PGetApInfoResURI:29726,PGetUserInfoReqURI:26115,PGetUserInfoResURI:26371,PGetChannelInfoReqURI:23815,PGetChannelInfoResURI:24071,PPushChannelUserCountURI:3139586,PLoginUdbResURI:4294967295}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(26),r=n(57),o=n(30);t.default=class{constructor(e,t=!0){this.view=e,this.pos=0,this.len=0,this.uri=0,this.resCode=0,!0===t&&(this.len=this.popUInt32(),this.uri=this.popUInt32(),this.resCode=this.popUInt16())}destroy(){}bytesAvailable(){return this.view.byteLength-this.pos}popBool(){if(this.pos+1>this.view.byteLength)return!1;let e=this.view.getUint8(this.pos);return this.pos++,"1"===e.toString()}popUInt8(){if(this.pos+1>this.view.byteLength)return 0;let e=this.view.getUint8(this.pos);return this.pos++,e}popUInt16(){if(this.pos+2>this.view.byteLength)return 0;let e=this.view.getUint16(this.pos,!0);return this.pos+=2,e}popUInt32(){if(this.pos+4>this.view.byteLength)return 0;let e=this.view.getUint32(this.pos,!0);return this.pos+=4,e}popUInt64(){if(this.pos+8>this.view.byteLength)return new i.default;let e=this.view.getUint32(this.pos,!0);this.pos+=4;let t=this.view.getUint32(this.pos,!0);return this.pos+=4,new i.default(t,e)}popUGID(){this.popUInt16();let e=this.popUInt32(),t=this.popUInt32(),n=this.popUInt32();return new r.default(e,t,n)}popUint8Array(){let e=this.popUInt16();if(this.pos+e>this.view.byteLength)return null;let t=new Uint8Array(this.view.buffer,this.pos,e);return this.pos+=e,t}popUint8Array32(){let e=this.popUInt32();if(this.pos+e>this.view.byteLength)return null;let t=new Uint8Array(this.view.buffer,this.pos,e);return this.pos+=e,t}popUInt32Vector(){let e=this.popUInt32();if(this.pos+4*e>this.view.byteLength)return null;let t=[];for(let n=0;n<e;n++)t.push(this.popUInt32());return t}popUInt16Vector(){let e=this.popUInt32();if(this.pos+2*e>this.view.byteLength)return null;let t=[];for(let n=0;n<e;n++)t.push(this.popUInt16());return t}popString(){let e=this.popUInt16();if(this.pos+e>this.view.byteLength)return null;let t="";for(let n=0;n<e;++n)t+=String.fromCharCode(this.popUInt8());return t}popUtf8String(){let e=this.popUint8Array();return o.default.decodeUtf8(e)}popUtf8String32(){let e=this.popUint8Array32();return o.default.decodeUtf8(e)}}},function(e,t,n){"use strict";e.exports=s;var i=n(10);((s.prototype=Object.create(i.prototype)).constructor=s).className="Enum";var r=n(13),o=n(2);function s(e,t,n,r,o){if(i.call(this,e,n),t&&"object"!=typeof t)throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=r,this.comments=o||{},this.reserved=void 0,t)for(var s=Object.keys(t),a=0;a<s.length;++a)"number"==typeof t[s[a]]&&(this.valuesById[this.values[s[a]]=t[s[a]]]=s[a])}s.fromJSON=function(e,t){var n=new s(e,t.values,t.options,t.comment,t.comments);return n.reserved=t.reserved,n},s.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return o.toObject(["options",this.options,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"comment",t?this.comment:void 0,"comments",t?this.comments:void 0])},s.prototype.add=function(e,t,n){if(!o.isString(e))throw TypeError("name must be a string");if(!o.isInteger(t))throw TypeError("id must be an integer");if(void 0!==this.values[e])throw Error("duplicate name '"+e+"' in "+this);if(this.isReservedId(t))throw Error("id "+t+" is reserved in "+this);if(this.isReservedName(e))throw Error("name '"+e+"' is reserved in "+this);if(void 0!==this.valuesById[t]){if(!this.options||!this.options.allow_alias)throw Error("duplicate id "+t+" in "+this);this.values[e]=t}else this.valuesById[this.values[e]=t]=e;return this.comments[e]=n||null,this},s.prototype.remove=function(e){if(!o.isString(e))throw TypeError("name must be a string");var t=this.values[e];if(null==t)throw Error("name '"+e+"' does not exist in "+this);return delete this.valuesById[t],delete this.values[e],delete this.comments[e],this},s.prototype.isReservedId=function(e){return r.isReservedId(this.reserved,e)},s.prototype.isReservedName=function(e){return r.isReservedName(this.reserved,e)}},function(e,t,n){"use strict";(function(e){var i=t;function r(e,t,n){for(var i=Object.keys(t),r=0;r<i.length;++r)void 0!==e[i[r]]&&n||(e[i[r]]=t[i[r]]);return e}function o(e){function t(e,n){if(!(this instanceof t))return new t(e,n);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),n&&r(this,n)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}i.asPromise=n(39),i.base64=n(76),i.EventEmitter=n(77),i.float=n(78),i.inquire=n(40),i.utf8=n(28),i.pool=n(79),i.LongBits=n(80),i.global="undefined"!=typeof window&&window||void 0!==e&&e||"undefined"!=typeof self&&self||this,i.emptyArray=Object.freeze?Object.freeze([]):[],i.emptyObject=Object.freeze?Object.freeze({}):{},i.isNode=Boolean(i.global.process&&i.global.process.versions&&i.global.process.versions.node),i.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},i.isString=function(e){return"string"==typeof e||e instanceof String},i.isObject=function(e){return e&&"object"==typeof e},i.isset=i.isSet=function(e,t){var n=e[t];return!(null==n||!e.hasOwnProperty(t))&&("object"!=typeof n||(Array.isArray(n)?n.length:Object.keys(n).length)>0)},i.Buffer=function(){try{var e=i.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),i._Buffer_from=null,i._Buffer_allocUnsafe=null,i.newBuffer=function(e){return"number"==typeof e?i.Buffer?i._Buffer_allocUnsafe(e):new i.Array(e):i.Buffer?i._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},i.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,i.Long=i.global.dcodeIO&&i.global.dcodeIO.Long||i.global.Long||i.inquire("long"),i.key2Re=/^true|false|0|1$/,i.key32Re=/^-?(?:0|[1-9][0-9]*)$/,i.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,i.longToHash=function(e){return e?i.LongBits.from(e).toHash():i.LongBits.zeroHash},i.longFromHash=function(e,t){var n=i.LongBits.fromHash(e);return i.Long?i.Long.fromBits(n.lo,n.hi,t):n.toNumber(Boolean(t))},i.merge=r,i.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},i.newError=o,i.ProtocolError=o("ProtocolError"),i.oneOfGetter=function(e){for(var t={},n=0;n<e.length;++n)t[e[n]]=1;return function(){for(var e=Object.keys(this),n=e.length-1;n>-1;--n)if(1===t[e[n]]&&void 0!==this[e[n]]&&null!==this[e[n]])return e[n]}},i.oneOfSetter=function(e){return function(t){for(var n=0;n<e.length;++n)e[n]!==t&&delete this[e[n]]}},i.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},i._configure=function(){var e=i.Buffer;e?(i._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,n){return new e(t,n)},i._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):i._Buffer_from=i._Buffer_allocUnsafe=null}}).call(this,n(15))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=0,r=function(){if("undefined"==typeof window){const e=wx.getSystemInfoSync().SDKVersion;if(function(e,t){e=e.split("."),t=t.split(".");const n=Math.max(e.length,t.length);for(;e.length<n;)e.push("0");for(;t.length<n;)t.push("0");for(let i=0;i<n;i++){const n=parseInt(e[i]),r=parseInt(t[i]);if(n>r)return 1;if(n<r)return-1}return 0}(e,"2.1.0")>=0)return wx.getLogManager().log("I can use wx log. SDKVersion="+e),!0}return!1}();function o(){let e=new Date;return"h5svc-oversea "+e.toLocaleTimeString("en-US",{hour12:!1})+"."+function(e){let t;switch(e.toString().length){case 1:t="00"+e;break;case 2:t="0"+e;break;default:t=e}return t}(e.getMilliseconds())+":"}let s={_data:[],_length:0,_visible:!1,debug:function(e){i<=-1&&(e=o()+e,s.record(e,"debug"),console.debug(e),r&&wx.getLogManager().debug(e))},log:function(e){i<=0&&(e=o()+e,s.record(e,"log"),console.log(e),r&&wx.getLogManager().log(e))},info:function(e){i<=1&&(e=o()+e,s.record(e,"info"),console.info(e),r&&wx.getLogManager().info(e))},warn:function(e){i<=2&&(e=o()+e,s.record(e,"warn"),console.warn(e),r&&wx.getLogManager().warn(e))},error:function(e){i<=3&&(e=o()+e,s.record(e,"error"),console.error(e),r&&wx.getLogManager().warn(e))},setLevel:function(e=0){console.log(o()+"set level from "+i+" to "+e),i=e},record:function(e,t){if(1100===s._length&&(s._data.splice(0,100),s._length=1e3),s._length++,s._data.push(`${e} [${t}]`),s._visible){let t=document.getElementById("__h5playerLogWin");t.value+=e+"\r\n",t.scrollTop=1e4}},getLog:function(){return s._data},setLogVisible:function(e){s._visible=e;let t=document.getElementById("__h5playerLogWin");if(e){t||((t=document.createElement("textarea")).id="__h5playerLogWin",t.style.display="block",t.style.position="absolute",t.style.top="0",t.style.width="500px",t.style.height="300px",document.body.appendChild(t));let e="";for(let t=0;t<s._length;t++)e+=s._data[t]+"\r\n";t.value=e,t.scrollTop=1e4}else t&&(t.style.display="none")}};window&&(window._h5playerLogger=s),t.default=s},function(e,t,n){"use strict";e.exports=u;var i=n(10);((u.prototype=Object.create(i.prototype)).constructor=u).className="Field";var r,o=n(6),s=n(11),a=n(2),l=/^required|optional|repeated$/;function u(e,t,n,r,o,u,c){if(a.isObject(r)?(c=o,u=r,r=o=void 0):a.isObject(o)&&(c=u,u=o,o=void 0),i.call(this,e,u),!a.isInteger(t)||t<0)throw TypeError("id must be a non-negative integer");if(!a.isString(n))throw TypeError("type must be a string");if(void 0!==r&&!l.test(r=r.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(void 0!==o&&!a.isString(o))throw TypeError("extend must be a string");this.rule=r&&"optional"!==r?r:void 0,this.type=n,this.id=t,this.extend=o||void 0,this.required="required"===r,this.optional=!this.required,this.repeated="repeated"===r,this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=!!a.Long&&void 0!==s.long[n],this.bytes="bytes"===n,this.resolvedType=null,this.extensionField=null,this.declaringField=null,this._packed=null,this.comment=c}u.fromJSON=function(e,t){return new u(e,t.id,t.type,t.rule,t.extend,t.options,t.comment)},Object.defineProperty(u.prototype,"packed",{get:function(){return null===this._packed&&(this._packed=!1!==this.getOption("packed")),this._packed}}),u.prototype.setOption=function(e,t,n){return"packed"===e&&(this._packed=null),i.prototype.setOption.call(this,e,t,n)},u.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return a.toObject(["rule","optional"!==this.rule&&this.rule||void 0,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])},u.prototype.resolve=function(){if(this.resolved)return this;if(void 0===(this.typeDefault=s.defaults[this.type])&&(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof r?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]),this.options&&null!=this.options.default&&(this.typeDefault=this.options.default,this.resolvedType instanceof o&&"string"==typeof this.typeDefault&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&(!0!==this.options.packed&&(void 0===this.options.packed||!this.resolvedType||this.resolvedType instanceof o)||delete this.options.packed,Object.keys(this.options).length||(this.options=void 0)),this.long)this.typeDefault=a.Long.fromNumber(this.typeDefault,"u"===this.type.charAt(0)),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&"string"==typeof this.typeDefault){var e;a.base64.test(this.typeDefault)?a.base64.decode(this.typeDefault,e=a.newBuffer(a.base64.length(this.typeDefault)),0):a.utf8.write(this.typeDefault,e=a.newBuffer(a.utf8.length(this.typeDefault)),0),this.typeDefault=e}return this.map?this.defaultValue=a.emptyObject:this.repeated?this.defaultValue=a.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof r&&(this.parent.ctor.prototype[this.name]=this.defaultValue),i.prototype.resolve.call(this)},u.d=function(e,t,n,i){return"function"==typeof t?t=a.decorateType(t).name:t&&"object"==typeof t&&(t=a.decorateEnum(t).name),function(r,o){a.decorateType(r.constructor).add(new u(o,e,t,n,{default:i}))}},u._configure=function(e){r=e}},function(e,t,n){"use strict";e.exports=o,o.className="ReflectionObject";var i,r=n(2);function o(e,t){if(!r.isString(e))throw TypeError("name must be a string");if(t&&!r.isObject(t))throw TypeError("options must be an object");this.options=t,this.name=e,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}Object.defineProperties(o.prototype,{root:{get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}},fullName:{get:function(){for(var e=[this.name],t=this.parent;t;)e.unshift(t.name),t=t.parent;return e.join(".")}}}),o.prototype.toJSON=function(){throw Error()},o.prototype.onAdd=function(e){this.parent&&this.parent!==e&&this.parent.remove(this),this.parent=e,this.resolved=!1;var t=e.root;t instanceof i&&t._handleAdd(this)},o.prototype.onRemove=function(e){var t=e.root;t instanceof i&&t._handleRemove(this),this.parent=null,this.resolved=!1},o.prototype.resolve=function(){return this.resolved?this:(this.root instanceof i&&(this.resolved=!0),this)},o.prototype.getOption=function(e){if(this.options)return this.options[e]},o.prototype.setOption=function(e,t,n){return n&&this.options&&void 0!==this.options[e]||((this.options||(this.options={}))[e]=t),this},o.prototype.setOptions=function(e,t){if(e)for(var n=Object.keys(e),i=0;i<n.length;++i)this.setOption(n[i],e[n[i]],t);return this},o.prototype.toString=function(){var e=this.constructor.className,t=this.fullName;return t.length?e+" "+t:e},o._configure=function(e){i=e}},function(e,t,n){"use strict";var i=t,r=n(2),o=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function s(e,t){var n=0,i={};for(t|=0;n<e.length;)i[o[n+t]]=e[n++];return i}i.basic=s([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),i.defaults=s([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",r.emptyArray,null]),i.long=s([0,0,0,1,1],7),i.mapKey=s([0,0,0,5,5,0,0,0,1,1,0,2],2),i.packed=s([1,5,0,0,0,5,5,0,0,0,1,1,0])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(54);t.Utify={encodeStringToUtf8Bytes:i.encodeStringToUtf8Bytes,decodeUtf8BytesToString:i.decodeUtf8BytesToString},function(e){e[e.Idle=-1]="Idle",e[e.Logined=0]="Logined"}(t.LoginStatus||(t.LoginStatus={})),function(e){e[e.Disconnected=0]="Disconnected",e[e.Connecting=1]="Connecting",e[e.Connected=2]="Connected"}(t.ConnectStatus||(t.ConnectStatus={})),t.WSHOST="wss://web-ap-service.sunclouds.com"},function(e,t,n){"use strict";e.exports=c;var i=n(10);((c.prototype=Object.create(i.prototype)).constructor=c).className="Namespace";var r,o,s,a=n(9),l=n(2);function u(e,t){if(e&&e.length){for(var n={},i=0;i<e.length;++i)n[e[i].name]=e[i].toJSON(t);return n}}function c(e,t){i.call(this,e,t),this.nested=void 0,this._nestedArray=null}function h(e){return e._nestedArray=null,e}c.fromJSON=function(e,t){return new c(e,t.options).addJSON(t.nested)},c.arrayToJSON=u,c.isReservedId=function(e,t){if(e)for(var n=0;n<e.length;++n)if("string"!=typeof e[n]&&e[n][0]<=t&&e[n][1]>=t)return!0;return!1},c.isReservedName=function(e,t){if(e)for(var n=0;n<e.length;++n)if(e[n]===t)return!0;return!1},Object.defineProperty(c.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=l.toArray(this.nested))}}),c.prototype.toJSON=function(e){return l.toObject(["options",this.options,"nested",u(this.nestedArray,e)])},c.prototype.addJSON=function(e){if(e)for(var t,n=Object.keys(e),i=0;i<n.length;++i)t=e[n[i]],this.add((void 0!==t.fields?r.fromJSON:void 0!==t.values?s.fromJSON:void 0!==t.methods?o.fromJSON:void 0!==t.id?a.fromJSON:c.fromJSON)(n[i],t));return this},c.prototype.get=function(e){return this.nested&&this.nested[e]||null},c.prototype.getEnum=function(e){if(this.nested&&this.nested[e]instanceof s)return this.nested[e].values;throw Error("no such enum: "+e)},c.prototype.add=function(e){if(!(e instanceof a&&void 0!==e.extend||e instanceof r||e instanceof s||e instanceof o||e instanceof c))throw TypeError("object must be a valid nested object");if(this.nested){var t=this.get(e.name);if(t){if(!(t instanceof c&&e instanceof c)||t instanceof r||t instanceof o)throw Error("duplicate name '"+e.name+"' in "+this);for(var n=t.nestedArray,i=0;i<n.length;++i)e.add(n[i]);this.remove(t),this.nested||(this.nested={}),e.setOptions(t.options,!0)}}else this.nested={};return this.nested[e.name]=e,e.onAdd(this),h(this)},c.prototype.remove=function(e){if(!(e instanceof i))throw TypeError("object must be a ReflectionObject");if(e.parent!==this)throw Error(e+" is not a member of "+this);return delete this.nested[e.name],Object.keys(this.nested).length||(this.nested=void 0),e.onRemove(this),h(this)},c.prototype.define=function(e,t){if(l.isString(e))e=e.split(".");else if(!Array.isArray(e))throw TypeError("illegal path");if(e&&e.length&&""===e[0])throw Error("path must be relative");for(var n=this;e.length>0;){var i=e.shift();if(n.nested&&n.nested[i]){if(!((n=n.nested[i])instanceof c))throw Error("path conflicts with non-namespace objects")}else n.add(n=new c(i))}return t&&n.addJSON(t),n},c.prototype.resolveAll=function(){for(var e=this.nestedArray,t=0;t<e.length;)e[t]instanceof c?e[t++].resolveAll():e[t++].resolve();return this.resolve()},c.prototype.lookup=function(e,t,n){if("boolean"==typeof t?(n=t,t=void 0):t&&!Array.isArray(t)&&(t=[t]),l.isString(e)&&e.length){if("."===e)return this.root;e=e.split(".")}else if(!e.length)return this;if(""===e[0])return this.root.lookup(e.slice(1),t);var i=this.get(e[0]);if(i){if(1===e.length){if(!t||t.indexOf(i.constructor)>-1)return i}else if(i instanceof c&&(i=i.lookup(e.slice(1),t,!0)))return i}else for(var r=0;r<this.nestedArray.length;++r)if(this._nestedArray[r]instanceof c&&(i=this._nestedArray[r].lookup(e,t,!0)))return i;return null===this.parent||n?null:this.parent.lookup(e,t)},c.prototype.lookupType=function(e){var t=this.lookup(e,[r]);if(!t)throw Error("no such type: "+e);return t},c.prototype.lookupEnum=function(e){var t=this.lookup(e,[s]);if(!t)throw Error("no such Enum '"+e+"' in "+this);return t},c.prototype.lookupTypeOrEnum=function(e){var t=this.lookup(e,[r,s]);if(!t)throw Error("no such Type or Enum '"+e+"' in "+this);return t},c.prototype.lookupService=function(e){var t=this.lookup(e,[o]);if(!t)throw Error("no such Service '"+e+"' in "+this);return t},c._configure=function(e,t,n){r=e,o=t,s=n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=0,r={now:function(){0===i&&(i=Date.now()-1);let e=Date.now()-i;return e>4294967295?(i+=4294967295,Date.now()-i):e},utc:function(){return Math.round(Date.now()/1e3)}};t.default=r},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";e.exports=s;var i=n(10);((s.prototype=Object.create(i.prototype)).constructor=s).className="OneOf";var r=n(9),o=n(2);function s(e,t,n,r){if(Array.isArray(t)||(n=t,t=void 0),i.call(this,e,n),void 0!==t&&!Array.isArray(t))throw TypeError("fieldNames must be an Array");this.oneof=t||[],this.fieldsArray=[],this.comment=r}function a(e){if(e.parent)for(var t=0;t<e.fieldsArray.length;++t)e.fieldsArray[t].parent||e.parent.add(e.fieldsArray[t])}s.fromJSON=function(e,t){return new s(e,t.oneof,t.options,t.comment)},s.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return o.toObject(["options",this.options,"oneof",this.oneof,"comment",t?this.comment:void 0])},s.prototype.add=function(e){if(!(e instanceof r))throw TypeError("field must be a Field");return e.parent&&e.parent!==this.parent&&e.parent.remove(e),this.oneof.push(e.name),this.fieldsArray.push(e),e.partOf=this,a(this),this},s.prototype.remove=function(e){if(!(e instanceof r))throw TypeError("field must be a Field");var t=this.fieldsArray.indexOf(e);if(t<0)throw Error(e+" is not a member of "+this);return this.fieldsArray.splice(t,1),(t=this.oneof.indexOf(e.name))>-1&&this.oneof.splice(t,1),e.partOf=null,this},s.prototype.onAdd=function(e){i.prototype.onAdd.call(this,e);for(var t=0;t<this.oneof.length;++t){var n=e.get(this.oneof[t]);n&&!n.partOf&&(n.partOf=this,this.fieldsArray.push(n))}a(this)},s.prototype.onRemove=function(e){for(var t,n=0;n<this.fieldsArray.length;++n)(t=this.fieldsArray[n]).parent&&t.parent.remove(t);i.prototype.onRemove.call(this,e)},s.d=function(){for(var e=new Array(arguments.length),t=0;t<arguments.length;)e[t]=arguments[t++];return function(t,n){o.decorateType(t.constructor).add(new s(n,e)),Object.defineProperty(t,n,{get:o.oneOfGetter(e),set:o.oneOfSetter(e)})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{static report(e,t,i,r,o,s){if(0==e)return;if("undefined"==typeof window)return;let a=n(64);a.Metrics&&(a.Metrics.setOptions({isOversea:!0}),a.Metrics.serviceReport({scode:e,ver:"1.0.0",uri:t+"|"+i+"|"+r,timeSpent:o,code:s}))}}},function(e,t,n){"use strict";e.exports=h;var i,r=n(7),o=r.LongBits,s=r.base64,a=r.utf8;function l(e,t,n){this.fn=e,this.len=t,this.next=void 0,this.val=n}function u(){}function c(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function h(){this.len=0,this.head=new l(u,0,0),this.tail=this.head,this.states=null}function p(e,t,n){t[n]=255&e}function d(e,t){this.len=e,this.next=void 0,this.val=t}function f(e,t,n){for(;e.hi;)t[n++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[n++]=127&e.lo|128,e.lo=e.lo>>>7;t[n++]=e.lo}function g(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}h.create=r.Buffer?function(){return(h.create=function(){return new i})()}:function(){return new h},h.alloc=function(e){return new r.Array(e)},r.Array!==Array&&(h.alloc=r.pool(h.alloc,r.Array.prototype.subarray)),h.prototype._push=function(e,t,n){return this.tail=this.tail.next=new l(e,t,n),this.len+=t,this},d.prototype=Object.create(l.prototype),d.prototype.fn=function(e,t,n){for(;e>127;)t[n++]=127&e|128,e>>>=7;t[n]=e},h.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new d((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},h.prototype.int32=function(e){return e<0?this._push(f,10,o.fromNumber(e)):this.uint32(e)},h.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},h.prototype.uint64=function(e){var t=o.from(e);return this._push(f,t.length(),t)},h.prototype.int64=h.prototype.uint64,h.prototype.sint64=function(e){var t=o.from(e).zzEncode();return this._push(f,t.length(),t)},h.prototype.bool=function(e){return this._push(p,1,e?1:0)},h.prototype.fixed32=function(e){return this._push(g,4,e>>>0)},h.prototype.sfixed32=h.prototype.fixed32,h.prototype.fixed64=function(e){var t=o.from(e);return this._push(g,4,t.lo)._push(g,4,t.hi)},h.prototype.sfixed64=h.prototype.fixed64,h.prototype.float=function(e){return this._push(r.float.writeFloatLE,4,e)},h.prototype.double=function(e){return this._push(r.float.writeDoubleLE,8,e)};var y=r.Array.prototype.set?function(e,t,n){t.set(e,n)}:function(e,t,n){for(var i=0;i<e.length;++i)t[n+i]=e[i]};h.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(p,1,0);if(r.isString(e)){var n=h.alloc(t=s.length(e));s.decode(e,n,0),e=n}return this.uint32(t)._push(y,t,e)},h.prototype.string=function(e){var t=a.length(e);return t?this.uint32(t)._push(a.write,t,e):this._push(p,1,0)},h.prototype.fork=function(){return this.states=new c(this),this.head=this.tail=new l(u,0,0),this.len=0,this},h.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new l(u,0,0),this.len=0),this},h.prototype.ldelim=function(){var e=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=t,this.len+=n),this},h.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,t,n),n+=e.len,e=e.next;return t},h._configure=function(e){i=e}},function(e,t,n){"use strict";e.exports=l;var i,r=n(7),o=r.LongBits,s=r.utf8;function a(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function l(e){this.buf=e,this.pos=0,this.len=e.length}var u,c="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new l(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new l(e);throw Error("illegal buffer")};function h(){var e=new o(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw a(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw a(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function p(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function d(){if(this.pos+8>this.len)throw a(this,8);return new o(p(this.buf,this.pos+=4),p(this.buf,this.pos+=4))}l.create=r.Buffer?function(e){return(l.create=function(e){return r.Buffer.isBuffer(e)?new i(e):c(e)})(e)}:c,l.prototype._slice=r.Array.prototype.subarray||r.Array.prototype.slice,l.prototype.uint32=(u=4294967295,function(){if(u=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return u;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return u}),l.prototype.int32=function(){return 0|this.uint32()},l.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},l.prototype.bool=function(){return 0!==this.uint32()},l.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return p(this.buf,this.pos+=4)},l.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|p(this.buf,this.pos+=4)},l.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var e=r.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},l.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var e=r.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},l.prototype.bytes=function(){var e=this.uint32(),t=this.pos,n=this.pos+e;if(n>this.len)throw a(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,n):t===n?new this.buf.constructor(0):this._slice.call(this.buf,t,n)},l.prototype.string=function(){var e=this.bytes();return s.read(e,0,e.length)},l.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw a(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw a(this)}while(128&this.buf[this.pos++]);return this},l.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},l._configure=function(e){i=e;var t=r.Long?"toLong":"toNumber";r.merge(l.prototype,{int64:function(){return h.call(this)[t](!1)},uint64:function(){return h.call(this)[t](!0)},sint64:function(){return h.call(this).zzDecode()[t](!1)},fixed64:function(){return d.call(this)[t](!0)},sfixed64:function(){return d.call(this)[t](!1)}})}},function(e,t,n){"use strict";e.exports=v;var i=n(13);((v.prototype=Object.create(i.prototype)).constructor=v).className="Type";var r=n(6),o=n(16),s=n(9),a=n(21),l=n(22),u=n(24),c=n(19),h=n(18),p=n(2),d=n(43),f=n(44),g=n(45),y=n(46),m=n(47);function v(e,t){i.call(this,e,t),this.fields={},this.oneofs=void 0,this.extensions=void 0,this.reserved=void 0,this.group=void 0,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}function b(e){return e._fieldsById=e._fieldsArray=e._oneofsArray=null,delete e.encode,delete e.decode,delete e.verify,e}Object.defineProperties(v.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var e=Object.keys(this.fields),t=0;t<e.length;++t){var n=this.fields[e[t]],i=n.id;if(this._fieldsById[i])throw Error("duplicate id "+i+" in "+this);this._fieldsById[i]=n}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=p.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=p.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=v.generateConstructor(this)())},set:function(e){var t=e.prototype;t instanceof u||((e.prototype=new u).constructor=e,p.merge(e.prototype,t)),e.$type=e.prototype.$type=this,p.merge(e,u,!0),this._ctor=e;for(var n=0;n<this.fieldsArray.length;++n)this._fieldsArray[n].resolve();var i={};for(n=0;n<this.oneofsArray.length;++n)i[this._oneofsArray[n].resolve().name]={get:p.oneOfGetter(this._oneofsArray[n].oneof),set:p.oneOfSetter(this._oneofsArray[n].oneof)};n&&Object.defineProperties(e.prototype,i)}}}),v.generateConstructor=function(e){for(var t,n=p.codegen(["p"],e.name),i=0;i<e.fieldsArray.length;++i)(t=e._fieldsArray[i]).map?n("this%s={}",p.safeProp(t.name)):t.repeated&&n("this%s=[]",p.safeProp(t.name));return n("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")},v.fromJSON=function(e,t){var n=new v(e,t.options);n.extensions=t.extensions,n.reserved=t.reserved;for(var u=Object.keys(t.fields),c=0;c<u.length;++c)n.add((void 0!==t.fields[u[c]].keyType?a.fromJSON:s.fromJSON)(u[c],t.fields[u[c]]));if(t.oneofs)for(u=Object.keys(t.oneofs),c=0;c<u.length;++c)n.add(o.fromJSON(u[c],t.oneofs[u[c]]));if(t.nested)for(u=Object.keys(t.nested),c=0;c<u.length;++c){var h=t.nested[u[c]];n.add((void 0!==h.id?s.fromJSON:void 0!==h.fields?v.fromJSON:void 0!==h.values?r.fromJSON:void 0!==h.methods?l.fromJSON:i.fromJSON)(u[c],h))}return t.extensions&&t.extensions.length&&(n.extensions=t.extensions),t.reserved&&t.reserved.length&&(n.reserved=t.reserved),t.group&&(n.group=!0),t.comment&&(n.comment=t.comment),n},v.prototype.toJSON=function(e){var t=i.prototype.toJSON.call(this,e),n=!!e&&Boolean(e.keepComments);return p.toObject(["options",t&&t.options||void 0,"oneofs",i.arrayToJSON(this.oneofsArray,e),"fields",i.arrayToJSON(this.fieldsArray.filter(function(e){return!e.declaringField}),e)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:void 0,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"group",this.group||void 0,"nested",t&&t.nested||void 0,"comment",n?this.comment:void 0])},v.prototype.resolveAll=function(){for(var e=this.fieldsArray,t=0;t<e.length;)e[t++].resolve();var n=this.oneofsArray;for(t=0;t<n.length;)n[t++].resolve();return i.prototype.resolveAll.call(this)},v.prototype.get=function(e){return this.fields[e]||this.oneofs&&this.oneofs[e]||this.nested&&this.nested[e]||null},v.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);if(e instanceof s&&void 0===e.extend){if(this._fieldsById?this._fieldsById[e.id]:this.fieldsById[e.id])throw Error("duplicate id "+e.id+" in "+this);if(this.isReservedId(e.id))throw Error("id "+e.id+" is reserved in "+this);if(this.isReservedName(e.name))throw Error("name '"+e.name+"' is reserved in "+this);return e.parent&&e.parent.remove(e),this.fields[e.name]=e,e.message=this,e.onAdd(this),b(this)}return e instanceof o?(this.oneofs||(this.oneofs={}),this.oneofs[e.name]=e,e.onAdd(this),b(this)):i.prototype.add.call(this,e)},v.prototype.remove=function(e){if(e instanceof s&&void 0===e.extend){if(!this.fields||this.fields[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.fields[e.name],e.parent=null,e.onRemove(this),b(this)}if(e instanceof o){if(!this.oneofs||this.oneofs[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.oneofs[e.name],e.parent=null,e.onRemove(this),b(this)}return i.prototype.remove.call(this,e)},v.prototype.isReservedId=function(e){return i.isReservedId(this.reserved,e)},v.prototype.isReservedName=function(e){return i.isReservedName(this.reserved,e)},v.prototype.create=function(e){return new this.ctor(e)},v.prototype.setup=function(){for(var e=this.fullName,t=[],n=0;n<this.fieldsArray.length;++n)t.push(this._fieldsArray[n].resolve().resolvedType);this.encode=d(this)({Writer:h,types:t,util:p}),this.decode=f(this)({Reader:c,types:t,util:p}),this.verify=g(this)({types:t,util:p}),this.fromObject=y.fromObject(this)({types:t,util:p}),this.toObject=y.toObject(this)({types:t,util:p});var i=m[e];if(i){var r=Object.create(this);r.fromObject=this.fromObject,this.fromObject=i.fromObject.bind(r),r.toObject=this.toObject,this.toObject=i.toObject.bind(r)}return this},v.prototype.encode=function(e,t){return this.setup().encode(e,t)},v.prototype.encodeDelimited=function(e,t){return this.encode(e,t&&t.len?t.fork():t).ldelim()},v.prototype.decode=function(e,t){return this.setup().decode(e,t)},v.prototype.decodeDelimited=function(e){return e instanceof c||(e=c.create(e)),this.decode(e,e.uint32())},v.prototype.verify=function(e){return this.setup().verify(e)},v.prototype.fromObject=function(e){return this.setup().fromObject(e)},v.prototype.toObject=function(e,t){return this.setup().toObject(e,t)},v.d=function(e){return function(t){p.decorateType(t,e)}}},function(e,t,n){"use strict";e.exports=s;var i=n(9);((s.prototype=Object.create(i.prototype)).constructor=s).className="MapField";var r=n(11),o=n(2);function s(e,t,n,r,s,a){if(i.call(this,e,t,r,void 0,void 0,s,a),!o.isString(n))throw TypeError("keyType must be a string");this.keyType=n,this.resolvedKeyType=null,this.map=!0}s.fromJSON=function(e,t){return new s(e,t.id,t.keyType,t.type,t.options,t.comment)},s.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return o.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])},s.prototype.resolve=function(){if(this.resolved)return this;if(void 0===r.mapKey[this.keyType])throw Error("invalid key type: "+this.keyType);return i.prototype.resolve.call(this)},s.d=function(e,t,n){return"function"==typeof n?n=o.decorateType(n).name:n&&"object"==typeof n&&(n=o.decorateEnum(n).name),function(i,r){o.decorateType(i.constructor).add(new s(r,e,t,n))}}},function(e,t,n){"use strict";e.exports=a;var i=n(13);((a.prototype=Object.create(i.prototype)).constructor=a).className="Service";var r=n(23),o=n(2),s=n(41);function a(e,t){i.call(this,e,t),this.methods={},this._methodsArray=null}function l(e){return e._methodsArray=null,e}a.fromJSON=function(e,t){var n=new a(e,t.options);if(t.methods)for(var i=Object.keys(t.methods),o=0;o<i.length;++o)n.add(r.fromJSON(i[o],t.methods[i[o]]));return t.nested&&n.addJSON(t.nested),n.comment=t.comment,n},a.prototype.toJSON=function(e){var t=i.prototype.toJSON.call(this,e),n=!!e&&Boolean(e.keepComments);return o.toObject(["options",t&&t.options||void 0,"methods",i.arrayToJSON(this.methodsArray,e)||{},"nested",t&&t.nested||void 0,"comment",n?this.comment:void 0])},Object.defineProperty(a.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=o.toArray(this.methods))}}),a.prototype.get=function(e){return this.methods[e]||i.prototype.get.call(this,e)},a.prototype.resolveAll=function(){for(var e=this.methodsArray,t=0;t<e.length;++t)e[t].resolve();return i.prototype.resolve.call(this)},a.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);return e instanceof r?(this.methods[e.name]=e,e.parent=this,l(this)):i.prototype.add.call(this,e)},a.prototype.remove=function(e){if(e instanceof r){if(this.methods[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.methods[e.name],e.parent=null,l(this)}return i.prototype.remove.call(this,e)},a.prototype.create=function(e,t,n){for(var i,r=new s.Service(e,t,n),a=0;a<this.methodsArray.length;++a){var l=o.lcFirst((i=this._methodsArray[a]).resolve().name).replace(/[^$\w_]/g,"");r[l]=o.codegen(["r","c"],o.isReserved(l)?l+"_":l)("return this.rpcCall(m,q,s,r,c)")({m:i,q:i.resolvedRequestType.ctor,s:i.resolvedResponseType.ctor})}return r}},function(e,t,n){"use strict";e.exports=o;var i=n(10);((o.prototype=Object.create(i.prototype)).constructor=o).className="Method";var r=n(2);function o(e,t,n,o,s,a,l,u){if(r.isObject(s)?(l=s,s=a=void 0):r.isObject(a)&&(l=a,a=void 0),void 0!==t&&!r.isString(t))throw TypeError("type must be a string");if(!r.isString(n))throw TypeError("requestType must be a string");if(!r.isString(o))throw TypeError("responseType must be a string");i.call(this,e,l),this.type=t||"rpc",this.requestType=n,this.requestStream=!!s||void 0,this.responseType=o,this.responseStream=!!a||void 0,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=u}o.fromJSON=function(e,t){return new o(e,t.type,t.requestType,t.responseType,t.requestStream,t.responseStream,t.options,t.comment)},o.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return r.toObject(["type","rpc"!==this.type&&this.type||void 0,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",t?this.comment:void 0])},o.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),i.prototype.resolve.call(this))}},function(e,t,n){"use strict";e.exports=r;var i=n(7);function r(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)this[t[n]]=e[t[n]]}r.create=function(e){return this.$type.create(e)},r.encode=function(e,t){return this.$type.encode(e,t)},r.encodeDelimited=function(e,t){return this.$type.encodeDelimited(e,t)},r.decode=function(e){return this.$type.decode(e)},r.decodeDelimited=function(e){return this.$type.decodeDelimited(e)},r.verify=function(e){return this.$type.verify(e)},r.fromObject=function(e){return this.$type.fromObject(e)},r.toObject=function(e,t){return this.$type.toObject(e,t)},r.prototype.toJSON=function(){return this.$type.toObject(this,i.toJSONOptions)}},function(e,t,n){"use strict";e.exports=h;var i=n(13);((h.prototype=Object.create(i.prototype)).constructor=h).className="Root";var r,o,s,a=n(9),l=n(6),u=n(16),c=n(2);function h(e){i.call(this,"",e),this.deferred=[],this.files=[]}function p(){}h.fromJSON=function(e,t){return t||(t=new h),e.options&&t.setOptions(e.options),t.addJSON(e.nested)},h.prototype.resolvePath=c.path.resolve,h.prototype.load=function e(t,n,i){"function"==typeof n&&(i=n,n=void 0);var r=this;if(!i)return c.asPromise(e,r,t,n);var a=i===p;function l(e,t){if(i){var n=i;if(i=null,a)throw e;n(e,t)}}function u(e,t){try{if(c.isString(t)&&"{"===t.charAt(0)&&(t=JSON.parse(t)),c.isString(t)){o.filename=e;var i,s=o(t,r,n),u=0;if(s.imports)for(;u<s.imports.length;++u)(i=r.resolvePath(e,s.imports[u]))&&h(i);if(s.weakImports)for(u=0;u<s.weakImports.length;++u)(i=r.resolvePath(e,s.weakImports[u]))&&h(i,!0)}else r.setOptions(t.options).addJSON(t.nested)}catch(e){l(e)}a||d||l(null,r)}function h(e,t){var n=e.lastIndexOf("google/protobuf/");if(n>-1){var o=e.substring(n);o in s&&(e=o)}if(!(r.files.indexOf(e)>-1))if(r.files.push(e),e in s)a?u(e,s[e]):(++d,setTimeout(function(){--d,u(e,s[e])}));else if(a){var h;try{h=c.fs.readFileSync(e).toString("utf8")}catch(e){return void(t||l(e))}u(e,h)}else++d,c.fetch(e,function(n,o){--d,i&&(n?t?d||l(null,r):l(n):u(e,o))})}var d=0;c.isString(t)&&(t=[t]);for(var f,g=0;g<t.length;++g)(f=r.resolvePath("",t[g]))&&h(f);if(a)return r;d||l(null,r)},h.prototype.loadSync=function(e,t){if(!c.isNode)throw Error("not supported");return this.load(e,t,p)},h.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map(function(e){return"'extend "+e.extend+"' in "+e.parent.fullName}).join(", "));return i.prototype.resolveAll.call(this)};var d=/^[A-Z]/;function f(e,t){var n=t.parent.lookup(t.extend);if(n){var i=new a(t.fullName,t.id,t.type,t.rule,void 0,t.options);return i.declaringField=t,t.extensionField=i,n.add(i),!0}return!1}h.prototype._handleAdd=function(e){if(e instanceof a)void 0===e.extend||e.extensionField||f(0,e)||this.deferred.push(e);else if(e instanceof l)d.test(e.name)&&(e.parent[e.name]=e.values);else if(!(e instanceof u)){if(e instanceof r)for(var t=0;t<this.deferred.length;)f(0,this.deferred[t])?this.deferred.splice(t,1):++t;for(var n=0;n<e.nestedArray.length;++n)this._handleAdd(e._nestedArray[n]);d.test(e.name)&&(e.parent[e.name]=e)}},h.prototype._handleRemove=function(e){if(e instanceof a){if(void 0!==e.extend)if(e.extensionField)e.extensionField.parent.remove(e.extensionField),e.extensionField=null;else{var t=this.deferred.indexOf(e);t>-1&&this.deferred.splice(t,1)}}else if(e instanceof l)d.test(e.name)&&delete e.parent[e.name];else if(e instanceof i){for(var n=0;n<e.nestedArray.length;++n)this._handleRemove(e._nestedArray[n]);d.test(e.name)&&delete e.parent[e.name]}},h._configure=function(e,t,n){r=e,o=t,s=n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e=0,t=0){this.high=e,this.low=t}destroy(){}equal(e){return null!==e&&this.low===e.low&&this.high===e.high}toString64(){let e=Number(this.high).toString(16),t=Number(this.low).toString(16);if(t.length<8){let e=8-t.length;for(;e;)t="0"+t,e--}return e+t}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.version=1575294693},function(e,t,n){"use strict";var i=t;i.length=function(e){for(var t=0,n=0,i=0;i<e.length;++i)(n=e.charCodeAt(i))<128?t+=1:n<2048?t+=2:55296==(64512&n)&&56320==(64512&e.charCodeAt(i+1))?(++i,t+=4):t+=3;return t},i.read=function(e,t,n){if(n-t<1)return"";for(var i,r=null,o=[],s=0;t<n;)(i=e[t++])<128?o[s++]=i:i>191&&i<224?o[s++]=(31&i)<<6|63&e[t++]:i>239&&i<365?(i=((7&i)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,o[s++]=55296+(i>>10),o[s++]=56320+(1023&i)):o[s++]=(15&i)<<12|(63&e[t++])<<6|63&e[t++],s>8191&&((r||(r=[])).push(String.fromCharCode.apply(String,o)),s=0);return r?(s&&r.push(String.fromCharCode.apply(String,o.slice(0,s))),r.join("")):String.fromCharCode.apply(String,o.slice(0,s))},i.write=function(e,t,n){for(var i,r,o=n,s=0;s<e.length;++s)(i=e.charCodeAt(s))<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&56320==(64512&(r=e.charCodeAt(s+1)))?(i=65536+((1023&i)<<10)+(1023&r),++s,t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128);return n-o}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(8);t.default=class{constructor(e,t=!1){this.linkHandler=e,this.ws=null,this.connected=!1,this.bMiniProgram=t}destroy(){this.linkHandler=null,this.reset()}connect(e){this.reset(),this.bMiniProgram?(this.ws=wx.connectSocket({url:e}),wx.onSocketOpen(e=>{i.default.log("ProtoLink.onopen"),this.connected=!0,this.linkHandler&&this.linkHandler.onopen()}),wx.onSocketClose(e=>{i.default.log("ProtoLink.onclose "+JSON.stringify(e)),this.connected=!1,this.ws=null,this.linkHandler&&(this.linkHandler.onclose(),this.linkHandler=null)}),wx.onSocketError(e=>{i.default.log("ProtoLink.onerror event="+JSON.stringify(e)),this.connected=!1,this.ws=null,this.linkHandler&&(this.linkHandler.onerror(e),this.linkHandler=null)}),wx.onSocketMessage(e=>{e.data instanceof ArrayBuffer?this.processArrayBuffer(e.data):this.processText(e.data)})):(this.ws=new WebSocket(e),this.ws.binaryType="arraybuffer",this.ws.onopen=this.onopen.bind(this),this.ws.onerror=this.onerror.bind(this),this.ws.onclose=this.onclose.bind(this),this.ws.onmessage=this.onmessage.bind(this))}reset(){this.ws&&(this.connected=!1,this.bMiniProgram?wx.closeSocket():(this.ws.onopen=null,this.ws.onerror=null,this.ws.onclose=null,this.ws.onmessage=null,this.ws.close()),this.ws=null)}send(e){this.ws&&this.connected&&(this.bMiniProgram?wx.sendSocketMessage({data:e.buffer,fail:function(e){i.default.error("ProtoLink.send wx sendSocketMessage failed err="+JSON.stringify(e))}}):this.ws.send(e))}onopen(){this.connected=!0,this.linkHandler&&this.linkHandler.onopen()}onerror(e){this.connected=!1,this.ws=null,this.linkHandler&&(this.linkHandler.onerror(e),this.linkHandler=null)}onclose(){this.connected=!1,this.ws=null,this.linkHandler&&(this.linkHandler.onclose(),this.linkHandler=null)}onmessage(e){e.data instanceof ArrayBuffer?this.processArrayBuffer(e.data):this.processText(e.data)}processText(e){i.default.log("ProtoLink.processText data="+e)}processArrayBuffer(e){let t=new DataView(e),n=0,r=0,o=0;for(;n+10<e.byteLength;){if(n+(r=t.getUint32(n,!0))>e.byteLength||r<10)return void i.default.error("ProtoLink.processArrayBuffer length error pktLen="+r+" bufferLen="+e.byteLength);o=t.getUint32(n+4,!0);let s=new DataView(e,n,r);this.linkHandler&&this.linkHandler.onData(o,s),n+=r}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1);t.default=class{static encodeUCS2(e){let t=[],n=e.length;for(let i=0;i<n;i++)t.push(e.charCodeAt(i));let i=Uint16Array.from(t);return new Uint8Array(i.buffer)}static decodeUCS2(e){let t=i.default.payload2DataView(e);e=null;let n=0,r=[];for(;n+2<=t.byteLength;)r.push(t.getUint16(n,!0)),n+=2;let o=r.length,s="";for(let e=0;e<o;e++)s+=String.fromCharCode(r[e]);return s}static encodeUtf8(e){let t=[],n=0,i=e.length;for(let r=0;r<i;r++){let i=e.charCodeAt(r);0<=i&&i<=127?(n+=1,t.push(i)):128<=i&&i<=2047?(n+=2,t.push(192|31&i>>6),t.push(128|63&i)):2048<=i&&i<=65535?(n+=3,t.push(224|15&i>>12),t.push(128|63&i>>6),t.push(128|63&i)):65536<=i&&i<=2097151?(n+=4,t.push(240|7&i>>18),t.push(128|63&i>>12),t.push(128|63&i>>6),t.push(128|63&i)):2097152<=i&&i<=67108863?(n+=5,t.push(248|3&i>>24),t.push(128|63&i>>18),t.push(128|63&i>>12),t.push(128|63&i>>6),t.push(128|63&i)):67108864<=i&&i<=2147483647&&(n+=6,t.push(252|1&i>>30),t.push(128|63&i>>24),t.push(128|63&i>>18),t.push(128|63&i>>12),t.push(128|63&i>>6),t.push(128|63&i))}let r=t.length;for(let e=0;e<r;e++)t[e]&=255;return Uint8Array.from(t)}static decodeUtf8(e){let t="",n=e.byteLength;for(let i=0;i<n;i++){let n=e[i].toString(2),r=n.match(/^1+?(?=0)/);if(r&&8==n.length){let n=r[0].length,o=e[i].toString(2).slice(n+1);for(let t=1;t<n;t++)o+=e[t+i].toString(2).slice(2);t+=String.fromCodePoint(parseInt(o,2)),i+=n-1}else t+=String.fromCharCode(e[i])}return t}static sizeof(e){for(var t=0,n=0;n<e.length;++n){var i=e.charCodeAt(n);if(i>=55296&&i<=56319&&n+1<e.length){var r=e.charCodeAt(n+1);if(r>=56320&&r<=57343){++n,t+=4;continue}}t+=i<=127?1:i<=2047?2:3}return t}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={INIT:"init",CONNECTING:"connecting",CONNECTED:"connected",CLOSING:"closing",CLOSED:"closed"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(8),r=n(14),o=n(1),s=n(61);t.default=class{static genUrl(e,t="ystrpc",n="ylog.hiido.com"){let i="https://"+n+"/c.gif?",o=r.default.utc(),a=t+o+"HiidoYYSystem",l=i+"act="+t+"&time="+o+"&key="+(a=s(a));for(let[t,n]of e)l+="&"+t+"="+n;return l}static sendUrl(e,t){if(i.default.log("HiidoUtil.sendUrl url:"+e),t){let t=e.indexOf("?"),n=e.slice(0,t),i=e.slice(t+1).split("&"),r=i.length,s={};for(let e=0;e<r;e++)t=i[e].indexOf("="),s[i[e].slice(0,t)]=i[e].slice(t+1);o.default.yFetch({url:n,data:s})}else(new Image).src=e}}},function(e,t){var n,i,r=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(e){i=s}}();var l,u=[],c=!1,h=-1;function p(){c&&l&&(c=!1,l.length?u=l.concat(u):h=-1,u.length&&d())}function d(){if(!c){var e=a(p);c=!0;for(var t=u.length;t;){for(l=u,u=[];++h<t;)l&&l[h].run();h=-1,t=u.length}l=null,c=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function g(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new f(e,t)),1!==u.length||c||a(d)},f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=g,r.addListener=g,r.once=g,r.off=g,r.removeListener=g,r.removeAllListeners=g,r.emit=g,r.prependListener=g,r.prependOnceListener=g,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(e,t,n){var i=n(71),r=n(72),o=r;o.v1=i,o.v4=r,e.exports=o},function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var i=new Uint8Array(16);e.exports=function(){return n(i),i}}else{var r=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),r[t]=e>>>((3&t)<<3)&255;return r}}},function(e,t){for(var n=[],i=0;i<256;++i)n[i]=(i+256).toString(16).substr(1);e.exports=function(e,t){var i=t||0,r=n;return[r[e[i++]],r[e[i++]],r[e[i++]],r[e[i++]],"-",r[e[i++]],r[e[i++]],"-",r[e[i++]],r[e[i++]],"-",r[e[i++]],r[e[i++]],"-",r[e[i++]],r[e[i++]],r[e[i++]],r[e[i++]],r[e[i++]],r[e[i++]]].join("")}},function(e,t,n){"use strict";var i,r,o,s=n(75),a=s.Reader,l=s.Writer,u=s.util,c=s.roots.default||(s.roots.default={});c.proto=((o={}).Action=(i={},(r=Object.create(i))[i[0]="kLogin"]=0,r[i[3e3]="kP2PChat"]=3e3,r[i[1e6]="kNotifySignalMessage"]=1e6,r[i[1000001]="kNotifyJoinSignalGroup"]=1000001,r[i[1000002]="kNotifyLeaveSignalGroup"]=1000002,r[i[1000003]="kNotifyUinfoChange"]=1000003,r[i[1000004]="kNotifyUserOnlineStatusChange"]=1000004,r),o.GetMaxSeqIdRequest=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.logId=u.Long?u.Long.fromBits(0,0,!1):0,e.prototype.appId=u.Long?u.Long.fromBits(0,0,!1):0,e.prototype.selfUid=u.Long?u.Long.fromBits(0,0,!1):0,e.prototype.topic="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=l.create()),null!=e.logId&&e.hasOwnProperty("logId")&&t.uint32(8).int64(e.logId),null!=e.appId&&e.hasOwnProperty("appId")&&t.uint32(16).int64(e.appId),null!=e.selfUid&&e.hasOwnProperty("selfUid")&&t.uint32(24).int64(e.selfUid),null!=e.topic&&e.hasOwnProperty("topic")&&t.uint32(34).string(e.topic),t},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n=void 0===t?e.len:e.pos+t,i=new c.proto.GetMaxSeqIdRequest;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:i.logId=e.int64();break;case 2:i.appId=e.int64();break;case 3:i.selfUid=e.int64();break;case 4:i.topic=e.string();break;default:e.skipType(7&r)}}return i},e}(),o.GetMaxSeqIdResponse=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.logId=u.Long?u.Long.fromBits(0,0,!1):0,e.prototype.code=0,e.prototype.msg="",e.prototype.maxSeqId=u.Long?u.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=l.create()),null!=e.logId&&e.hasOwnProperty("logId")&&t.uint32(8).int64(e.logId),null!=e.code&&e.hasOwnProperty("code")&&t.uint32(16).int32(e.code),null!=e.msg&&e.hasOwnProperty("msg")&&t.uint32(26).string(e.msg),null!=e.maxSeqId&&e.hasOwnProperty("maxSeqId")&&t.uint32(32).int64(e.maxSeqId),t},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n=void 0===t?e.len:e.pos+t,i=new c.proto.GetMaxSeqIdResponse;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:i.logId=e.int64();break;case 2:i.code=e.int32();break;case 3:i.msg=e.string();break;case 4:i.maxSeqId=e.int64();break;default:e.skipType(7&r)}}return i},e}(),o.GetGrpSysMaxSeqIdRequest=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.logId=u.Long?u.Long.fromBits(0,0,!1):0,e.prototype.appId=u.Long?u.Long.fromBits(0,0,!1):0,e.prototype.selfUid=u.Long?u.Long.fromBits(0,0,!1):0,e.prototype.groupId=u.Long?u.Long.fromBits(0,0,!1):0,e.prototype.topic="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=l.create()),null!=e.logId&&e.hasOwnProperty("logId")&&t.uint32(8).int64(e.logId),null!=e.appId&&e.hasOwnProperty("appId")&&t.uint32(16).int64(e.appId),null!=e.selfUid&&e.hasOwnProperty("selfUid")&&t.uint32(24).int64(e.selfUid),null!=e.groupId&&e.hasOwnProperty("groupId")&&t.uint32(32).int64(e.groupId),null!=e.topic&&e.hasOwnProperty("topic")&&t.uint32(42).string(e.topic),t},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n=void 0===t?e.len:e.pos+t,i=new c.proto.GetGrpSysMaxSeqIdRequest;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:i.logId=e.int64();break;case 2:i.appId=e.int64();break;case 3:i.selfUid=e.int64();break;case 4:i.groupId=e.int64();break;case 5:i.topic=e.string();break;default:e.skipType(7&r)}}return i},e}(),o.GetGrpSysMaxSeqIdResponse=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.logId=u.Long?u.Long.fromBits(0,0,!1):0,e.prototype.code=0,e.prototype.msg="",e.prototype.maxSeqId=u.Long?u.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=l.create()),null!=e.logId&&e.hasOwnProperty("logId")&&t.uint32(8).int64(e.logId),null!=e.code&&e.hasOwnProperty("code")&&t.uint32(16).int32(e.code),null!=e.msg&&e.hasOwnProperty("msg")&&t.uint32(26).string(e.msg),null!=e.maxSeqId&&e.hasOwnProperty("maxSeqId")&&t.uint32(32).int64(e.maxSeqId),t},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n=void 0===t?e.len:e.pos+t,i=new c.proto.GetGrpSysMaxSeqIdResponse;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:i.logId=e.int64();break;case 2:i.code=e.int32();break;case 3:i.msg=e.string();break;case 4:i.maxSeqId=e.int64();break;default:e.skipType(7&r)}}return i},e}(),o.IMPushMsgRequest=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.logId=u.Long?u.Long.fromBits(0,0,!1):0,e.prototype.uid=u.Long?u.Long.fromBits(0,0,!1):0,e.prototype.seqId=u.Long?u.Long.fromBits(0,0,!1):0,e.prototype.groupId=u.Long?u.Long.fromBits(0,0,!1):0,e.prototype.region="",e.prototype.envType="",e.prototype.envName="",e.prototype.topic="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=l.create()),null!=e.logId&&e.hasOwnProperty("logId")&&t.uint32(8).int64(e.logId),null!=e.uid&&e.hasOwnProperty("uid")&&t.uint32(16).int64(e.uid),null!=e.seqId&&e.hasOwnProperty("seqId")&&t.uint32(24).int64(e.seqId),null!=e.groupId&&e.hasOwnProperty("groupId")&&t.uint32(32).int64(e.groupId),null!=e.region&&e.hasOwnProperty("region")&&t.uint32(42).string(e.region),null!=e.envType&&e.hasOwnProperty("envType")&&t.uint32(50).string(e.envType),null!=e.envName&&e.hasOwnProperty("envName")&&t.uint32(58).string(e.envName),null!=e.topic&&e.hasOwnProperty("topic")&&t.uint32(66).string(e.topic),t},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n=void 0===t?e.len:e.pos+t,i=new c.proto.IMPushMsgRequest;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:i.logId=e.int64();break;case 2:i.uid=e.int64();break;case 3:i.seqId=e.int64();break;case 4:i.groupId=e.int64();break;case 5:i.region=e.string();break;case 6:i.envType=e.string();break;case 7:i.envName=e.string();break;case 8:i.topic=e.string();break;default:e.skipType(7&r)}}return i},e}(),o.IMPushMsgResponse=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.logId=u.Long?u.Long.fromBits(0,0,!1):0,e.prototype.code=0,e.prototype.msg="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=l.create()),null!=e.logId&&e.hasOwnProperty("logId")&&t.uint32(8).int64(e.logId),null!=e.code&&e.hasOwnProperty("code")&&t.uint32(16).int32(e.code),null!=e.msg&&e.hasOwnProperty("msg")&&t.uint32(26).string(e.msg),t},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n=void 0===t?e.len:e.pos+t,i=new c.proto.IMPushMsgResponse;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:i.logId=e.int64();break;case 2:i.code=e.int32();break;case 3:i.msg=e.string();break;default:e.skipType(7&r)}}return i},e}(),o.IMPushGroupSysMsgRequest=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.logId=u.Long?u.Long.fromBits(0,0,!1):0,e.prototype.groupId=u.Long?u.Long.fromBits(0,0,!1):0,e.prototype.seqId=u.Long?u.Long.fromBits(0,0,!1):0,e.prototype.region="",e.prototype.envType="",e.prototype.envName="",e.prototype.topic="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=l.create()),null!=e.logId&&e.hasOwnProperty("logId")&&t.uint32(8).int64(e.logId),null!=e.groupId&&e.hasOwnProperty("groupId")&&t.uint32(16).int64(e.groupId),null!=e.seqId&&e.hasOwnProperty("seqId")&&t.uint32(24).int64(e.seqId),null!=e.region&&e.hasOwnProperty("region")&&t.uint32(34).string(e.region),null!=e.envType&&e.hasOwnProperty("envType")&&t.uint32(42).string(e.envType),null!=e.envName&&e.hasOwnProperty("envName")&&t.uint32(50).string(e.envName),null!=e.topic&&e.hasOwnProperty("topic")&&t.uint32(58).string(e.topic),t},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n=void 0===t?e.len:e.pos+t,i=new c.proto.IMPushGroupSysMsgRequest;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:i.logId=e.int64();break;case 2:i.groupId=e.int64();break;case 3:i.seqId=e.int64();break;case 4:i.region=e.string();break;case 5:i.envType=e.string();break;case 6:i.envName=e.string();break;case 7:i.topic=e.string();break;default:e.skipType(7&r)}}return i},e}(),o.IMPushGroupSysMsgResponse=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.logId=u.Long?u.Long.fromBits(0,0,!1):0,e.prototype.code=0,e.prototype.msg="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=l.create()),null!=e.logId&&e.hasOwnProperty("logId")&&t.uint32(8).int64(e.logId),null!=e.code&&e.hasOwnProperty("code")&&t.uint32(16).int32(e.code),null!=e.msg&&e.hasOwnProperty("msg")&&t.uint32(26).string(e.msg),t},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n=void 0===t?e.len:e.pos+t,i=new c.proto.IMPushGroupSysMsgResponse;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:i.logId=e.int64();break;case 2:i.code=e.int32();break;case 3:i.msg=e.string();break;default:e.skipType(7&r)}}return i},e}(),o.PullMsgRequest=function(){function e(e){if(this.userTags=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.logId=u.Long?u.Long.fromBits(0,0,!1):0,e.prototype.appId=u.Long?u.Long.fromBits(0,0,!1):0,e.prototype.selfUid=u.Long?u.Long.fromBits(0,0,!1):0,e.prototype.exclusiveStartSeqId=u.Long?u.Long.fromBits(0,0,!1):0,e.prototype.limit=0,e.prototype.userTags=u.emptyArray,e.prototype.statisDeliveryDelay=!1,e.prototype.topic="",e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=l.create()),null!=e.logId&&e.hasOwnProperty("logId")&&t.uint32(8).int64(e.logId),null!=e.appId&&e.hasOwnProperty("appId")&&t.uint32(16).int64(e.appId),null!=e.selfUid&&e.hasOwnProperty("selfUid")&&t.uint32(24).int64(e.selfUid),null!=e.exclusiveStartSeqId&&e.hasOwnProperty("exclusiveStartSeqId")&&t.uint32(32).int64(e.exclusiveStartSeqId),null!=e.limit&&e.hasOwnProperty("limit")&&t.uint32(40).int32(e.limit),null!=e.userTags&&e.userTags.length)for(var n=0;n<e.userTags.length;++n)t.uint32(50).string(e.userTags[n]);return null!=e.statisDeliveryDelay&&e.hasOwnProperty("statisDeliveryDelay")&&t.uint32(56).bool(e.statisDeliveryDelay),null!=e.topic&&e.hasOwnProperty("topic")&&t.uint32(66).string(e.topic),t},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n=void 0===t?e.len:e.pos+t,i=new c.proto.PullMsgRequest;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:i.logId=e.int64();break;case 2:i.appId=e.int64();break;case 3:i.selfUid=e.int64();break;case 4:i.exclusiveStartSeqId=e.int64();break;case 5:i.limit=e.int32();break;case 6:i.userTags&&i.userTags.length||(i.userTags=[]),i.userTags.push(e.string());break;case 7:i.statisDeliveryDelay=e.bool();break;case 8:i.topic=e.string();break;default:e.skipType(7&r)}}return i},e}(),o.PullMsgResponse=function(){function e(e){if(this.msgs=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.logId=u.Long?u.Long.fromBits(0,0,!1):0,e.prototype.code=0,e.prototype.msg="",e.prototype.msgs=u.emptyArray,e.prototype.maxSeqId=u.Long?u.Long.fromBits(0,0,!1):0,e.prototype.hasMore=!1,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=l.create()),null!=e.logId&&e.hasOwnProperty("logId")&&t.uint32(8).int64(e.logId),null!=e.code&&e.hasOwnProperty("code")&&t.uint32(16).int32(e.code),null!=e.msg&&e.hasOwnProperty("msg")&&t.uint32(26).string(e.msg),null!=e.msgs&&e.msgs.length)for(var n=0;n<e.msgs.length;++n)c.proto.Msg.encode(e.msgs[n],t.uint32(34).fork()).ldelim();return null!=e.maxSeqId&&e.hasOwnProperty("maxSeqId")&&t.uint32(40).int64(e.maxSeqId),null!=e.hasMore&&e.hasOwnProperty("hasMore")&&t.uint32(48).bool(e.hasMore),t},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n=void 0===t?e.len:e.pos+t,i=new c.proto.PullMsgResponse;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:i.logId=e.int64();break;case 2:i.code=e.int32();break;case 3:i.msg=e.string();break;case 4:i.msgs&&i.msgs.length||(i.msgs=[]),i.msgs.push(c.proto.Msg.decode(e,e.uint32()));break;case 5:i.maxSeqId=e.int64();break;case 6:i.hasMore=e.bool();break;default:e.skipType(7&r)}}return i},e}(),o.PullGroupSysMsgRequest=function(){function e(e){if(this.userTags=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.logId=u.Long?u.Long.fromBits(0,0,!1):0,e.prototype.appId=u.Long?u.Long.fromBits(0,0,!1):0,e.prototype.selfUid=u.Long?u.Long.fromBits(0,0,!1):0,e.prototype.groupId=u.Long?u.Long.fromBits(0,0,!1):0,e.prototype.exclusiveStartSeqId=u.Long?u.Long.fromBits(0,0,!1):0,e.prototype.limit=0,e.prototype.userTags=u.emptyArray,e.prototype.statisDeliveryDelay=!1,e.prototype.topic="",e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=l.create()),null!=e.logId&&e.hasOwnProperty("logId")&&t.uint32(8).int64(e.logId),null!=e.appId&&e.hasOwnProperty("appId")&&t.uint32(16).int64(e.appId),null!=e.selfUid&&e.hasOwnProperty("selfUid")&&t.uint32(24).int64(e.selfUid),null!=e.groupId&&e.hasOwnProperty("groupId")&&t.uint32(32).int64(e.groupId),null!=e.exclusiveStartSeqId&&e.hasOwnProperty("exclusiveStartSeqId")&&t.uint32(40).int64(e.exclusiveStartSeqId),null!=e.limit&&e.hasOwnProperty("limit")&&t.uint32(48).int32(e.limit),null!=e.userTags&&e.userTags.length)for(var n=0;n<e.userTags.length;++n)t.uint32(58).string(e.userTags[n]);return null!=e.statisDeliveryDelay&&e.hasOwnProperty("statisDeliveryDelay")&&t.uint32(64).bool(e.statisDeliveryDelay),null!=e.topic&&e.hasOwnProperty("topic")&&t.uint32(74).string(e.topic),t},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n=void 0===t?e.len:e.pos+t,i=new c.proto.PullGroupSysMsgRequest;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:i.logId=e.int64();break;case 2:i.appId=e.int64();break;case 3:i.selfUid=e.int64();break;case 4:i.groupId=e.int64();break;case 5:i.exclusiveStartSeqId=e.int64();break;case 6:i.limit=e.int32();break;case 7:i.userTags&&i.userTags.length||(i.userTags=[]),i.userTags.push(e.string());break;case 8:i.statisDeliveryDelay=e.bool();break;case 9:i.topic=e.string();break;default:e.skipType(7&r)}}return i},e}(),o.PullGroupSysMsgResponse=function(){function e(e){if(this.msgs=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.logId=u.Long?u.Long.fromBits(0,0,!1):0,e.prototype.code=0,e.prototype.msg="",e.prototype.msgs=u.emptyArray,e.prototype.maxSeqId=u.Long?u.Long.fromBits(0,0,!1):0,e.prototype.hasMore=!1,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=l.create()),null!=e.logId&&e.hasOwnProperty("logId")&&t.uint32(8).int64(e.logId),null!=e.code&&e.hasOwnProperty("code")&&t.uint32(16).int32(e.code),null!=e.msg&&e.hasOwnProperty("msg")&&t.uint32(26).string(e.msg),null!=e.msgs&&e.msgs.length)for(var n=0;n<e.msgs.length;++n)c.proto.Msg.encode(e.msgs[n],t.uint32(34).fork()).ldelim();return null!=e.maxSeqId&&e.hasOwnProperty("maxSeqId")&&t.uint32(40).int64(e.maxSeqId),null!=e.hasMore&&e.hasOwnProperty("hasMore")&&t.uint32(48).bool(e.hasMore),t},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n=void 0===t?e.len:e.pos+t,i=new c.proto.PullGroupSysMsgResponse;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:i.logId=e.int64();break;case 2:i.code=e.int32();break;case 3:i.msg=e.string();break;case 4:i.msgs&&i.msgs.length||(i.msgs=[]),i.msgs.push(c.proto.Msg.decode(e,e.uint32()));break;case 5:i.maxSeqId=e.int64();break;case 6:i.hasMore=e.bool();break;default:e.skipType(7&r)}}return i},e}(),o.NotifyUserStatusChange=function(){function e(e){if(this.joinuids=[],this.leaveuids=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.logId=u.Long?u.Long.fromBits(0,0,!1):0,e.prototype.appId=u.Long?u.Long.fromBits(0,0,!1):0,e.prototype.groupId="",e.prototype.joinuids=u.emptyArray,e.prototype.leaveuids=u.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=l.create()),null!=e.logId&&e.hasOwnProperty("logId")&&t.uint32(8).int64(e.logId),null!=e.appId&&e.hasOwnProperty("appId")&&t.uint32(16).int64(e.appId),null!=e.groupId&&e.hasOwnProperty("groupId")&&t.uint32(26).string(e.groupId),null!=e.joinuids&&e.joinuids.length){t.uint32(34).fork();for(var n=0;n<e.joinuids.length;++n)t.uint64(e.joinuids[n]);t.ldelim()}if(null!=e.leaveuids&&e.leaveuids.length){for(t.uint32(42).fork(),n=0;n<e.leaveuids.length;++n)t.uint64(e.leaveuids[n]);t.ldelim()}return t},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n=void 0===t?e.len:e.pos+t,i=new c.proto.NotifyUserStatusChange;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:i.logId=e.int64();break;case 2:i.appId=e.int64();break;case 3:i.groupId=e.string();break;case 4:if(i.joinuids&&i.joinuids.length||(i.joinuids=[]),2==(7&r))for(var o=e.uint32()+e.pos;e.pos<o;)i.joinuids.push(e.uint64());else i.joinuids.push(e.uint64());break;case 5:if(i.leaveuids&&i.leaveuids.length||(i.leaveuids=[]),2==(7&r))for(o=e.uint32()+e.pos;e.pos<o;)i.leaveuids.push(e.uint64());else i.leaveuids.push(e.uint64());break;default:e.skipType(7&r)}}return i},e}(),o.NotifyJoinSignalGroup=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.logId=u.Long?u.Long.fromBits(0,0,!1):0,e.prototype.appId=u.Long?u.Long.fromBits(0,0,!1):0,e.prototype.uid=u.Long?u.Long.fromBits(0,0,!1):0,e.prototype.groupId="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=l.create()),null!=e.logId&&e.hasOwnProperty("logId")&&t.uint32(8).int64(e.logId),null!=e.appId&&e.hasOwnProperty("appId")&&t.uint32(16).int64(e.appId),null!=e.uid&&e.hasOwnProperty("uid")&&t.uint32(24).int64(e.uid),null!=e.groupId&&e.hasOwnProperty("groupId")&&t.uint32(34).string(e.groupId),t},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n=void 0===t?e.len:e.pos+t,i=new c.proto.NotifyJoinSignalGroup;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:i.logId=e.int64();break;case 2:i.appId=e.int64();break;case 3:i.uid=e.int64();break;case 4:i.groupId=e.string();break;default:e.skipType(7&r)}}return i},e}(),o.NotifyLeaveSignalGroup=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.logId=u.Long?u.Long.fromBits(0,0,!1):0,e.prototype.appId=u.Long?u.Long.fromBits(0,0,!1):0,e.prototype.uid=u.Long?u.Long.fromBits(0,0,!1):0,e.prototype.groupId="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=l.create()),null!=e.logId&&e.hasOwnProperty("logId")&&t.uint32(8).int64(e.logId),null!=e.appId&&e.hasOwnProperty("appId")&&t.uint32(16).int64(e.appId),null!=e.uid&&e.hasOwnProperty("uid")&&t.uint32(24).int64(e.uid),null!=e.groupId&&e.hasOwnProperty("groupId")&&t.uint32(34).string(e.groupId),t},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n=void 0===t?e.len:e.pos+t,i=new c.proto.NotifyLeaveSignalGroup;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:i.logId=e.int64();break;case 2:i.appId=e.int64();break;case 3:i.uid=e.int64();break;case 4:i.groupId=e.string();break;default:e.skipType(7&r)}}return i},e}(),o.Msg=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seqId=u.Long?u.Long.fromBits(0,0,!1):0,e.prototype.action=0,e.prototype.content=u.newBuffer([]),e.prototype.timestamp=u.Long?u.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=l.create()),null!=e.seqId&&e.hasOwnProperty("seqId")&&t.uint32(8).int64(e.seqId),null!=e.action&&e.hasOwnProperty("action")&&t.uint32(16).int32(e.action),null!=e.content&&e.hasOwnProperty("content")&&t.uint32(26).bytes(e.content),null!=e.timestamp&&e.hasOwnProperty("timestamp")&&t.uint32(32).int64(e.timestamp),t},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n=void 0===t?e.len:e.pos+t,i=new c.proto.Msg;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:i.seqId=e.int64();break;case 2:i.action=e.int32();break;case 3:i.content=e.bytes();break;case 4:i.timestamp=e.int64();break;default:e.skipType(7&r)}}return i},e}(),o.SignalMessageOption=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.reliable="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=l.create()),null!=e.reliable&&e.hasOwnProperty("reliable")&&t.uint32(10).string(e.reliable),t},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n=void 0===t?e.len:e.pos+t,i=new c.proto.SignalMessageOption;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:i.reliable=e.string();break;default:e.skipType(7&r)}}return i},e}(),o.P2PSignalRequest=function(){function e(e){if(this.extensions={},e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.logId=u.Long?u.Long.fromBits(0,0,!1):0,e.prototype.appId=u.Long?u.Long.fromBits(0,0,!1):0,e.prototype.fromUid=u.Long?u.Long.fromBits(0,0,!1):0,e.prototype.toUid=u.Long?u.Long.fromBits(0,0,!1):0,e.prototype.type="",e.prototype.content=u.newBuffer([]),e.prototype.option=null,e.prototype.uuid="",e.prototype.extension="",e.prototype.extensions=u.emptyObject,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=l.create()),null!=e.logId&&e.hasOwnProperty("logId")&&t.uint32(8).int64(e.logId),null!=e.appId&&e.hasOwnProperty("appId")&&t.uint32(16).int64(e.appId),null!=e.fromUid&&e.hasOwnProperty("fromUid")&&t.uint32(24).int64(e.fromUid),null!=e.toUid&&e.hasOwnProperty("toUid")&&t.uint32(32).int64(e.toUid),null!=e.type&&e.hasOwnProperty("type")&&t.uint32(42).string(e.type),null!=e.content&&e.hasOwnProperty("content")&&t.uint32(50).bytes(e.content),null!=e.option&&e.hasOwnProperty("option")&&c.proto.SignalMessageOption.encode(e.option,t.uint32(58).fork()).ldelim(),null!=e.uuid&&e.hasOwnProperty("uuid")&&t.uint32(66).string(e.uuid),null!=e.extension&&e.hasOwnProperty("extension")&&t.uint32(74).string(e.extension),null!=e.extensions&&e.hasOwnProperty("extensions"))for(var n=Object.keys(e.extensions),i=0;i<n.length;++i)t.uint32(82).fork().uint32(10).string(n[i]).uint32(18).string(e.extensions[n[i]]).ldelim();return t},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n,i=void 0===t?e.len:e.pos+t,r=new c.proto.P2PSignalRequest;e.pos<i;){var o=e.uint32();switch(o>>>3){case 1:r.logId=e.int64();break;case 2:r.appId=e.int64();break;case 3:r.fromUid=e.int64();break;case 4:r.toUid=e.int64();break;case 5:r.type=e.string();break;case 6:r.content=e.bytes();break;case 7:r.option=c.proto.SignalMessageOption.decode(e,e.uint32());break;case 8:r.uuid=e.string();break;case 9:r.extension=e.string();break;case 10:e.skip().pos++,r.extensions===u.emptyObject&&(r.extensions={}),n=e.string(),e.pos++,r.extensions[n]=e.string();break;default:e.skipType(7&o)}}return r},e}(),o.P2PSignalResponse=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.code=0,e.prototype.msg="",e.prototype.timestamp=u.Long?u.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=l.create()),null!=e.code&&e.hasOwnProperty("code")&&t.uint32(8).int32(e.code),null!=e.msg&&e.hasOwnProperty("msg")&&t.uint32(18).string(e.msg),null!=e.timestamp&&e.hasOwnProperty("timestamp")&&t.uint32(24).int64(e.timestamp),t},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n=void 0===t?e.len:e.pos+t,i=new c.proto.P2PSignalResponse;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:i.code=e.int32();break;case 2:i.msg=e.string();break;case 3:i.timestamp=e.int64();break;default:e.skipType(7&r)}}return i},e}(),o.SignalMessage=function(){function e(e){if(this.extensions={},e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.logId=u.Long?u.Long.fromBits(0,0,!1):0,e.prototype.appId=u.Long?u.Long.fromBits(0,0,!1):0,e.prototype.fromUid=u.Long?u.Long.fromBits(0,0,!1):0,e.prototype.type="",e.prototype.content=u.newBuffer([]),e.prototype.uuid="",e.prototype.extension="",e.prototype.extensions=u.emptyObject,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=l.create()),null!=e.logId&&e.hasOwnProperty("logId")&&t.uint32(8).int64(e.logId),null!=e.appId&&e.hasOwnProperty("appId")&&t.uint32(16).int64(e.appId),null!=e.fromUid&&e.hasOwnProperty("fromUid")&&t.uint32(24).int64(e.fromUid),null!=e.type&&e.hasOwnProperty("type")&&t.uint32(34).string(e.type),null!=e.content&&e.hasOwnProperty("content")&&t.uint32(42).bytes(e.content),null!=e.uuid&&e.hasOwnProperty("uuid")&&t.uint32(50).string(e.uuid),null!=e.extension&&e.hasOwnProperty("extension")&&t.uint32(58).string(e.extension),null!=e.extensions&&e.hasOwnProperty("extensions"))for(var n=Object.keys(e.extensions),i=0;i<n.length;++i)t.uint32(66).fork().uint32(10).string(n[i]).uint32(18).string(e.extensions[n[i]]).ldelim();return t},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n,i=void 0===t?e.len:e.pos+t,r=new c.proto.SignalMessage;e.pos<i;){var o=e.uint32();switch(o>>>3){case 1:r.logId=e.int64();break;case 2:r.appId=e.int64();break;case 3:r.fromUid=e.int64();break;case 4:r.type=e.string();break;case 5:r.content=e.bytes();break;case 6:r.uuid=e.string();break;case 7:r.extension=e.string();break;case 8:e.skip().pos++,r.extensions===u.emptyObject&&(r.extensions={}),n=e.string(),e.pos++,r.extensions[n]=e.string();break;default:e.skipType(7&o)}}return r},e}(),o.GroupSignalRequest=function(){function e(e){if(this.extensions={},e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.logId=u.Long?u.Long.fromBits(0,0,!1):0,e.prototype.appId=u.Long?u.Long.fromBits(0,0,!1):0,e.prototype.fromUid=u.Long?u.Long.fromBits(0,0,!1):0,e.prototype.groupId=u.Long?u.Long.fromBits(0,0,!1):0,e.prototype.topic="",e.prototype.type="",e.prototype.content=u.newBuffer([]),e.prototype.option=null,e.prototype.uuid="",e.prototype.extension="",e.prototype.extensions=u.emptyObject,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=l.create()),null!=e.logId&&e.hasOwnProperty("logId")&&t.uint32(8).int64(e.logId),null!=e.appId&&e.hasOwnProperty("appId")&&t.uint32(16).int64(e.appId),null!=e.fromUid&&e.hasOwnProperty("fromUid")&&t.uint32(24).int64(e.fromUid),null!=e.groupId&&e.hasOwnProperty("groupId")&&t.uint32(32).int64(e.groupId),null!=e.topic&&e.hasOwnProperty("topic")&&t.uint32(42).string(e.topic),null!=e.type&&e.hasOwnProperty("type")&&t.uint32(50).string(e.type),null!=e.content&&e.hasOwnProperty("content")&&t.uint32(58).bytes(e.content),null!=e.option&&e.hasOwnProperty("option")&&c.proto.SignalMessageOption.encode(e.option,t.uint32(66).fork()).ldelim(),null!=e.uuid&&e.hasOwnProperty("uuid")&&t.uint32(74).string(e.uuid),null!=e.extension&&e.hasOwnProperty("extension")&&t.uint32(82).string(e.extension),null!=e.extensions&&e.hasOwnProperty("extensions"))for(var n=Object.keys(e.extensions),i=0;i<n.length;++i)t.uint32(90).fork().uint32(10).string(n[i]).uint32(18).string(e.extensions[n[i]]).ldelim();return t},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n,i=void 0===t?e.len:e.pos+t,r=new c.proto.GroupSignalRequest;e.pos<i;){var o=e.uint32();switch(o>>>3){case 1:r.logId=e.int64();break;case 2:r.appId=e.int64();break;case 3:r.fromUid=e.int64();break;case 4:r.groupId=e.int64();break;case 5:r.topic=e.string();break;case 6:r.type=e.string();break;case 7:r.content=e.bytes();break;case 8:r.option=c.proto.SignalMessageOption.decode(e,e.uint32());break;case 9:r.uuid=e.string();break;case 10:r.extension=e.string();break;case 11:e.skip().pos++,r.extensions===u.emptyObject&&(r.extensions={}),n=e.string(),e.pos++,r.extensions[n]=e.string();break;default:e.skipType(7&o)}}return r},e}(),o.GroupSignalResponse=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.code=0,e.prototype.msg="",e.prototype.timestamp=u.Long?u.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=l.create()),null!=e.code&&e.hasOwnProperty("code")&&t.uint32(8).int32(e.code),null!=e.msg&&e.hasOwnProperty("msg")&&t.uint32(18).string(e.msg),null!=e.timestamp&&e.hasOwnProperty("timestamp")&&t.uint32(24).int64(e.timestamp),t},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n=void 0===t?e.len:e.pos+t,i=new c.proto.GroupSignalResponse;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:i.code=e.int32();break;case 2:i.msg=e.string();break;case 3:i.timestamp=e.int64();break;default:e.skipType(7&r)}}return i},e}(),o.CheckUserIsOnlineRequest=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.logId=u.Long?u.Long.fromBits(0,0,!1):0,e.prototype.appId=u.Long?u.Long.fromBits(0,0,!1):0,e.prototype.selfUid=u.Long?u.Long.fromBits(0,0,!1):0,e.prototype.uid=u.Long?u.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=l.create()),null!=e.logId&&e.hasOwnProperty("logId")&&t.uint32(8).int64(e.logId),null!=e.appId&&e.hasOwnProperty("appId")&&t.uint32(16).int64(e.appId),null!=e.selfUid&&e.hasOwnProperty("selfUid")&&t.uint32(24).int64(e.selfUid),null!=e.uid&&e.hasOwnProperty("uid")&&t.uint32(32).int64(e.uid),t},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n=void 0===t?e.len:e.pos+t,i=new c.proto.CheckUserIsOnlineRequest;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:i.logId=e.int64();break;case 2:i.appId=e.int64();break;case 3:i.selfUid=e.int64();break;case 4:i.uid=e.int64();break;default:e.skipType(7&r)}}return i},e}(),o.CheckUserIsOnlineResponse=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.code=0,e.prototype.msg="",e.prototype.isOnline=!1,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=l.create()),null!=e.code&&e.hasOwnProperty("code")&&t.uint32(8).int32(e.code),null!=e.msg&&e.hasOwnProperty("msg")&&t.uint32(18).string(e.msg),null!=e.isOnline&&e.hasOwnProperty("isOnline")&&t.uint32(24).bool(e.isOnline),t},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n=void 0===t?e.len:e.pos+t,i=new c.proto.CheckUserIsOnlineResponse;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:i.code=e.int32();break;case 2:i.msg=e.string();break;case 3:i.isOnline=e.bool();break;default:e.skipType(7&r)}}return i},e}(),o.UnreliableMsg=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.action=0,e.prototype.content=u.newBuffer([]),e.prototype.timestamp=u.Long?u.Long.fromBits(0,0,!1):0,e.prototype.uri="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=l.create()),null!=e.action&&e.hasOwnProperty("action")&&t.uint32(8).int32(e.action),null!=e.content&&e.hasOwnProperty("content")&&t.uint32(18).bytes(e.content),null!=e.timestamp&&e.hasOwnProperty("timestamp")&&t.uint32(24).int64(e.timestamp),null!=e.uri&&e.hasOwnProperty("uri")&&t.uint32(34).string(e.uri),t},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n=void 0===t?e.len:e.pos+t,i=new c.proto.UnreliableMsg;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:i.action=e.int32();break;case 2:i.content=e.bytes();break;case 3:i.timestamp=e.int64();break;case 4:i.uri=e.string();break;default:e.skipType(7&r)}}return i},e}(),o.UnreliableIMPushMsgRequest=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.logId=u.Long?u.Long.fromBits(0,0,!1):0,e.prototype.region="",e.prototype.envType="",e.prototype.envName="",e.prototype.msg=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=l.create()),null!=e.logId&&e.hasOwnProperty("logId")&&t.uint32(8).int64(e.logId),null!=e.region&&e.hasOwnProperty("region")&&t.uint32(18).string(e.region),null!=e.envType&&e.hasOwnProperty("envType")&&t.uint32(26).string(e.envType),null!=e.envName&&e.hasOwnProperty("envName")&&t.uint32(34).string(e.envName),null!=e.msg&&e.hasOwnProperty("msg")&&c.proto.UnreliableMsg.encode(e.msg,t.uint32(42).fork()).ldelim(),t},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n=void 0===t?e.len:e.pos+t,i=new c.proto.UnreliableIMPushMsgRequest;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:i.logId=e.int64();break;case 2:i.region=e.string();break;case 3:i.envType=e.string();break;case 4:i.envName=e.string();break;case 5:i.msg=c.proto.UnreliableMsg.decode(e,e.uint32());break;default:e.skipType(7&r)}}return i},e}(),o.UnreliableIMPushMsgResponse=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.logId=u.Long?u.Long.fromBits(0,0,!1):0,e.prototype.code=0,e.prototype.msg="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=l.create()),null!=e.logId&&e.hasOwnProperty("logId")&&t.uint32(8).int64(e.logId),null!=e.code&&e.hasOwnProperty("code")&&t.uint32(16).int32(e.code),null!=e.msg&&e.hasOwnProperty("msg")&&t.uint32(26).string(e.msg),t},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n=void 0===t?e.len:e.pos+t,i=new c.proto.UnreliableIMPushMsgResponse;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:i.logId=e.int64();break;case 2:i.code=e.int32();break;case 3:i.msg=e.string();break;default:e.skipType(7&r)}}return i},e}(),o.UnreliableIMPushGroupSysMsgRequest=function(){function e(e){if(this.targetUserTags=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.logId=u.Long?u.Long.fromBits(0,0,!1):0,e.prototype.groupId=u.Long?u.Long.fromBits(0,0,!1):0,e.prototype.topic="",e.prototype.region="",e.prototype.envType="",e.prototype.envName="",e.prototype.msg=null,e.prototype.targetUserTags=u.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=l.create()),null!=e.logId&&e.hasOwnProperty("logId")&&t.uint32(8).int64(e.logId),null!=e.groupId&&e.hasOwnProperty("groupId")&&t.uint32(16).int64(e.groupId),null!=e.topic&&e.hasOwnProperty("topic")&&t.uint32(26).string(e.topic),null!=e.region&&e.hasOwnProperty("region")&&t.uint32(34).string(e.region),null!=e.envType&&e.hasOwnProperty("envType")&&t.uint32(42).string(e.envType),null!=e.envName&&e.hasOwnProperty("envName")&&t.uint32(50).string(e.envName),null!=e.msg&&e.hasOwnProperty("msg")&&c.proto.UnreliableMsg.encode(e.msg,t.uint32(58).fork()).ldelim(),null!=e.targetUserTags&&e.targetUserTags.length)for(var n=0;n<e.targetUserTags.length;++n)t.uint32(66).string(e.targetUserTags[n]);return t},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n=void 0===t?e.len:e.pos+t,i=new c.proto.UnreliableIMPushGroupSysMsgRequest;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:i.logId=e.int64();break;case 2:i.groupId=e.int64();break;case 3:i.topic=e.string();break;case 4:i.region=e.string();break;case 5:i.envType=e.string();break;case 6:i.envName=e.string();break;case 7:i.msg=c.proto.UnreliableMsg.decode(e,e.uint32());break;case 8:i.targetUserTags&&i.targetUserTags.length||(i.targetUserTags=[]),i.targetUserTags.push(e.string());break;default:e.skipType(7&r)}}return i},e}(),o.UnreliableIMPushGroupSysMsgResponse=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.logId=u.Long?u.Long.fromBits(0,0,!1):0,e.prototype.code=0,e.prototype.msg="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=l.create()),null!=e.logId&&e.hasOwnProperty("logId")&&t.uint32(8).int64(e.logId),null!=e.code&&e.hasOwnProperty("code")&&t.uint32(16).int32(e.code),null!=e.msg&&e.hasOwnProperty("msg")&&t.uint32(26).string(e.msg),t},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n=void 0===t?e.len:e.pos+t,i=new c.proto.UnreliableIMPushGroupSysMsgResponse;e.pos<n;){var r=e.uint32();switch(r>>>3){case 1:i.logId=e.int64();break;case 2:i.code=e.int32();break;case 3:i.msg=e.string();break;default:e.skipType(7&r)}}return i},e}(),o.NotifyUinfoChange=function(){function e(e){if(this.infos={},e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.logId=u.Long?u.Long.fromBits(0,0,!1):0,e.prototype.appId=u.Long?u.Long.fromBits(0,0,!1):0,e.prototype.opType=0,e.prototype.uid=u.Long?u.Long.fromBits(0,0,!1):0,e.prototype.groupId="",e.prototype.timestamp=u.Long?u.Long.fromBits(0,0,!1):0,e.prototype.infos=u.emptyObject,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=l.create()),null!=e.logId&&e.hasOwnProperty("logId")&&t.uint32(8).int64(e.logId),null!=e.appId&&e.hasOwnProperty("appId")&&t.uint32(16).int64(e.appId),null!=e.opType&&e.hasOwnProperty("opType")&&t.uint32(24).int32(e.opType),null!=e.uid&&e.hasOwnProperty("uid")&&t.uint32(32).int64(e.uid),null!=e.groupId&&e.hasOwnProperty("groupId")&&t.uint32(42).string(e.groupId),null!=e.timestamp&&e.hasOwnProperty("timestamp")&&t.uint32(48).int64(e.timestamp),null!=e.infos&&e.hasOwnProperty("infos"))for(var n=Object.keys(e.infos),i=0;i<n.length;++i)t.uint32(58).fork().uint32(10).string(n[i]).uint32(18).string(e.infos[n[i]]).ldelim();return t},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n,i=void 0===t?e.len:e.pos+t,r=new c.proto.NotifyUinfoChange;e.pos<i;){var o=e.uint32();switch(o>>>3){case 1:r.logId=e.int64();break;case 2:r.appId=e.int64();break;case 3:r.opType=e.int32();break;case 4:r.uid=e.int64();break;case 5:r.groupId=e.string();break;case 6:r.timestamp=e.int64();break;case 7:e.skip().pos++,r.infos===u.emptyObject&&(r.infos={}),n=e.string(),e.pos++,r.infos[n]=e.string();break;default:e.skipType(7&o)}}return r},e.OpType=function(){var e={},t=Object.create(e);return t[e[0]="kOpUpdate"]=0,t[e[1]="kOpDel"]=1,t[e[2]="kOpSet"]=2,t}(),e}(),o),e.exports=c},function(e,t,n){"use strict";var i=t;function r(){i.Reader._configure(i.BufferReader),i.util._configure()}i.build="minimal",i.Writer=n(18),i.BufferWriter=n(81),i.Reader=n(19),i.BufferReader=n(82),i.util=n(7),i.rpc=n(41),i.roots=n(42),i.configure=r,i.Writer._configure(i.BufferWriter),r()},function(e,t,n){"use strict";e.exports=function(e,t){var n=new Array(arguments.length-1),i=0,r=2,o=!0;for(;r<arguments.length;)n[i++]=arguments[r++];return new Promise(function(r,s){n[i]=function(e){if(o)if(o=!1,e)s(e);else{for(var t=new Array(arguments.length-1),n=0;n<t.length;)t[n++]=arguments[n];r.apply(null,t)}};try{e.apply(t||null,n)}catch(e){o&&(o=!1,s(e))}})}},function(module,exports,__webpack_require__){"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},function(e,t,n){"use strict";t.Service=n(83)},function(e,t,n){"use strict";e.exports={}},function(e,t,n){"use strict";e.exports=function(e){for(var t,n=o.codegen(["m","w"],e.name+"$encode")("if(!w)")("w=Writer.create()"),a=e.fieldsArray.slice().sort(o.compareFieldsById),l=0;l<a.length;++l){var u=a[l].resolve(),c=e._fieldsArray.indexOf(u),h=u.resolvedType instanceof i?"int32":u.type,p=r.basic[h];t="m"+o.safeProp(u.name),u.map?(n("if(%s!=null&&m.hasOwnProperty(%j)){",t,u.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",t)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(u.id<<3|2)>>>0,8|r.mapKey[u.keyType],u.keyType),void 0===p?n("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",c,t):n(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|p,h,t),n("}")("}")):u.repeated?(n("if(%s!=null&&%s.length){",t,t),u.packed&&void 0!==r.packed[h]?n("w.uint32(%i).fork()",(u.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",t)("w.%s(%s[i])",h,t)("w.ldelim()"):(n("for(var i=0;i<%s.length;++i)",t),void 0===p?s(n,u,c,t+"[i]"):n("w.uint32(%i).%s(%s[i])",(u.id<<3|p)>>>0,h,t)),n("}")):(u.optional&&n("if(%s!=null&&m.hasOwnProperty(%j))",t,u.name),void 0===p?s(n,u,c,t):n("w.uint32(%i).%s(%s)",(u.id<<3|p)>>>0,h,t))}return n("return w")};var i=n(6),r=n(11),o=n(2);function s(e,t,n,i){return t.resolvedType.group?e("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",n,i,(t.id<<3|3)>>>0,(t.id<<3|4)>>>0):e("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",n,i,(t.id<<3|2)>>>0)}},function(e,t,n){"use strict";e.exports=function(e){var t=o.codegen(["r","l"],e.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(e.fieldsArray.filter(function(e){return e.map}).length?",k":""))("while(r.pos<c){")("var t=r.uint32()");e.group&&t("if((t&7)===4)")("break");t("switch(t>>>3){");for(var n=0;n<e.fieldsArray.length;++n){var a=e._fieldsArray[n].resolve(),l=a.resolvedType instanceof i?"int32":a.type,u="m"+o.safeProp(a.name);t("case %i:",a.id),a.map?(t("r.skip().pos++")("if(%s===util.emptyObject)",u)("%s={}",u)("k=r.%s()",a.keyType)("r.pos++"),void 0!==r.long[a.keyType]?void 0===r.basic[l]?t('%s[typeof k==="object"?util.longToHash(k):k]=types[%i].decode(r,r.uint32())',u,n):t('%s[typeof k==="object"?util.longToHash(k):k]=r.%s()',u,l):void 0===r.basic[l]?t("%s[k]=types[%i].decode(r,r.uint32())",u,n):t("%s[k]=r.%s()",u,l)):a.repeated?(t("if(!(%s&&%s.length))",u,u)("%s=[]",u),void 0!==r.packed[l]&&t("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",u,l)("}else"),void 0===r.basic[l]?t(a.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",u,n):t("%s.push(r.%s())",u,l)):void 0===r.basic[l]?t(a.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",u,n):t("%s=r.%s()",u,l),t("break")}for(t("default:")("r.skipType(t&7)")("break")("}")("}"),n=0;n<e._fieldsArray.length;++n){var c=e._fieldsArray[n];c.required&&t("if(!m.hasOwnProperty(%j))",c.name)("throw util.ProtocolError(%j,{instance:m})",s(c))}return t("return m")};var i=n(6),r=n(11),o=n(2);function s(e){return"missing required '"+e.name+"'"}},function(e,t,n){"use strict";e.exports=function(e){var t=r.codegen(["m"],e.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),n=e.oneofsArray,i={};n.length&&t("var p={}");for(var l=0;l<e.fieldsArray.length;++l){var u=e._fieldsArray[l].resolve(),c="m"+r.safeProp(u.name);if(u.optional&&t("if(%s!=null&&m.hasOwnProperty(%j)){",c,u.name),u.map)t("if(!util.isObject(%s))",c)("return%j",o(u,"object"))("var k=Object.keys(%s)",c)("for(var i=0;i<k.length;++i){"),a(t,u,"k[i]"),s(t,u,l,c+"[k[i]]")("}");else if(u.repeated)t("if(!Array.isArray(%s))",c)("return%j",o(u,"array"))("for(var i=0;i<%s.length;++i){",c),s(t,u,l,c+"[i]")("}");else{if(u.partOf){var h=r.safeProp(u.partOf.name);1===i[u.partOf.name]&&t("if(p%s===1)",h)("return%j",u.partOf.name+": multiple values"),i[u.partOf.name]=1,t("p%s=1",h)}s(t,u,l,c)}u.optional&&t("}")}return t("return null")};var i=n(6),r=n(2);function o(e,t){return e.name+": "+t+(e.repeated&&"array"!==t?"[]":e.map&&"object"!==t?"{k:"+e.keyType+"}":"")+" expected"}function s(e,t,n,r){if(t.resolvedType)if(t.resolvedType instanceof i){e("switch(%s){",r)("default:")("return%j",o(t,"enum value"));for(var s=Object.keys(t.resolvedType.values),a=0;a<s.length;++a)e("case %i:",t.resolvedType.values[s[a]]);e("break")("}")}else e("{")("var e=types[%i].verify(%s);",n,r)("if(e)")("return%j+e",t.name+".")("}");else switch(t.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.isInteger(%s))",r)("return%j",o(t,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",r,r,r,r)("return%j",o(t,"integer|Long"));break;case"float":case"double":e('if(typeof %s!=="number")',r)("return%j",o(t,"number"));break;case"bool":e('if(typeof %s!=="boolean")',r)("return%j",o(t,"boolean"));break;case"string":e("if(!util.isString(%s))",r)("return%j",o(t,"string"));break;case"bytes":e('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',r,r,r)("return%j",o(t,"buffer"))}return e}function a(e,t,n){switch(t.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.key32Re.test(%s))",n)("return%j",o(t,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.key64Re.test(%s))",n)("return%j",o(t,"integer|Long key"));break;case"bool":e("if(!util.key2Re.test(%s))",n)("return%j",o(t,"boolean key"))}return e}},function(e,t,n){"use strict";var i=t,r=n(6),o=n(2);function s(e,t,n,i){if(t.resolvedType)if(t.resolvedType instanceof r){e("switch(d%s){",i);for(var o=t.resolvedType.values,s=Object.keys(o),a=0;a<s.length;++a)t.repeated&&o[s[a]]===t.typeDefault&&e("default:"),e("case%j:",s[a])("case %i:",o[s[a]])("m%s=%j",i,o[s[a]])("break");e("}")}else e('if(typeof d%s!=="object")',i)("throw TypeError(%j)",t.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",i,n,i);else{var l=!1;switch(t.type){case"double":case"float":e("m%s=Number(d%s)",i,i);break;case"uint32":case"fixed32":e("m%s=d%s>>>0",i,i);break;case"int32":case"sint32":case"sfixed32":e("m%s=d%s|0",i,i);break;case"uint64":l=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",i,i,l)('else if(typeof d%s==="string")',i)("m%s=parseInt(d%s,10)",i,i)('else if(typeof d%s==="number")',i)("m%s=d%s",i,i)('else if(typeof d%s==="object")',i)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",i,i,i,l?"true":"");break;case"bytes":e('if(typeof d%s==="string")',i)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",i,i,i)("else if(d%s.length)",i)("m%s=d%s",i,i);break;case"string":e("m%s=String(d%s)",i,i);break;case"bool":e("m%s=Boolean(d%s)",i,i)}}return e}function a(e,t,n,i){if(t.resolvedType)t.resolvedType instanceof r?e("d%s=o.enums===String?types[%i].values[m%s]:m%s",i,n,i,i):e("d%s=types[%i].toObject(m%s,o)",i,n,i);else{var o=!1;switch(t.type){case"double":case"float":e("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",i,i,i,i);break;case"uint64":o=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e('if(typeof m%s==="number")',i)("d%s=o.longs===String?String(m%s):m%s",i,i,i)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",i,i,i,i,o?"true":"",i);break;case"bytes":e("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",i,i,i,i,i);break;default:e("d%s=m%s",i,i)}}return e}i.fromObject=function(e){var t=e.fieldsArray,n=o.codegen(["d"],e.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!t.length)return n("return new this.ctor");n("var m=new this.ctor");for(var i=0;i<t.length;++i){var a=t[i].resolve(),l=o.safeProp(a.name);a.map?(n("if(d%s){",l)('if(typeof d%s!=="object")',l)("throw TypeError(%j)",a.fullName+": object expected")("m%s={}",l)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",l),s(n,a,i,l+"[ks[i]]")("}")("}")):a.repeated?(n("if(d%s){",l)("if(!Array.isArray(d%s))",l)("throw TypeError(%j)",a.fullName+": array expected")("m%s=[]",l)("for(var i=0;i<d%s.length;++i){",l),s(n,a,i,l+"[i]")("}")("}")):(a.resolvedType instanceof r||n("if(d%s!=null){",l),s(n,a,i,l),a.resolvedType instanceof r||n("}"))}return n("return m")},i.toObject=function(e){var t=e.fieldsArray.slice().sort(o.compareFieldsById);if(!t.length)return o.codegen()("return {}");for(var n=o.codegen(["m","o"],e.name+"$toObject")("if(!o)")("o={}")("var d={}"),i=[],s=[],l=[],u=0;u<t.length;++u)t[u].partOf||(t[u].resolve().repeated?i:t[u].map?s:l).push(t[u]);if(i.length){for(n("if(o.arrays||o.defaults){"),u=0;u<i.length;++u)n("d%s=[]",o.safeProp(i[u].name));n("}")}if(s.length){for(n("if(o.objects||o.defaults){"),u=0;u<s.length;++u)n("d%s={}",o.safeProp(s[u].name));n("}")}if(l.length){for(n("if(o.defaults){"),u=0;u<l.length;++u){var c=l[u],h=o.safeProp(c.name);if(c.resolvedType instanceof r)n("d%s=o.enums===String?%j:%j",h,c.resolvedType.valuesById[c.typeDefault],c.typeDefault);else if(c.long)n("if(util.Long){")("var n=new util.Long(%i,%i,%j)",c.typeDefault.low,c.typeDefault.high,c.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",h)("}else")("d%s=o.longs===String?%j:%i",h,c.typeDefault.toString(),c.typeDefault.toNumber());else if(c.bytes){var p="["+Array.prototype.slice.call(c.typeDefault).join(",")+"]";n("if(o.bytes===String)d%s=%j",h,String.fromCharCode.apply(String,c.typeDefault))("else{")("d%s=%s",h,p)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",h,h)("}")}else n("d%s=%j",h,c.typeDefault)}n("}")}var d=!1;for(u=0;u<t.length;++u){c=t[u];var f=e._fieldsArray.indexOf(c);h=o.safeProp(c.name);c.map?(d||(d=!0,n("var ks2")),n("if(m%s&&(ks2=Object.keys(m%s)).length){",h,h)("d%s={}",h)("for(var j=0;j<ks2.length;++j){"),a(n,c,f,h+"[ks2[j]]")("}")):c.repeated?(n("if(m%s&&m%s.length){",h,h)("d%s=[]",h)("for(var j=0;j<m%s.length;++j){",h),a(n,c,f,h+"[j]")("}")):(n("if(m%s!=null&&m.hasOwnProperty(%j)){",h,c.name),a(n,c,f,h),c.partOf&&n("if(o.oneofs)")("d%s=%j",o.safeProp(c.partOf.name),c.name)),n("}")}return n("return d")}},function(e,t,n){"use strict";var i=t,r=n(24);i[".google.protobuf.Any"]={fromObject:function(e){if(e&&e["@type"]){var t=this.lookup(e["@type"]);if(t){var n="."===e["@type"].charAt(0)?e["@type"].substr(1):e["@type"];return this.create({type_url:"/"+n,value:t.encode(t.fromObject(e)).finish()})}}return this.fromObject(e)},toObject:function(e,t){if(t&&t.json&&e.type_url&&e.value){var n=e.type_url.substring(e.type_url.lastIndexOf("/")+1),i=this.lookup(n);i&&(e=i.decode(e.value))}if(!(e instanceof this.ctor)&&e instanceof r){var o=e.$type.toObject(e,t);return o["@type"]=e.$type.fullName,o}return this.toObject(e,t)}}},function(e,t,n){"use strict";e.exports=d;var i=/[\s{}=;:[\],'"()<>]/g,r=/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,o=/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,s=/^ *[*\/]+ */,a=/^\s*\*?\/*/,l=/\n/g,u=/\s/,c=/\\(.?)/g,h={0:"\0",r:"\r",n:"\n",t:"\t"};function p(e){return e.replace(c,function(e,t){switch(t){case"\\":case"":return t;default:return h[t]||""}})}function d(e,t){e=e.toString();var n=0,c=e.length,h=1,d=null,f=null,g=0,y=!1,m=[],v=null;function b(e){return Error("illegal "+e+" (line "+h+")")}function w(t){return e.charAt(t)}function S(n,i){d=e.charAt(n++),g=h,y=!1;var r,o=n-(t?2:3);do{if(--o<0||"\n"===(r=e.charAt(o))){y=!0;break}}while(" "===r||"\t"===r);for(var u=e.substring(n,i).split(l),c=0;c<u.length;++c)u[c]=u[c].replace(t?a:s,"").trim();f=u.join("\n").trim()}function I(t){var n=_(t),i=e.substring(t,n);return/^\s*\/{1,2}/.test(i)}function _(e){for(var t=e;t<c&&"\n"!==w(t);)t++;return t}function k(){if(m.length>0)return m.shift();if(v)return function(){var t="'"===v?o:r;t.lastIndex=n-1;var i=t.exec(e);if(!i)throw b("string");return n=t.lastIndex,O(v),v=null,p(i[1])}();var s,a,l,d,f;do{if(n===c)return null;for(s=!1;u.test(l=w(n));)if("\n"===l&&++h,++n===c)return null;if("/"===w(n)){if(++n===c)throw b("comment");if("/"===w(n))if(t){if(d=n,f=!1,I(n)){f=!0;do{if((n=_(n))===c)break;n++}while(I(n))}else n=Math.min(c,_(n)+1);f&&S(d,n),h++,s=!0}else{for(f="/"===w(d=n+1);"\n"!==w(++n);)if(n===c)return null;++n,f&&S(d,n-1),++h,s=!0}else{if("*"!==(l=w(n)))return"/";d=n+1,f=t||"*"===w(d);do{if("\n"===l&&++h,++n===c)throw b("comment");a=l,l=w(n)}while("*"!==a||"/"!==l);++n,f&&S(d,n-2),s=!0}}}while(s);var g=n;if(i.lastIndex=0,!i.test(w(g++)))for(;g<c&&!i.test(w(g));)++g;var y=e.substring(n,n=g);return'"'!==y&&"'"!==y||(v=y),y}function O(e){m.push(e)}function x(){if(!m.length){var e=k();if(null===e)return null;O(e)}return m[0]}return Object.defineProperty({next:k,peek:x,push:O,skip:function(e,t){var n=x();if(n===e)return k(),!0;if(!t)throw b("token '"+n+"', '"+e+"' expected");return!1},cmnt:function(e){var n=null;return void 0===e?g===h-1&&(t||"*"===d||y)&&(n=f):(g<e&&x(),g!==e||y||!t&&"/"!==d||(n=f)),n}},"line",{get:function(){return h}})}d.unescape=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(106);t.LogHook=i.LogHook,t.getLogger=i.getLogger,t.log=i.log,t.LogLevel=i.LogLevel,t.setLogLevel=i.setLogLevel,t.exportControlWithName=i.exportControlWithName,t.setLogLevelForAllLoggers=i.setLogLevelForAllLoggers;var r=n(107);t.Hook_LogView=r.Hook_LogView,t.setLogVisible=r.setLogVisible,t.setRecordLog=r.setRecordLog,t.exportViewWithName=r.exportViewWithName},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(51),r=n(74),o=n(12);t.default={Hummer:i.default,ChannelService:r.default,Utify:o.Utify}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(8),r=n(1),o=n(53),s=n(70),a=n(73),l=n(31),u=n(12);t.default=class{constructor({appid:e,wxAppid:t,uid:n,token:l,token_type:u,area:c,onConnectStatus:h,onLoginStatus:p,onerror:d}){if(h&&(this.onConnectStatus=h),p&&(this.onLoginStatus=p),r.default.isEmpty(n)||!r.default.isString(n))return i.default.error("uid must be string(64bit)"),void(d&&d({code:-1,msg:"uid must be string(64bit)"}));this.appid=e,this.observer=new a.EventEmitter2,this.h5_g_globals=new s.default;const f=this.getTokenType(u);if(-1!==f){if(this.h5_g_globals.tokenType=f,this.h5_g_globals.appid=e,this.h5_g_globals.thirdUdbAppId="",this.h5_g_globals.wxAppid=t,this.h5_g_globals.loginedUDB=!0,this.h5_g_globals.uid=n,this.h5_g_globals.domain="",this.h5_g_globals.hiidoHost=this.getHiidoHost(c),this.env=this.parseEnvParams(c),this.setScode(50275),"undefined"==typeof window){if(!t&&d)return void d({code:-1,msg:'\\"wxAppid\\" are required!'});this.h5_g_globals.isMiniProgram=!0,this.h5_g_globals.bShareAnonymousUid=!1}if(this.h5_g_globals.isMiniProgram)r.default.setWxCookie("hummer_uid",n),r.default.setWxCookie("hummer_token",l);else{let e="https:"==document.location.protocol;r.default.setCookie("hummer_uid",n,168,"/",this.h5_g_globals.domain,e),r.default.setCookie("hummer_token",l,168,"/",this.h5_g_globals.domain,e)}this.h5_g_globals.userType=1,this.h5_g_globals.uid=n,this.h5_g_globals.token=l,this.ap=new o.default,this.ap.setHummerHandler(this),d&&d({code:0,msg:"ok"})}else d({code:-1,msg:"token-type is error"})}on(e,t){this.observer.on(e,t)}off(e,t){this.observer.removeListener(e,t)}trigger(e,...t){setTimeout(()=>this.emit(e,...t),0)}emit(e,...t){this.observer.emit(e,e,...t)}getEnv(){return this.env}parseEnvParams(e){const t=new Map([["CN",{area:"china",type:"public",name:"shared"}],["CN-INNER",{area:"china",type:"private",name:"share"}],["CN-TEST",{area:"shenzhen",type:"test",name:"2"}],["CN-TEST1",{area:"shenzhen",type:"test",name:"1"}]]);let n=e.split("/");if(3==n.length)return{area:n[0],type:n[1],name:n[2]};if(1==n.length){let e=n[0],i=t.get(e);if(void 0!==i)return{area:i.area,type:i.type,name:i.name}}return null}getHiidoHost(e){return["CN","CN-TEST","CN-INNER","CN-TEST1"].indexOf(e)>-1?"ylog.hiido.com":"hlog.hiido.com"}setScode(e){r.default.isNumber(e)?(e<=0&&(e=0),i.default.debug("Hummer.setScode scode="+e),this.h5_g_globals.scode=e):i.default.error("Hummer.setScode scode must be a number")}getTokenType(e){if(!e)return 1;let t=new Map([["OTP_TOKEN",0],["TOKEN_3RD",1],["YY_TOKEN",2]]).get(e);return void 0===t?-1:t}setLogLevel({level:e}){i.default.setLevel(e)}refreshToken({uid:e,token:t}){if(r.default.isEmpty(e)||!r.default.isString(e))return i.default.error("uid must be string(64bit)"),Promise.reject({type:"refresh_token",code:-1,errMsg:"uid must be string(64bit)"});if(0==this.h5_g_globals.userType)return Promise.reject({code:-1,msg:"admission control"});if(this.h5_g_globals.isMiniProgram)r.default.setWxCookie("hummer_uid",e),r.default.setWxCookie("hummer_token",t);else{let n="https:"==document.location.protocol;r.default.setCookie("hummer_uid",e,168,"/",this.h5_g_globals.domain,n),r.default.setCookie("hummer_token",t,168,"/",this.h5_g_globals.domain,n)}return this.h5_g_globals.uid=e,this.h5_g_globals.token=t,Promise.resolve({code:0,msg:"refresh success"})}onApOpen(){this.onConnectStatus({code:u.ConnectStatus.Connected,msg:"connected"}),this.h5_g_globals.bLostConnection&&(this.h5_g_globals.bLostConnection=!1),this.h5_g_globals.loginedUDB||this.ap.loginAp()}onApConnecting(){this.onConnectStatus({code:u.ConnectStatus.Connecting,msg:"connecting"})}onApClose(){this.ap.wsState!=l.default.CONNECTED||this.h5_g_globals.bLostConnection||(this.h5_g_globals.bLostConnection=!0,this.onConnectStatus({code:u.ConnectStatus.Disconnected,errMsg:"connection lost"}))}onApError(e){i.default.error("onApError:"+JSON.stringify(e)),this.h5_g_globals.bLostConnection||(this.h5_g_globals.bLostConnection=!0,this.onConnectStatus({code:u.ConnectStatus.Disconnected,errMsg:"connection lost"}))}onLoginAp(e){this.onLoginStatus(e)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=Object.prototype.hasOwnProperty,r=Object.prototype.toString,o=function(e){return"function"==typeof Array.isArray?Array.isArray(e):"[object Array]"===r.call(e)},s=function(e){if(!e||"[object Object]"!==r.call(e))return!1;let t,n=i.call(e,"constructor"),o=e.constructor&&e.constructor.prototype&&i.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!n&&!o)return!1;for(t in e);return void 0===t||i.call(e,t)},a=function(...e){let t,n,i,r,l,u,c=arguments[0],h=1,p=arguments.length,d=!1;for("boolean"==typeof c&&(d=c,c=arguments[1]||{},h=2),(null==c||"object"!=typeof c&&"function"!=typeof c)&&(c={});h<p;++h)if(null!=(t=arguments[h]))for(n in t)i=c[n],c!==(r=t[n])&&(d&&r&&(s(r)||(l=o(r)))?(l?(l=!1,u=i&&o(i)?i:[]):u=i&&s(i)?i:{},c[n]=a(d,u,r)):void 0!==r&&(c[n]=r));return c};t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(27),r=n(12),o=n(29),s=n(8),a=n(55),l=n(56),u=n(4),c=n(5),h=n(1),p=n(58),d=n(59),f=n(60),g=n(31),y=n(14),m=n(32),v=n(63),b=n(17),w=n(65),S=n(66),I=n(67),_=n(68),k=n(69);t.default=class{constructor(){this.latenceStat={min:0,max:0,avg:0,count:0,sum:0,timeout:0},this.wsAddr=r.WSHOST,this.wsState=g.default.INIT,this.logined=!1,this.link=null,this.lastTimerCheck=y.default.now(),this.lastRecvPong=y.default.now(),this.sendBuf=[],this.handleDic=new Map,this.addHandle(u.default.PSvcUnicastURI,this.onPSvcUnicast.bind(this)),this.addHandle(u.default.PSvcBroadcastURI,this.onPSvcBroadcast.bind(this)),this.addHandle(u.default.PCS_ServiceBroadCastV2URI,this.onPSvcBroadcastV2.bind(this)),this.addHandle(u.default.PAPForceOutURI,this.onAPForceOut.bind(this)),this.handleBcDic=new Map}setHummerHandler(e){this.hummerHandler=e}setSvcHandler(e){this.svcHandler=e,this.h5_g_globals=this.svcHandler.h5_g_globals}addHandle(e,t){this.handleDic.set(e,t)}onCheckTimer(e,t){this.wsState!=g.default.CLOSED&&this.link?this.wsState==g.default.CONNECTED&&e-this.lastTimerCheck>=5e3&&(this.lastTimerCheck=e,this.h5_g_globals.loginedUDB&&(this.logined?this.pingAp().catch(e=>{console.error(e)}):this.loginAp())):(s.default.log("Ap.onCheckTimer check ap not ready. re-connect. wsState="+this.wsState),this.connect()),t%60==0&&this.reportRtt()}stop(e,t){s.default.log("Ap.stop uid:"+e+" reason:"+t),this.h5_g_globals.logout(),this.close()}clearSendBuf(){this.sendBuf.length>500&&(this.sendBuf=[])}flushBuf(){let e=this.sendBuf.length;if(0!=e){s.default.log("Ap.flushBuf len="+e);for(let t=0;t<e;++t){let e=this.sendBuf[t];if(e.origin)this.send(e.data);else{let t=this.wrapApRouter(e);this.send(t.buf)}}}this.sendBuf=[]}onLoginAp(e){e.code==r.LoginStatus.Logined&&(this.logined=!0),this.hummerHandler.onLoginAp(e)}appidReady(){return this.link&&this.wsState==g.default.CONNECTED&&this.logined}resetWsState(){s.default.log("Ap.resetWsState"),this.wsState=g.default.CLOSED,this.link&&this.link.reset(),this.logined=!1,this.h5_g_globals.loginedUDB=!0,this.clearSendBuf()}onopen(){s.default.log("Ap.onopen"),this.h5_g_globals.bLostConnection&&(this.h5_g_globals.bLostConnection=!1),this.wsState=g.default.CONNECTED,this.hummerHandler.onApOpen(),this.loginAp()}onclose(){s.default.log("Ap.onclose"),this.wsState!=g.default.CONNECTED||this.h5_g_globals.bLostConnection||(this.h5_g_globals.bLostConnection=!0),this.hummerHandler.onApClose(),this.resetWsState()}onerror(e){this.hummerHandler.onApError(e),this.resetWsState()}onData(e,t){let n=new c.default(t);if(e==u.default.PSvcPongURI){let e=new p.default;e.unmarshall(n);let t=this.h5_g_globals.seqContext[e.context];t&&(delete this.h5_g_globals.seqContext[e.context],t.resolve(e)),this.lastRecvPong=y.default.now()}else this.onProto(e,n)}onProto(e,t){let n=this.handleDic.get(e);void 0!==typeof n?n(t):s.default.log("Ap.onProto UNKNOWN uri="+(e>>8&h.default.getUintMax())+"/"+(255&e))}send(e){this.link&&this.wsState==g.default.CONNECTED?this.link.send(e):s.default.warn("Ap.send failed")}wrapApRouter(e){let t=e.appid,n=e.svcName,i=e.fnName,r=e.routeArgs,o=e.clientHeaders,l=e.protoType,u=new a.default;if(e.preAllocSeq?u.context=e.preAllocSeq:u.context=this.h5_g_globals.getSeqId().toString(),u.uid=this.h5_g_globals.loginedUDB?this.h5_g_globals.uid:"0",u.appid=t,u.instId=this.h5_g_globals.instId,u.svcName=n,u.traceId="web_"+u.instId.toString()+"_"+u.context,i&&(u.fnName=i),l&&(u.protoType=l),u.data=e.data,u.dataCRC=0,r&&(u.routeArgs=r),o){if(!h.default.isMap(o))return void s.default.error("Ap.wrapApRouter clientHeaders should be a map!!!");for(let[e,t]of this.h5_g_globals.defaultHeaderMap)o.has(e)||o.set(e,t);u.clientHeaders=o}else u.clientHeaders=this.h5_g_globals.defaultHeaderMap;let c=u.marshall();return s.default.log("Ap.wrapApRouter send service route request:"+u.toString()),{buf:c,seqId:u.context}}sendApRouter(e){let t="",n=new Promise((n,i)=>{if(this.appidReady()){let n=this.wrapApRouter(e);t=n.seqId,this.send(n.buf)}else{let r=Object.assign({},e);r.resolve=n,r.reject=i,r.preAllocSeq=this.h5_g_globals.getSeqId().toString(),r.fnName=e.fnName,r.uri=e.uri,t=r.preAllocSeq,this.sendBuf.push(r)}this.h5_g_globals.seqContext[t]={resolve:n,reject:i,appid:e.appid,svcName:e.svcName,fnName:e.fnName,protoType:e.protoType,uri:e.uri?e.uri:0,routeReqStartTs:y.default.now(),traceId:"web_"+this.h5_g_globals.instId.toString()+"_"+t}}),i=h.default.DelayPromise(11e3).then(()=>{const e=this.h5_g_globals;let n=e.seqContext[t];if(n){let i="appid:"+n.appid+" svcName:"+n.svcName+" fnName:"+n.fnName+" traceId:"+n.traceId;s.default.log("Ap.sendApRouter seqId:"+t+" time out."+i);let r=new Map;r.set("appid",e.appid),r.set("uid",e.uid),r.set("serviceName",n.svcName),r.set("functionName",n.fnName),r.set("traceId",n.traceId),r.set("cost",11e3),r.set("uri",n.uri),r.set("sdkResCode",-3);let o=m.default.genUrl(r);if(m.default.sendUrl(o,e.isMiniProgram),b.default.report(e.scode,n.svcName,n.fnName,n.protoType,11e3,-3),this.sendBuf){let t=this.sendBuf.length;if(e.appid==v.default.MOSCHAT_PUB||e.appid==v.default.MOSCHAT_DEV)for(let e=t-1;e>=0;e--){let t=this.sendBuf[e].fnName;"sendChatMessage"!=t&&"createChannel"!=t||(s.default.warn("Ap.sendApRouter remove cached data, preAllocSeq="+this.sendBuf[e].preAllocSeq+" fnName="+t),this.sendBuf.splice(e,1))}else for(let e=t-1;e>=0;e--){let t=this.sendBuf[e].uri;t==u.default.PTextChatReqURI&&(s.default.warn("Ap.sendApRouter remove cached data, preAllocSeq="+this.sendBuf[e].preAllocSeq+" uri="+t),this.sendBuf.splice(e,1))}}throw delete e.seqContext[t],new Error("Operation time out after 11000 ms:"+i)}});return Promise.race([n,i])}connect(){if(this.wsState!=g.default.CONNECTING&&this.wsState!=g.default.CONNECTED){const e=this.h5_g_globals;let t=this.wsAddr+"/websocket?appid="+e.appid+"&version="+encodeURIComponent(i.version.toString())+"&uuid="+encodeURIComponent(e.uuid);s.default.log("Ap.connect start to connect ws server. url="+t),this.link=new o.default(this,e.isMiniProgram),this.wsState=g.default.CONNECTING,this.link.connect(t),this.hummerHandler.onApConnecting()}else s.default.log("Ap.connect websocket is connecting/connected...")}close(){this.wsState!=g.default.CLOSING?(this.wsState=g.default.CLOSING,this.link&&this.link.reset()):s.default.log("Ap.connect websocket is closing...")}reportRtt(){s.default.info("Ap.reportRtt:"+JSON.stringify(this.latenceStat)),this.latenceStat={min:0,max:0,avg:0,count:0,sum:0,timeout:0}}pingAp(){let e="",t=y.default.now();const n=this.h5_g_globals;let i=new Promise((i,r)=>{let o=new d.default;o.context=n.getSeqId().toString(),e=o.context,this.send(o.marshall()),n.seqContext[e]={resolve:()=>{let e=y.default.now()-t;e<this.latenceStat.min?this.latenceStat.min=e:0==this.latenceStat.min&&(this.latenceStat.min=e),e>this.latenceStat.max?this.latenceStat.max=e:0==this.latenceStat.max&&(this.latenceStat.max=e),this.latenceStat.sum+=e,this.latenceStat.count+=1,this.latenceStat.avg=Math.round(this.latenceStat.sum/this.latenceStat.count)},reject:()=>{this.latenceStat.timeout+=1}}}),r=h.default.DelayPromise(11e3).then(()=>{if(n.seqContext[e])throw s.default.log("Ap.pingAp ping seqId:"+e+" time out."),delete n.seqContext[e],this.latenceStat.timeout+=1,this.resetWsState(),this.hummerHandler.onApClose(),new Error("ping seqId:"+e+" time out after 11000 ms")});return Promise.race([i,r])}loginAp(){if(this.isGuestLogin())return void s.default.log("Ap.loginAp anonymous user no need to loginAp.");if(this.logined)return void s.default.log("Ap.loginAp already logined.");const e=this.h5_g_globals;let t=y.default.now();if(e.loginApStartTs>0&&t-e.loginApStartTs<2e3)return void s.default.log("Ap.loginAp ignore frequently login request. now="+t+" loginApStartTs="+e.loginApStartTs);e.loginApStartTs=t;let n=new l.default;n.context=e.getSeqId().toString(),n.uid=e.uid,n.appid=e.appid,n.instId=e.instId,n.seqId=parseInt(n.context),n.tokenType=this.h5_g_globals.tokenType,n.otp=e.token,s.default.log("Ap.loginAp: otp len="+n.otp.length),n.clientHeaders.set("SCKTerminal","web"),n.clientHeaders.set("SCKSvcSdkVer",i.version.toString()),s.default.log("Ap.loginAp start to login ap:"+JSON.stringify(n)),this.send(n.marshall())}logoutAp(){if(this.logined=!1,this.isGuestLogin())return void s.default.log("Ap.logout anonymous user no need to logout.");const e=this.h5_g_globals;e.logoutApStartTs=y.default.now();let t=new f.default;t.context=e.getSeqId().toString(),t.uid=e.uid,t.appid=e.appid,t.instId=e.instId,s.default.log("Ap.logout "+JSON.stringify(t)),this.send(t.marshall())}start(){s.default.log("Ap.start"),this.connect()}isGuestLogin(){return 0==this.h5_g_globals.userType}onPSvcUnicast(e){let t=new w.default;t.unmarshall(e);let n=new Map;this.svcHandler.fillStatMap(n,e.uri,t),n.set("length",t.data.byteLength),this.svcHandler.checkAndSendStatMap(n,!0),s.default.log("Ap.onPSvcUnicast:"+t.toString()),this.svcHandler.invokeCallback({type:"on_unicast",appid:t.appid,svcName:t.svcName,fnName:t.fnName,protoType:t.protoType,traceId:t.traceId,data:t.data});let i=new S.default;i.context=t.context;let r=i.marshall();this.send(r)}onPSvcBroadcast(e){let t=new I.default;t.unmarshall(e);let n=t.groupType.toString64()+"_"+t.groupId.toString64();if(s.default.log("Ap.onPSvcBroadcast:"+t.toString()+" bcKey="+n+" isInnerBcGroup="+this.h5_g_globals.innerBcGroups[n]),this.h5_g_globals.innerBcGroups[n]){let e=new Uint8Array(t.data.byteLength);e.set(t.data,0),t.data=null;let n=new DataView(e.buffer),i=new c.default(n),r=this.handleBcDic.get(i.uri);void 0!==r?r(i,t.traceId):s.default.warn("Ap.onPSvcBroadcast unhandle yyp uri="+(i.uri>>8&h.default.getUintMax())+"/"+(255&i.uri))}else this.svcHandler.invokeCallback({type:"on_data",appid:t.appid,bc_group:{bcType:t.groupType,bcId:t.groupId},svcName:t.svcName,fnName:t.fnName,protoType:t.protoType,traceId:t.traceId,data:t.data})}onPSvcBroadcastV2(e){let t=new k.default;t.unmarshall(e);let n=t.ugid;if(s.default.log("Ap.onPSvcBroadcastV2:"+t.toString()+" bcKey="+n+" isInnerBcGroup="+this.h5_g_globals.innerBcGroups[n]),this.h5_g_globals.innerBcGroups[n]){let n=this.handleBcDic.get(e.uri);if(void 0!==n){let e=new Uint8Array(t.data.byteLength);e.set(t.data,0),t.data=null;let i=new DataView(e.buffer);n(new c.default(i),t.traceId)}else this.invokeBroadCastCallback(t)}else this.invokeBroadCastCallback(t)}invokeBroadCastCallback(e){this.svcHandler.invokeCallback({type:"on_broadcast",appid:e.appid,bc_group:e.ugid,svcName:e.svcName,fnName:e.fnName,protoType:e.protoType,traceId:e.traceId,data:e.data})}onAPForceOut(e){let t=new _.default;t.unmarshall(e),this.stop(t.uid,t.desc),this.svcHandler.invokeCallback({type:"force_out",code:t.code,errMsg:t.desc})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(28);t.encodeStringToUtf8Bytes=function(e){let t=i.length(e),n=new Uint8Array(t);return i.write(e,n,0),n},t.decodeUtf8BytesToString=function(e){return i.read(e,0,e.length)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(3),r=n(4),o=n(0),s=n(1);t.default=class{constructor(){this.context="",this.uid="0",this.appid=0,this.instId=0,this.svcName="",this.fnName="",this.protoType="",this.data=null,this.dataCRC=0,this.routeArgs=new Map,this.clientHeaders=new Map,this.traceId=""}marshall(){let e=new i.default;e.setUri(r.default.PSvcRouteReqURI),e.pushString(this.context);let t=o.fromString(this.uid);e.pushUInt32(t.low),e.pushUInt32(t.high),e.pushUInt32(this.appid),e.pushUInt32(this.instId),e.pushString(this.svcName),e.pushString(this.fnName),e.pushString(this.protoType),"string"==typeof this.data?e.pushString32(this.data):e.pushUint8Array32(this.data),e.pushUInt32(this.dataCRC),e.pushUInt32(this.routeArgs.size);for(let[t,n]of this.routeArgs)e.pushString(t),e.pushString(n);e.pushUInt32(this.clientHeaders.size);for(let[t,n]of this.clientHeaders)e.pushString(t),e.pushString(n);return e.pushString(this.traceId),e.marshall()}toString(){return"context="+this.context+" uid="+this.uid+" appid="+this.appid+" instId="+this.instId+" svcName="+this.svcName+" fnName="+this.fnName+" traceId="+this.traceId+" clientHeaders="+s.default.stringfyMap(this.clientHeaders)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(3),r=n(4),o=n(0);t.default=class{constructor(){this.context="",this.uid="",this.appid=0,this.instId=0,this.seqId=0,this.user="",this.password="",this.otp="",this.clientHeaders=new Map,this.tokenType=0,this.traceId=""}marshall(){let e=new i.default;e.setUri(r.default.PSvcLoginReqURI),e.pushString(this.context);let t=o.fromString(this.uid);e.pushUInt32(t.low),e.pushUInt32(t.high),e.pushUInt32(this.appid),e.pushUInt32(this.instId);let n=o.fromString(this.seqId.toString());e.pushUInt32(n.low),e.pushUInt32(n.high),e.pushString(this.user),e.pushString(this.password),e.pushString(this.otp),e.pushUInt32(this.clientHeaders.size);for(let[t,n]of this.clientHeaders)e.pushString(t),e.pushString(n);return e.pushUInt32(this.tokenType),e.pushString(this.traceId),e.marshall()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e=0,t=0,n=0){this.sid=e,this.appId=t,this.channelId=n}fromString(e){if(this.sid=0,this.appId=0,this.channelId=0,-1!==e.toString().indexOf("-")){let t=e.split("-");return this.sid=parseInt(t[0])||0,this.appId=parseInt(t[1])||0,this.channelId=parseInt(t[2])||0,!0}return!1}toString(){return this.sid+"-"+this.appId+"-"+this.channelId}equal(e){return this.toString()===e.toString()}toBigint(){return 4294967296*this.sid+this.appId}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.context="",this.timestamp=null}unmarshall(e){this.context=e.popString(),this.timestamp=e.popUInt64()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(3),r=n(4);t.default=class{constructor(){this.context=""}marshall(){let e=new i.default;return e.setUri(r.default.PSvcPingURI),e.pushString(this.context),e.marshall()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(3),r=n(4),o=n(0);t.default=class{constructor(){this.context="",this.uid="",this.appid=0,this.instId=0}marshall(){let e=new i.default;e.setUri(r.default.PSvcLogoutReqURI),e.pushString(this.context);let t=o.fromString(this.uid);return e.pushUInt32(t.low),e.pushUInt32(t.high),e.pushUInt32(this.appid),e.pushUInt32(this.instId),e.marshall()}}},function(module,exports,__webpack_require__){(function(process,global){var __WEBPACK_AMD_DEFINE_RESULT__;
/**
 * [js-md5]{@link https://github.com/emn178/js-md5}
 *
 * @namespace md5
 * @version 0.7.3
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2017
 * @license MIT
 */
/**
 * [js-md5]{@link https://github.com/emn178/js-md5}
 *
 * @namespace md5
 * @version 0.7.3
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2017
 * @license MIT
 */
!function(){"use strict";var ERROR="input is invalid type",WINDOW="object"==typeof window,root=WINDOW?window:{};root.JS_MD5_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&"object"==typeof self,NODE_JS=!root.JS_MD5_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node;NODE_JS?root=global:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_MD5_NO_COMMON_JS&&"object"==typeof module&&module.exports,AMD=__webpack_require__(62),ARRAY_BUFFER=!root.JS_MD5_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,HEX_CHARS="0123456789abcdef".split(""),EXTRA=[128,32768,8388608,-2147483648],SHIFT=[0,8,16,24],OUTPUT_TYPES=["hex","array","digest","buffer","arrayBuffer","base64"],BASE64_ENCODE_CHAR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),blocks=[],buffer8;if(ARRAY_BUFFER){var buffer=new ArrayBuffer(68);buffer8=new Uint8Array(buffer),blocks=new Uint32Array(buffer)}!root.JS_MD5_NO_NODE_JS&&Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),!ARRAY_BUFFER||!root.JS_MD5_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return"object"==typeof e&&e.buffer&&e.buffer.constructor===ArrayBuffer});var createOutputMethod=function(e){return function(t){return new Md5(!0).update(t)[e]()}},createMethod=function(){var e=createOutputMethod("hex");NODE_JS&&(e=nodeWrap(e)),e.create=function(){return new Md5},e.update=function(t){return e.create().update(t)};for(var t=0;t<OUTPUT_TYPES.length;++t){var n=OUTPUT_TYPES[t];e[n]=createOutputMethod(n)}return e},nodeWrap=function(method){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),nodeMethod=function(e){if("string"==typeof e)return crypto.createHash("md5").update(e,"utf8").digest("hex");if(null==e)throw ERROR;return e.constructor===ArrayBuffer&&(e=new Uint8Array(e)),Array.isArray(e)||ArrayBuffer.isView(e)||e.constructor===Buffer?crypto.createHash("md5").update(new Buffer(e)).digest("hex"):method(e)};return nodeMethod};function Md5(e){if(e)blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks,this.buffer8=buffer8;else if(ARRAY_BUFFER){var t=new ArrayBuffer(68);this.buffer8=new Uint8Array(t),this.blocks=new Uint32Array(t)}else this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.h0=this.h1=this.h2=this.h3=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}Md5.prototype.update=function(e){if(!this.finalized){var t,n=typeof e;if("string"!==n){if("object"!==n)throw ERROR;if(null===e)throw ERROR;if(ARRAY_BUFFER&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||ARRAY_BUFFER&&ArrayBuffer.isView(e)))throw ERROR;t=!0}for(var i,r,o=0,s=e.length,a=this.blocks,l=this.buffer8;o<s;){if(this.hashed&&(this.hashed=!1,a[0]=a[16],a[16]=a[1]=a[2]=a[3]=a[4]=a[5]=a[6]=a[7]=a[8]=a[9]=a[10]=a[11]=a[12]=a[13]=a[14]=a[15]=0),t)if(ARRAY_BUFFER)for(r=this.start;o<s&&r<64;++o)l[r++]=e[o];else for(r=this.start;o<s&&r<64;++o)a[r>>2]|=e[o]<<SHIFT[3&r++];else if(ARRAY_BUFFER)for(r=this.start;o<s&&r<64;++o)(i=e.charCodeAt(o))<128?l[r++]=i:i<2048?(l[r++]=192|i>>6,l[r++]=128|63&i):i<55296||i>=57344?(l[r++]=224|i>>12,l[r++]=128|i>>6&63,l[r++]=128|63&i):(i=65536+((1023&i)<<10|1023&e.charCodeAt(++o)),l[r++]=240|i>>18,l[r++]=128|i>>12&63,l[r++]=128|i>>6&63,l[r++]=128|63&i);else for(r=this.start;o<s&&r<64;++o)(i=e.charCodeAt(o))<128?a[r>>2]|=i<<SHIFT[3&r++]:i<2048?(a[r>>2]|=(192|i>>6)<<SHIFT[3&r++],a[r>>2]|=(128|63&i)<<SHIFT[3&r++]):i<55296||i>=57344?(a[r>>2]|=(224|i>>12)<<SHIFT[3&r++],a[r>>2]|=(128|i>>6&63)<<SHIFT[3&r++],a[r>>2]|=(128|63&i)<<SHIFT[3&r++]):(i=65536+((1023&i)<<10|1023&e.charCodeAt(++o)),a[r>>2]|=(240|i>>18)<<SHIFT[3&r++],a[r>>2]|=(128|i>>12&63)<<SHIFT[3&r++],a[r>>2]|=(128|i>>6&63)<<SHIFT[3&r++],a[r>>2]|=(128|63&i)<<SHIFT[3&r++]);this.lastByteIndex=r,this.bytes+=r-this.start,r>=64?(this.start=r-64,this.hash(),this.hashed=!0):this.start=r}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Md5.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex;e[t>>2]|=EXTRA[3&t],t>=56&&(this.hashed||this.hash(),e[0]=e[16],e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.bytes<<3,e[15]=this.hBytes<<3|this.bytes>>>29,this.hash()}},Md5.prototype.hash=function(){var e,t,n,i,r,o,s=this.blocks;this.first?t=((t=((e=((e=s[0]-680876937)<<7|e>>>25)-271733879<<0)^(n=((n=(-271733879^(i=((i=(-1732584194^2004318071&e)+s[1]-117830708)<<12|i>>>20)+e<<0)&(-271733879^e))+s[2]-1126478375)<<17|n>>>15)+i<<0)&(i^e))+s[3]-1316259209)<<22|t>>>10)+n<<0:(e=this.h0,t=this.h1,n=this.h2,t=((t+=((e=((e+=((i=this.h3)^t&(n^i))+s[0]-680876936)<<7|e>>>25)+t<<0)^(n=((n+=(t^(i=((i+=(n^e&(t^n))+s[1]-389564586)<<12|i>>>20)+e<<0)&(e^t))+s[2]+606105819)<<17|n>>>15)+i<<0)&(i^e))+s[3]-1044525330)<<22|t>>>10)+n<<0),t=((t+=((e=((e+=(i^t&(n^i))+s[4]-176418897)<<7|e>>>25)+t<<0)^(n=((n+=(t^(i=((i+=(n^e&(t^n))+s[5]+1200080426)<<12|i>>>20)+e<<0)&(e^t))+s[6]-1473231341)<<17|n>>>15)+i<<0)&(i^e))+s[7]-45705983)<<22|t>>>10)+n<<0,t=((t+=((e=((e+=(i^t&(n^i))+s[8]+1770035416)<<7|e>>>25)+t<<0)^(n=((n+=(t^(i=((i+=(n^e&(t^n))+s[9]-1958414417)<<12|i>>>20)+e<<0)&(e^t))+s[10]-42063)<<17|n>>>15)+i<<0)&(i^e))+s[11]-1990404162)<<22|t>>>10)+n<<0,t=((t+=((e=((e+=(i^t&(n^i))+s[12]+1804603682)<<7|e>>>25)+t<<0)^(n=((n+=(t^(i=((i+=(n^e&(t^n))+s[13]-40341101)<<12|i>>>20)+e<<0)&(e^t))+s[14]-1502002290)<<17|n>>>15)+i<<0)&(i^e))+s[15]+1236535329)<<22|t>>>10)+n<<0,t=((t+=((i=((i+=(t^n&((e=((e+=(n^i&(t^n))+s[1]-165796510)<<5|e>>>27)+t<<0)^t))+s[6]-1069501632)<<9|i>>>23)+e<<0)^e&((n=((n+=(e^t&(i^e))+s[11]+643717713)<<14|n>>>18)+i<<0)^i))+s[0]-373897302)<<20|t>>>12)+n<<0,t=((t+=((i=((i+=(t^n&((e=((e+=(n^i&(t^n))+s[5]-701558691)<<5|e>>>27)+t<<0)^t))+s[10]+38016083)<<9|i>>>23)+e<<0)^e&((n=((n+=(e^t&(i^e))+s[15]-660478335)<<14|n>>>18)+i<<0)^i))+s[4]-405537848)<<20|t>>>12)+n<<0,t=((t+=((i=((i+=(t^n&((e=((e+=(n^i&(t^n))+s[9]+568446438)<<5|e>>>27)+t<<0)^t))+s[14]-1019803690)<<9|i>>>23)+e<<0)^e&((n=((n+=(e^t&(i^e))+s[3]-187363961)<<14|n>>>18)+i<<0)^i))+s[8]+1163531501)<<20|t>>>12)+n<<0,t=((t+=((i=((i+=(t^n&((e=((e+=(n^i&(t^n))+s[13]-1444681467)<<5|e>>>27)+t<<0)^t))+s[2]-51403784)<<9|i>>>23)+e<<0)^e&((n=((n+=(e^t&(i^e))+s[7]+1735328473)<<14|n>>>18)+i<<0)^i))+s[12]-1926607734)<<20|t>>>12)+n<<0,t=((t+=((o=(i=((i+=((r=t^n)^(e=((e+=(r^i)+s[5]-378558)<<4|e>>>28)+t<<0))+s[8]-2022574463)<<11|i>>>21)+e<<0)^e)^(n=((n+=(o^t)+s[11]+1839030562)<<16|n>>>16)+i<<0))+s[14]-35309556)<<23|t>>>9)+n<<0,t=((t+=((o=(i=((i+=((r=t^n)^(e=((e+=(r^i)+s[1]-1530992060)<<4|e>>>28)+t<<0))+s[4]+1272893353)<<11|i>>>21)+e<<0)^e)^(n=((n+=(o^t)+s[7]-155497632)<<16|n>>>16)+i<<0))+s[10]-1094730640)<<23|t>>>9)+n<<0,t=((t+=((o=(i=((i+=((r=t^n)^(e=((e+=(r^i)+s[13]+681279174)<<4|e>>>28)+t<<0))+s[0]-358537222)<<11|i>>>21)+e<<0)^e)^(n=((n+=(o^t)+s[3]-722521979)<<16|n>>>16)+i<<0))+s[6]+76029189)<<23|t>>>9)+n<<0,t=((t+=((o=(i=((i+=((r=t^n)^(e=((e+=(r^i)+s[9]-640364487)<<4|e>>>28)+t<<0))+s[12]-421815835)<<11|i>>>21)+e<<0)^e)^(n=((n+=(o^t)+s[15]+530742520)<<16|n>>>16)+i<<0))+s[2]-995338651)<<23|t>>>9)+n<<0,t=((t+=((i=((i+=(t^((e=((e+=(n^(t|~i))+s[0]-198630844)<<6|e>>>26)+t<<0)|~n))+s[7]+1126891415)<<10|i>>>22)+e<<0)^((n=((n+=(e^(i|~t))+s[14]-1416354905)<<15|n>>>17)+i<<0)|~e))+s[5]-57434055)<<21|t>>>11)+n<<0,t=((t+=((i=((i+=(t^((e=((e+=(n^(t|~i))+s[12]+1700485571)<<6|e>>>26)+t<<0)|~n))+s[3]-1894986606)<<10|i>>>22)+e<<0)^((n=((n+=(e^(i|~t))+s[10]-1051523)<<15|n>>>17)+i<<0)|~e))+s[1]-2054922799)<<21|t>>>11)+n<<0,t=((t+=((i=((i+=(t^((e=((e+=(n^(t|~i))+s[8]+1873313359)<<6|e>>>26)+t<<0)|~n))+s[15]-30611744)<<10|i>>>22)+e<<0)^((n=((n+=(e^(i|~t))+s[6]-1560198380)<<15|n>>>17)+i<<0)|~e))+s[13]+1309151649)<<21|t>>>11)+n<<0,t=((t+=((i=((i+=(t^((e=((e+=(n^(t|~i))+s[4]-145523070)<<6|e>>>26)+t<<0)|~n))+s[11]-1120210379)<<10|i>>>22)+e<<0)^((n=((n+=(e^(i|~t))+s[2]+718787259)<<15|n>>>17)+i<<0)|~e))+s[9]-343485551)<<21|t>>>11)+n<<0,this.first?(this.h0=e+1732584193<<0,this.h1=t-271733879<<0,this.h2=n-1732584194<<0,this.h3=i+271733878<<0,this.first=!1):(this.h0=this.h0+e<<0,this.h1=this.h1+t<<0,this.h2=this.h2+n<<0,this.h3=this.h3+i<<0)},Md5.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,i=this.h3;return HEX_CHARS[e>>4&15]+HEX_CHARS[15&e]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[t>>4&15]+HEX_CHARS[15&t]+HEX_CHARS[t>>12&15]+HEX_CHARS[t>>8&15]+HEX_CHARS[t>>20&15]+HEX_CHARS[t>>16&15]+HEX_CHARS[t>>28&15]+HEX_CHARS[t>>24&15]+HEX_CHARS[n>>4&15]+HEX_CHARS[15&n]+HEX_CHARS[n>>12&15]+HEX_CHARS[n>>8&15]+HEX_CHARS[n>>20&15]+HEX_CHARS[n>>16&15]+HEX_CHARS[n>>28&15]+HEX_CHARS[n>>24&15]+HEX_CHARS[i>>4&15]+HEX_CHARS[15&i]+HEX_CHARS[i>>12&15]+HEX_CHARS[i>>8&15]+HEX_CHARS[i>>20&15]+HEX_CHARS[i>>16&15]+HEX_CHARS[i>>28&15]+HEX_CHARS[i>>24&15]},Md5.prototype.toString=Md5.prototype.hex,Md5.prototype.digest=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,i=this.h3;return[255&e,e>>8&255,e>>16&255,e>>24&255,255&t,t>>8&255,t>>16&255,t>>24&255,255&n,n>>8&255,n>>16&255,n>>24&255,255&i,i>>8&255,i>>16&255,i>>24&255]},Md5.prototype.array=Md5.prototype.digest,Md5.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(16),t=new Uint32Array(e);return t[0]=this.h0,t[1]=this.h1,t[2]=this.h2,t[3]=this.h3,e},Md5.prototype.buffer=Md5.prototype.arrayBuffer,Md5.prototype.base64=function(){for(var e,t,n,i="",r=this.array(),o=0;o<15;)e=r[o++],t=r[o++],n=r[o++],i+=BASE64_ENCODE_CHAR[e>>>2]+BASE64_ENCODE_CHAR[63&(e<<4|t>>>4)]+BASE64_ENCODE_CHAR[63&(t<<2|n>>>6)]+BASE64_ENCODE_CHAR[63&n];return e=r[o],i+=BASE64_ENCODE_CHAR[e>>>2]+BASE64_ENCODE_CHAR[e<<4&63]+"=="};var exports=createMethod();COMMON_JS?module.exports=exports:(root.md5=exports,AMD&&(__WEBPACK_AMD_DEFINE_RESULT__=function(){return exports}.call(exports,__webpack_require__,exports,module),void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)))}()}).call(this,__webpack_require__(33),__webpack_require__(15))},function(e,t){(function(t){e.exports=t}).call(this,{})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={MOSCHAT_PUB:1494645593,MOSCHAT_DEV:1207472126,HAMO:1249193970}},function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"report",function(){return fe}),n.d(t,"Metrics",function(){return ge}),n.d(t,"oldMetrics",function(){return ye}),n.d(t,"setSiteId",function(){return me}),n.d(t,"setSpeId",function(){return ve});var i="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{};function r(e,t){return e(t={exports:{}},t.exports),t.exports}var o=r(function(e){!function(t){function n(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function i(e,t,i,r,o,s){return n((a=n(n(t,e),n(r,s)))<<(l=o)|a>>>32-l,i);var a,l}function r(e,t,n,r,o,s,a){return i(t&n|~t&r,e,t,o,s,a)}function o(e,t,n,r,o,s,a){return i(t&r|n&~r,e,t,o,s,a)}function s(e,t,n,r,o,s,a){return i(t^n^r,e,t,o,s,a)}function a(e,t,n,r,o,s,a){return i(n^(t|~r),e,t,o,s,a)}function l(e,t){var i,l,u,c,h;e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var p=1732584193,d=-271733879,f=-1732584194,g=271733878;for(i=0;i<e.length;i+=16)l=p,u=d,c=f,h=g,d=a(d=a(d=a(d=a(d=s(d=s(d=s(d=s(d=o(d=o(d=o(d=o(d=r(d=r(d=r(d=r(d,f=r(f,g=r(g,p=r(p,d,f,g,e[i],7,-680876936),d,f,e[i+1],12,-389564586),p,d,e[i+2],17,606105819),g,p,e[i+3],22,-1044525330),f=r(f,g=r(g,p=r(p,d,f,g,e[i+4],7,-176418897),d,f,e[i+5],12,1200080426),p,d,e[i+6],17,-1473231341),g,p,e[i+7],22,-45705983),f=r(f,g=r(g,p=r(p,d,f,g,e[i+8],7,1770035416),d,f,e[i+9],12,-1958414417),p,d,e[i+10],17,-42063),g,p,e[i+11],22,-1990404162),f=r(f,g=r(g,p=r(p,d,f,g,e[i+12],7,1804603682),d,f,e[i+13],12,-40341101),p,d,e[i+14],17,-1502002290),g,p,e[i+15],22,1236535329),f=o(f,g=o(g,p=o(p,d,f,g,e[i+1],5,-165796510),d,f,e[i+6],9,-1069501632),p,d,e[i+11],14,643717713),g,p,e[i],20,-373897302),f=o(f,g=o(g,p=o(p,d,f,g,e[i+5],5,-701558691),d,f,e[i+10],9,38016083),p,d,e[i+15],14,-660478335),g,p,e[i+4],20,-405537848),f=o(f,g=o(g,p=o(p,d,f,g,e[i+9],5,568446438),d,f,e[i+14],9,-1019803690),p,d,e[i+3],14,-187363961),g,p,e[i+8],20,1163531501),f=o(f,g=o(g,p=o(p,d,f,g,e[i+13],5,-1444681467),d,f,e[i+2],9,-51403784),p,d,e[i+7],14,1735328473),g,p,e[i+12],20,-1926607734),f=s(f,g=s(g,p=s(p,d,f,g,e[i+5],4,-378558),d,f,e[i+8],11,-2022574463),p,d,e[i+11],16,1839030562),g,p,e[i+14],23,-35309556),f=s(f,g=s(g,p=s(p,d,f,g,e[i+1],4,-1530992060),d,f,e[i+4],11,1272893353),p,d,e[i+7],16,-155497632),g,p,e[i+10],23,-1094730640),f=s(f,g=s(g,p=s(p,d,f,g,e[i+13],4,681279174),d,f,e[i],11,-358537222),p,d,e[i+3],16,-722521979),g,p,e[i+6],23,76029189),f=s(f,g=s(g,p=s(p,d,f,g,e[i+9],4,-640364487),d,f,e[i+12],11,-421815835),p,d,e[i+15],16,530742520),g,p,e[i+2],23,-995338651),f=a(f,g=a(g,p=a(p,d,f,g,e[i],6,-198630844),d,f,e[i+7],10,1126891415),p,d,e[i+14],15,-1416354905),g,p,e[i+5],21,-57434055),f=a(f,g=a(g,p=a(p,d,f,g,e[i+12],6,1700485571),d,f,e[i+3],10,-1894986606),p,d,e[i+10],15,-1051523),g,p,e[i+1],21,-2054922799),f=a(f,g=a(g,p=a(p,d,f,g,e[i+8],6,1873313359),d,f,e[i+15],10,-30611744),p,d,e[i+6],15,-1560198380),g,p,e[i+13],21,1309151649),f=a(f,g=a(g,p=a(p,d,f,g,e[i+4],6,-145523070),d,f,e[i+11],10,-1120210379),p,d,e[i+2],15,718787259),g,p,e[i+9],21,-343485551),p=n(p,l),d=n(d,u),f=n(f,c),g=n(g,h);return[p,d,f,g]}function u(e){var t,n="",i=32*e.length;for(t=0;t<i;t+=8)n+=String.fromCharCode(e[t>>5]>>>t%32&255);return n}function c(e){var t,n=[];for(n[(e.length>>2)-1]=void 0,t=0;t<n.length;t+=1)n[t]=0;var i=8*e.length;for(t=0;t<i;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n}function h(e){var t,n,i="";for(n=0;n<e.length;n+=1)t=e.charCodeAt(n),i+="0123456789abcdef".charAt(t>>>4&15)+"0123456789abcdef".charAt(15&t);return i}function p(e){return unescape(encodeURIComponent(e))}function d(e){return function(e){return u(l(c(e),8*e.length))}(p(e))}function f(e,t){return function(e,t){var n,i,r=c(e),o=[],s=[];for(o[15]=s[15]=void 0,r.length>16&&(r=l(r,8*e.length)),n=0;n<16;n+=1)o[n]=909522486^r[n],s[n]=1549556828^r[n];return i=l(o.concat(c(t)),512+8*t.length),u(l(s.concat(i),640))}(p(e),p(t))}function g(e,t,n){return t?n?f(t,e):h(f(t,e)):n?d(e):h(d(e))}e.exports?e.exports=g:t.md5=g}(i)}),s="hdjs_session_id",a="hdjs_session_time",l="_HIIDO_DEFER_",u={PC:1,MOBILE:2},c=["ubuntu","centos","fedora","debian","gentoo","suse","mandriva","slackware","freebsd","archlinux"],h={android:/android (\d+\.\d+)/i,ios:/cpu (?:iphone )os (\d+_\d+)/i,wp:[/windows phone(?:[ os]{3})? (\d+\.\d+)/i,/windows nt (\d\.\d)/i],blackberry:/(?:Version|Blackberry[\w]+)\/(\d\.\d)/i,symbian:/symbian(?:os)?\/(\d+[.\d]{0,2})/i,tizen:/tizen (\d+\.\d+)/i},p=-1,d=[{engine:"baidu.com",rule:"wd|word|w|kw|key",value:1},{engine:"haosou.com",rule:"q",value:2},{engine:"sogou.com",rule:"query",value:3},{engine:"google.",rule:"q",value:4},{engine:"bing.com",rule:"q",value:5},{engine:"yahoo.com",rule:"p|q",value:6},{engine:"youdao.com",rule:"q",value:7},{engine:"yodao.com",rule:"q",value:8},{engine:"iask.sina.com.cn",rule:"searchWord|k",value:9},{engine:"zhongsou.com",rule:"w|word",value:10},{engine:"search.com",rule:"q",value:11},{engine:"sm.cn",rule:"q",value:12},{engine:"chinaso.com",rule:"q",value:13},{engine:"soku.com",rule:"keyword",value:14},{engine:"alexa.com",rule:"q",value:15},{engine:"s.weibo.com",rule:function(e){return e.split("&")[0].split("/").pop()},value:16},{engine:"qq.com",rule:"k",value:17},{engine:"lofter.com",rule:function(e){var t;return e.indexOf("queryString")>-1&&null!==(t=new RegExp("(^|)queryString=([^&]*)(&|$)","gi").exec(e))?t[2]:e.split("?")[0].split("/").pop()},value:18}],f="hd_newui",g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},m="-1",v={name:"na",version:m};function b(e){return function(t){return Object.prototype.toString.call(t)==="[object "+e+"]"}}var w=b("String"),S=b("RegExp"),I=b("Object"),_=b("Function");function k(e,t,n,i){var r=v;(function(e,t){for(var n=0,i=e.length;n<i&&!1!==t.call(e,e[n],n);n++);})(t,function(t){var n=function(e,t,n){var i=_(t)?t.call(null,n):t;if(!i)return null;var r={name:e,version:m,codename:""};if(!0===i)return r;if(w(i)){if(-1!==n.indexOf(i))return r}else{if(I(i))return i.hasOwnProperty("version")&&(r.version=i.version),r;if(S(i)){var o=i.exec(n);if(o)return o.length>=2&&o[1]?r.version=o[1].replace(/_/g,"."):r.version=m,r}}}(t[0],t[1],e);if(n)return r=n,!1}),n.call(i,r.name,r.version)}var O=function(){function e(t){y(this,e),this._rules=t}return e.prototype.parse=function(e){var t={};k(e=(e||"").toLowerCase(),this._rules.device,function(e,n){var i=parseFloat(n);t.device={name:e,version:i,fullVersion:n},t.device[e]=i},t),k(e,this._rules.os,function(e,n){var i=parseFloat(n);t.os={name:e,version:i,fullVersion:n},t.os[e]=i},t);var n=this.IEMode(e);return k(e,this._rules.engine,function(e,i){var r=i;n&&(i=n.engineVersion||n.engineMode,r=n.engineMode);var o=parseFloat(i);t.engine={name:e,version:o,fullVersion:i,mode:parseFloat(r),fullMode:r,compatible:!!n&&n.compatible},t.engine[e]=o},t),k(e,this._rules.browser,function(e,i){var r=i;n&&("ie"===e&&(i=n.browserVersion),r=n.browserMode);var o=parseFloat(i);t.browser={name:e,version:o,fullVersion:i,mode:parseFloat(r),fullMode:r,compatible:!!n&&n.compatible},t.browser[e]=o},t),t},e.prototype.IEMode=function(e){if(!this._rules.re_msie.test(e))return null;var t,n,i=void 0,r=void 0,o=void 0;if(-1!==e.indexOf("trident/")&&(i=/\btrident\/([0-9.]+)/.exec(e))&&i.length>=2){r=i[1];var s=i[1].split(".");s[0]=parseInt(s[0],10)+4,o=s.join(".")}n=(i=this._rules.re_msie.exec(e))[1];var a=i[1].split(".");return void 0===o&&(o=n),a[0]=parseInt(a[0],10)-4,t=a.join("."),void 0===r&&(r=t),{browserVersion:o,browserMode:n,engineVersion:r,engineMode:t,compatible:r!==t}},e}(),x="undefined"==typeof window?i:window,A=x.external,U=/\b(?:msie |ie |trident\/[0-9].*rv[ :])([0-9.]+)/,M=/\bbb10\b.+?\bversion\/([\d.]+)/,C=/\bblackberry\b.+\bversion\/([\d.]+)/,P=/\bblackberry\d+\/([\d.]+)/;function L(e){if(A)try{var t=A.twGetRunPath.toLowerCase(),n=A.twGetSecurityID(x),i=A.twGetVersion(n);if(t&&-1===t.indexOf(e))return!1;if(i)return{version:i}}catch(e){}}var R={device:[["nokia",function(e){return-1!==e.indexOf("nokia ")?/\bnokia ([0-9]+)?/:/\bnokia([a-z0-9]+)?/}],["samsung",function(e){return-1!==e.indexOf("samsung")?/\bsamsung(?:[ \-](?:sgh|gt|sm))?-([a-z0-9]+)/:/\b(?:sgh|sch|gt|sm)-([a-z0-9]+)/}],["wp",function(e){return-1!==e.indexOf("windows phone ")||-1!==e.indexOf("xblwp")||-1!==e.indexOf("zunewp")||-1!==e.indexOf("windows ce")}],["pc","windows"],["ipad","ipad"],["ipod","ipod"],["iphone",/\biphone\b|\biph(\d)/],["mac","macintosh"],["mi",/\bmi[ \-]?([a-z0-9 ]+(?= build|\)))/],["hongmi",/\bhm[ \-]?([a-z0-9]+)/],["aliyun",/\baliyunos\b(?:[\-](\d+))?/],["meizu",function(e){return e.indexOf("meizu")>=0?/\bmeizu[\/ ]([a-z0-9]+)\b/:/\bm([0-9cx]{1,4})\b/}],["nexus",/\bnexus ([0-9s.]+)/],["huawei",function(e){var t=/\bmediapad (.+?)(?= build\/huaweimediapad\b)/;return-1!==e.indexOf("huawei-huawei")?/\bhuawei\-huawei\-([a-z0-9\-]+)/:t.test(e)?t:/\bhuawei[ _\-]?([a-z0-9]+)/}],["lenovo",function(e){return-1!==e.indexOf("lenovo-lenovo")?/\blenovo\-lenovo[ \-]([a-z0-9]+)/:/\blenovo[ \-]?([a-z0-9]+)/}],["zte",function(e){return/\bzte\-[tu]/.test(e)?/\bzte-[tu][ _\-]?([a-su-z0-9\+]+)/:/\bzte[ _\-]?([a-su-z0-9\+]+)/}],["vivo",/\bvivo(?: ([a-z0-9]+))?/],["htc",function(e){return/\bhtc[a-z0-9 _\-]+(?= build\b)/.test(e)?/\bhtc[ _\-]?([a-z0-9 ]+(?= build))/:/\bhtc[ _\-]?([a-z0-9 ]+)/}],["oppo",/\boppo[_]([a-z0-9]+)/],["konka",/\bkonka[_\-]([a-z0-9]+)/],["sonyericsson",/\bmt([a-z0-9]+)/],["coolpad",/\bcoolpad[_ ]?([a-z0-9]+)/],["lg",/\blg[\-]([a-z0-9]+)/],["android",/\bandroid\b|\badr\b/],["blackberry",function(e){return e.indexOf("blackberry")>=0?/\bblackberry\s?(\d+)/:"bb10"}]],os:[["wp",function(e){return-1!==e.indexOf("windows phone ")?/\bwindows phone (?:os )?([0-9.]+)/:-1!==e.indexOf("xblwp")?/\bxblwp([0-9.]+)/:-1!==e.indexOf("zunewp")?/\bzunewp([0-9.]+)/:"windows phone"}],["windows",/\bwindows nt ([0-9.]+)/],["macosx",/\bmac os x ([0-9._]+)/],["ios",function(e){return/\bcpu(?: iphone)? os /.test(e)?/\bcpu(?: iphone)? os ([0-9._]+)/:-1!==e.indexOf("iph os ")?/\biph os ([0-9_]+)/:/\bios\b/}],["yunos",/\baliyunos ([0-9.]+)/],["android",function(e){return e.indexOf("android")>=0?/\bandroid[ \/-]?([0-9.x]+)?/:e.indexOf("adr")>=0?e.indexOf("mqqbrowser")>=0?/\badr[ ]\(linux; u; ([0-9.]+)?/:/\badr(?:[ ]([0-9.]+))?/:"android"}],["chromeos",/\bcros i686 ([0-9.]+)/],["linux","linux"],["windowsce",/\bwindows ce(?: ([0-9.]+))?/],["symbian",/\bsymbian(?:os)?\/([0-9.]+)/],["blackberry",function(e){var t=e.match(M)||e.match(C)||e.match(P);return t?{version:t[1]}:"blackberry"}]],browser:[["edge",/edge\/([0-9.]+)/],["sogou",function(e){return e.indexOf("sogoumobilebrowser")>=0?/sogoumobilebrowser\/([0-9.]+)/:e.indexOf("sogoumse")>=0||/ se ([0-9.x]+)/}],["theworld",function(){var e=L("theworld");return void 0!==e?e:/theworld(?: ([\d.])+)?/}],["360",function(e){var t=L("360se");return void 0!==t?t:-1!==e.indexOf("360 aphone browser")?/\b360 aphone browser \(([^\)]+)\)/:/\b360(?:se|ee|chrome|browser)\b/}],["maxthon",function(){try{if(A&&(A.mxVersion||A.max_version))return{version:A.mxVersion||A.max_version}}catch(e){}return/\b(?:maxthon|mxbrowser)(?:[ \/]([0-9.]+))?/}],["micromessenger",/\bmicromessenger\/([\d.]+)/],["qq",/\bm?qqbrowser\/([0-9.]+)/],["green","greenbrowser"],["tt",/\btencenttraveler ([0-9.]+)/],["liebao",function(e){if(e.indexOf("liebaofast")>=0)return/\bliebaofast\/([0-9.]+)/;if(-1===e.indexOf("lbbrowser"))return!1;var t=void 0;try{A&&A.LiebaoGetVersion&&(t=A.LiebaoGetVersion())}catch(e){}return{version:t||"-1"}}],["tao",/\btaobrowser\/([0-9.]+)/],["coolnovo",/\bcoolnovo\/([0-9.]+)/],["saayaa","saayaa"],["baidu",/\b(?:ba?idubrowser|baiduhd)[ \/]([0-9.x]+)/],["ie",U],["mi",/\bmiuibrowser\/([0-9.]+)/],["opera",function(e){var t=/\bopera.+version\/([0-9.ab]+)/;return t.test(e)?t:/\bopr\/([0-9.]+)/}],["oupeng",/\boupeng\/([0-9.]+)/],["yandex",/yabrowser\/([0-9.]+)/],["ali-ap",function(e){return e.indexOf("aliapp")>0?/\baliapp\(ap\/([0-9.]+)\)/:/\balipayclient\/([0-9.]+)\b/}],["ali-ap-pd",/\baliapp\(ap-pd\/([0-9.]+)\)/],["ali-am",/\baliapp\(am\/([0-9.]+)\)/],["ali-tb",/\baliapp\(tb\/([0-9.]+)\)/],["ali-tb-pd",/\baliapp\(tb-pd\/([0-9.]+)\)/],["ali-tm",/\baliapp\(tm\/([0-9.]+)\)/],["ali-tm-pd",/\baliapp\(tm-pd\/([0-9.]+)\)/],["uc",function(e){return e.indexOf("ucbrowser/")>=0?/\bucbrowser\/([0-9.]+)/:e.indexOf("ubrowser/")>=0?/\bubrowser\/([0-9.]+)/:/\buc\/[0-9]/.test(e)?/\buc\/([0-9.]+)/:e.indexOf("ucweb")>=0?/\bucweb([0-9.]+)?/:/\b(?:ucbrowser|uc)\b/}],["chrome",/ (?:chrome|crios|crmo)\/([0-9.]+)/],["android",function(e){if(-1!==e.indexOf("android"))return/\bversion\/([0-9.]+(?: beta)?)/}],["blackberry",function(e){var t=e.match(M)||e.match(C)||e.match(P);return t?{version:t[1]}:"blackberry"}],["safari",/\bversion\/([0-9.]+(?: beta)?)(?: mobile(?:\/[a-z0-9]+)?)? safari\//],["webview",/\bcpu(?: iphone)? os (?:[0-9._]+).+\bapplewebkit\b/],["firefox",/\bfirefox\/([0-9.ab]+)/],["nokia",/\bnokiabrowser\/([0-9.]+)/]],engine:[["edgehtml",/edge\/([0-9.]+)/],["trident",U],["blink",function(){return"chrome"in x&&"CSS"in x&&/\bapplewebkit[\/]?([0-9.+]+)/}],["webkit",/\bapplewebkit[\/]?([0-9.+]+)/],["gecko",function(e){var t=e.match(/\brv:([\d\w.]+).*\bgecko\/(\d+)/);if(t)return{version:t[1]+"."+t[2]}}],["presto",/\bpresto\/([0-9.]+)/],["androidwebkit",/\bandroidwebkit\/([0-9.]+)/],["coolpadwebkit",/\bcoolpadwebkit\/([0-9.]+)/],["u2",/\bu2\/([0-9.]+)/],["u3",/\bu3\/([0-9.]+)/]],re_msie:U},T=(navigator.userAgent||"")+" "+(navigator.appVersion||"")+" "+(navigator.vendor||""),N=new O(R);function j(e){var t=N.parse(e),n=function(e){if(!R.re_msie.test(e))return null;var t,n,i=void 0,r=void 0,o=void 0;if(-1!==e.indexOf("trident/")&&(i=/\btrident\/([0-9.]+)/.exec(e))&&i.length>=2){r=i[1];var s=i[1].split(".");s[0]=parseInt(s[0],10)+4,o=s.join(".")}n=(i=R.re_msie.exec(e))[1];var a=i[1].split(".");return void 0===o&&(o=n),a[0]=parseInt(a[0],10)-4,t=a.join("."),void 0===r&&(r=t),{browserVersion:o,browserMode:n,engineVersion:r,engineMode:t,compatible:r!==t}}(e);if(n){var i=t.engine.name,r=n.engineVersion||n.engineMode,o=parseFloat(r),s=n.engineMode;t.engine={name:i,version:o,fullVersion:r,mode:parseFloat(s),fullMode:s,compatible:!!n&&n.compatible},t.engine[t.engine.name]=o;var a=t.browser.name,l=t.browser.fullVersion;"ie"===a&&(l=n.browserVersion);var u=n.browserMode,c=parseFloat(l);t.browser={name:a,version:c,fullVersion:l,mode:parseFloat(u),fullMode:u,compatible:!!n&&n.compatible},t.browser[a]=c}return t}var B=j(T);B.parse=j;var q=B,E={"":"gionee","":"daxian","":"tianyu"},D=[{name:"blackberry",regex:/playbook/},{name:"philips",regex:/philips/},{name:"nec",regex:/nec/},{name:"palm",regex:/palm/},{name:"benq",regex:/benq/},{name:"taixin",regex:/telson/},{name:"cect",regex:/cect/},{name:"dbtel",regex:/dbtel/},{name:"konka",regex:/konka/},{name:"changhong",regex:/changhong/},{name:"wanlida",regex:/malata/},{name:"pantech",regex:/pantech/},{name:"dongxin",regex:/eastcom/},{name:"duowei",regex:/doov/},{name:"koobee",regex:/koobee/},{name:"alcatel",regex:/alcatel/},{name:"bird",regex:/bird/}];function H(e){var t,n=q.parse(e).os,i=n.name,r=n.fullVersion;if("windows"===i){if(e.indexOf("wpdesktop")>-1)return"wp|";i="win",e.indexOf("windows nt 5.0")>-1||e.indexOf("windows nt 5.01")>-1||e.indexOf("windows 2000")>-1?r="2000":e.indexOf("windows nt 5.1")>-1||e.indexOf("windows xp")>-1?r="xp":e.indexOf("windows nt 5.2")>-1||e.indexOf("windows 2003")>-1?r="2003":e.indexOf("windows nt 6.0")>-1||e.indexOf("windows vista")>-1?r="vista":e.indexOf("windows nt 6.1")>-1||e.indexOf("windows 2008")>-1||e.indexOf("windows 7")>-1?r="7":e.indexOf("windows nt 6.2")>-1||e.indexOf("windows 8")>-1?r="8.0":e.indexOf("windows nt 6.3")>-1?r="8.1":e.indexOf("windows nt 10.0")>-1&&(r="10.0")}else if("linux"===i){for(var o=c,s=o.length,a=0;a<s;a++)if(e.indexOf(o[a])>-1){r=o[a];break}}else"blackberry"===i&&"-1"===r?(t=e.match(h.blackberry))&&(r=t[1]):"symbian"===i&&"3"===r&&(r="^3");return/tizen/.test(e)&&(i="tizen",(t=e.match(h.tizen))&&(r=t[1])),"chromeos"===i&&(i="cros"),"na"===i&&(/symbian|symbos|series\s?60|series40|syb-[0-9]+|s60/.test(e)&&(i="symbian",(t=e.match(h.symbian))&&(r="3"===t[1]?"^3":t[1])),/blackberry|bb10|rim tablet os/.test(e)&&(i="blackberry",(t=e.match(h.blackberry))&&(r=t[1])),/hisense/.test(e)&&(i="android")),r&&(r="-1"===r?"":(r=r.split(".")).length>1?r[0]+"."+r[1]:r[0]),i+"|"+r}function G(e){if(/baiduboxapp/.test(e))return"baidubox";if(/spark/.test(e))return"baiduspark";if(/qiyu/.test(e))return"qiyu";if(/yunhai/.test(e))return"yunhai";if(/yy/.test(e))return"yy";if(/myie/.test(e))return"mayi";if(/11[45]{1}browser/.test(e))return"115";if(/2345/.test(e))return"2345";var t=q.parse(e).browser,n=t.name,i=t.fullVersion;if("ie"===n)switch(i){case"6.0":n="ie6";break;case"7.0":n="ie7";break;case"8.0":n="ie8";break;case"9.0":n="ie9";break;case"10.0":n="ie10";break;case"11.0":n="ie11";break;case"12.0":n="ie12"}return"micromessenger"===n&&(n="wechat"),"tao"===n&&(n="taobao"),"oupeng"===n&&(n="opera"),n.indexOf("dolfin")>-1&&(n="dolphin"),(n.indexOf("ie")>-1||"android"===n)&&/2345/.test(e)&&(n="2345"),"na"===n&&(/android/.test(e)?n="android":/yandex/.test(e)&&(n="yandex")),n}function F(e){var t,n,i=q.parse(e).device,r=D.length;if("pc"===i.name||"mac"===i.name)return"";if("hongmi"===i.name)return"mi";if(/\bhonor/.test(e)||/\b(h\d+-l\d+)/.test(e))return"huawei";if(/\bsmartisan\b/.test(e)||/sm-?(\d{3,})/.test(e))return"smartisan";if(/\ba0001 build/.test(e))return"oneplus";if(/hisense/.test(e))return"hisense";if(/\bmot[-]([a-z0-9]+)/.test(e)||/ (xt\d+) build/.test(e))return"moto";if(E[i.name])return E[i.name];if("na"===i.name){for(t=0;t<r;t++)if((n=D[t]).regex.test(e))return n.name;return""}return i.name}function J(e){var t=function(e){return/mobile|phone|wpdesktop|windows ce|android|iphone|ipad|ipod|blackberry|bb10|rim tablet os|webos|opera|symbian|symbos|series60|series40|syb-[0-9]+|s60|palm|tizen|xblwp7|zunewp7|yunos|ucweb|midp|mqq|htc|nokia|samsung/i.test(e)?u.MOBILE:u.PC}(e=e.toLowerCase());return{pcmb:t,os:H(e),bs:G(e),mb:F(e)}}function V(e){var t=("; "+document.cookie).split("; "+e+"=");return 1===t.length?"":decodeURIComponent(t[1].split(";")[0])}function z(e,t,n){n=n||{};var i=e+"="+encodeURIComponent(t);if(n.expires&&"number"==typeof n.expires){var r=new Date;n.expires=1e3*n.expires*60*60*24,i=i+"; expires="+(r=new Date(r.getTime()+n.expires)).toUTCString()}i=i+"; path="+(n.path?n.path:"/"),i+=n.domain?"; domain="+n.domain:"",document.cookie=i}function W(e){var t,n=e||window._hiido_wid,i=Object.prototype.toString;if(n)if("[object Array]"===i.call(n))t=n.join("|");else if("function"==typeof n)try{t=n.call(window),"[object Array]"===i.call(t)&&(t=t.join("|"))}catch(e){window.console.log("[HiidoJS]: _hiido_wid !"),window.console.dir(e),t=""}return t||""}function $(){try{return navigator.javaEnabled()?1:0}catch(e){return 0}}function X(e){var t=p;try{t=e.GetVariable("$version")}catch(e){}return t}function K(e){var t=p;try{t=new ActiveXObject(e)}catch(e){t={activeXError:!0}}return t}function Z(){var e=[{name:"ShockwaveFlash.ShockwaveFlash.7",version:function(e){return X(e)}},{name:"ShockwaveFlash.ShockwaveFlash.6",version:function(e){var t="6,0,21";try{e.AllowScriptAccess="always",t=X(e)}catch(e){}return t}},{name:"ShockwaveFlash.ShockwaveFlash",version:function(e){return X(e)}}],t=p,n=navigator;try{if(n.plugins){for(var i=0;i<n.plugins.length;i++)if(n.plugins[i].name.indexOf("Shockwave Flash")>-1){(t=n.plugins[i].description.split("Shockwave Flash ")).length>1?(t=t[1])&&(t=t.split(".")[0]):t=t[0];break}}else if(window.ActiveXObject)for(var r=0;r<e.length&&t===p;r++){var o=K(e[r].name);o.activeXError||(t=e[r].version(o))!==p&&(t=t.split(",")[0].split(" ")[1])}}catch(e){}return t}var Y="2.2.0",Q="2.2.0";function ee(e){return"v"+(e?Q:Y)}var te=[{domain:"duowan.com",key:"duowan"},{domain:"yy.com",key:"yy"},{domain:"yy.tv",key:"yytv"},{domain:"kuaikuai.cn",key:"kuaikuai"},{domain:"hiido.com",key:"hiido"},{domain:"hiido.cn",key:"hiidocn"},{domain:"hiido.net",key:"hiidonet"},{domain:"bengou.com",key:"bengou"},{domain:"5253.com",key:"5253"},{domain:"duowan.cn",key:"duowancn"},{domain:"zzvv.com",key:"zzvv"},{domain:"99d.com",key:"99d"},{domain:"sc2.com.cn",key:"sc2"},{domain:"100.com",key:"100"},{domain:"5153.com",key:"5153"},{domain:"huya.com",key:"huya"},{domain:"1931.com",key:"1931"},{domain:"fengkaobiguo.com",key:"fengkaobiguo"},{domain:"up24.com",key:"up24"},{domain:"edu24ol.com",key:"edu24ol"},{domain:"ruixueys.com",key:"ruixueys"},{domain:"hqgwy.cn",key:"hqgwy"},{domain:"erdmusic.com",key:"erdmusic"},{domain:"zhiniu8.com",key:"zhiniu8"},{domain:"100yy.com",key:"100yy"},{domain:"dwmoniqi.com",key:"dwmoniqi"},{domain:"bigo.tv",key:"bigotv"},{domain:"bigo.sg",key:"bigosg"},{domain:"like.video",key:"bigolike"},{domain:"mcpemaster.com",key:"mcpemaster"},{domain:"cubetv.sg",key:"cubetvsg"}];function ne(e){this.name="HiidoJSError",this.message="[HiidoJS]: "+e||!1}function ie(){var e=function(){var e,t,n=document.getElementById("_hiido_script_id_")||document.currentScript||(t=document.getElementsByTagName("script"))[t.length-1];if(!n||!n.src)throw new ne("Cannot find Script!");if((e=n.src.split("?")).length>1){for(var i=e[1].split("&"),r={},o=0;o<i.length;o++){var s=i[o].split("=");r[s[0]]=s[1]}return r}return{}}();return e.siteid?e.siteid:""}function re(e,t){if("wechat"===e)return"wechat";for(var n=null,i=d,r=i.length,o=0;o<r&&null===n;o++)t.engine===i[o].value&&(n=i[o].engine);return"s.weibo.com"===n?"weibo":""}function oe(e){var t=V(f),n=window.location.hostname;return n=n.split("."),t||(t=Math.random(),e&&n.length>1?z(f,t,{expires:36500,domain:"."+n[n.length-2]+"."+n[n.length-1]}):z(f,t,{expires:36500})),t}function se(){var e=Math.random()+"";return z(s,e),e}function ae(){var e=new Date;return e=e.getTime(),z(a,e),e}ne.prototype=new Error,ne.prototype.constructor=ne;var le=u.MOBILE,ue=Object.prototype.hasOwnProperty,ce=window.location.protocol+"//ylog.hiido.com/j.gif";function he(e){var t=he.isInternal;e=e.toLowerCase();var n=function(e){return e?{host:e.split("/")[2],origin:e}:{host:"",origin:""}}(document.referrer),i=function(e){var t=e.host,n=e.origin;if(!t)return{engine:"",key:""};for(var i=d.length,r=!1,o={engine:"",key:""},s=0;s<i&&!r;s++){var a=d[s],l=a.engine;if(t.indexOf(l)>-1){r=!0,o.engine=a.value;var u,c=a.rule;if("function"==typeof c)o.key=c(n);else{u=c.split("|");for(var h=0;h<u.length;h++){var p=u[h],f=new RegExp("(^|)"+p+"=([^&]*)(&|$)","gi").exec(n);if(null!==f){o.key=f[2];break}}}}}return o}(n),r=t?function(e){for(var t,n,i,r,o="",s=e.split("."),a="",l=0;l<te.length;l++)if(n=(t=te[l]).domain,e.indexOf(n)>-1){if(i=n.split("."),s[r=s.length-i.length]!==i[0]||e.substr(e.length-n.length)!==n)continue;var u=window._hiido_no;o=void 0!==u&&0===u?t.key:(0===r?"www":s[r-1])+"@"+t.key,a=t.domain;break}var c=V("hiido_ui");return c||z("hiido_ui",c=Math.random(),{expires:700,domain:"."+a}),o}(window.location.hostname):ie(),o=J(e),a=!V(f);if(void 0===window["_hdjs_loaded_"+r]){window["_hdjs_loaded_"+r]=!0,this.isInternal=t,this.detect=o,this.data={ht:window.location.hostname,siteid:r,speid:W(),ui:oe(t),sc:window.screen.width+"."+window.screen.height,cl:(window.screen.colorDepth||0)+"-bit",pcmb:o.pcmb,os:o.os,bs:o.bs,mb:o.mb,se:i.engine,wd:i.key,rfh:n.host,rf:n.origin,sns:re(o.bs,i),fl:Z(),ln:navigator.language||"",ja:$(),ck:navigator.cookieEnabled?1:0,ot:"",lt:"",xy:"",ext:"",v:ee(t),pl:window.location.href},this.options={isOversea:!1},a&&(this.data.isnew=1),this._hasBootstrapReport=!1,this._inactiveThreshold=2e4,this.data.hsid=this.getSessionId(),he.module||window[l]||this._bootstrapReport();var u=this;this.report=window.hd=function(e,t,n){n=n||{},u.options.isOversea=!!n.isOversea,t=t||{};var i=new Date-0+"",r={hsid:V(s),ht:u.data.ht,ui:u.data.ui,siteid:u.data.siteid,pl:u.data.pl,v:u.data.v,rf:u.data.rf,rfh:u.data.rfh,pcmb:u.data.pcmb,rnd:u.data.ui+i,ut:i};if("event"===e){if(!t.eventAction)return void window.console.warn("[HiidoJS] ;  https://hdjs.hiido.com/docs/#/events");r.ea=t.eventAction,r.ec=t.eventCategory||"",r.el=t.eventLabel||"",r.ev=t.eventValue||"",u.log("webaction",r)}else"view"===e&&(he.module||window[l]?(t.uid&&(u.data.uid=t.uid),t.reserve&&(u.data.reserve=he.JSON.stringify(t.reserve)),u._bootstrapReport()):window.console.warn("[HiidoJS] hiido.jsdefer,:","http://hdjs.hiido.com/docs/#/usage?id="))},this.attachMetricMethods()}}he.prototype={constructor:he,_bootstrapReport:function(){this._hasBootstrapReport?window.console.warn("[HiidoJS] !"):(this._hasBootstrapReport=!0,this.reportEnter(),this.recordLifetime(),this.attachEvents())},attachMetricMethods:function(){var e=this;this.oldMetrics=null,window.Metrics&&(window.__oldMetrics__=window.Metrics,this.oldMetrics=window.__oldMetrics__),window.__Metrics__=window.Metrics=this.Metrics={setOptions:function(t){e.setOptions(t)},serviceReport:function(t){if(e.validateMetricsReportData(t)){var n=(new Date).getTime(),i=e.generateMetricBasicData(n,t);i.reqdata=JSON.stringify([{scode:t.scode,uri:t.uri,reqtime:t.timeSpent,ret:t.code,rtime:n}]),e.log("mmetric",i)}},countReport:function(t){if(e.validateMetricsReportData(t)){var n=(new Date).getTime(),i=e.generateMetricBasicData(n,t);i.counterdata=JSON.stringify([{scode:t.scode,uri:t.uri,counterName:t.countName,value:t.count,invokecount:1}]),e.log("mmetric",i)}},customReport:function(t){if(e.validateMetricsReportData(t)){var n=(new Date).getTime(),i=e.generateMetricBasicData(n,t);i.flatdata=JSON.stringify([{scode:t.scode,uri:t.uri,topic:t.topic,val:t.val,extra:t.extra}]),e.log("mmetric",i)}},noConflict:function(){window.__oldMetrics__&&(window.Metrics=window.__oldMetrics__)}}},generateActKey:function(e,t){return o(e+t+"HiidoYYSystem").toLowerCase()},generateMetricBasicData:function(e,t){var n=e;e=Math.round(e/1e3);var i=this.generateActKey("mmetric",e),r=this.detect,o=r.os.split("|"),s=r.bs,a=o[0],l={ios:0,wp:1,android:2,macosx:3,win:4},u=he.JSON.stringify([]);return{time:e,key:i,appkey:"",ver:t.ver,sdkver:ee(this.isInternal),sys:ue.call(l,a)?l[a]:a,osver:s,model:r.mb,sjp:r.mb,net:"",clienttime:n,reqdata:u,counterdata:u,flatdata:u}},reportEnter:function(){if(!this._enterReportSent){var e=new Date-0+"",t=he.assign(this.data,{io:1,ut:e,rnd:this.data.ui+e});this.log("webstat",t),this._enterReportSent=!0}},recordLifetime:function(){var e,t=this,n=window.requestAnimationFrame,i=window.cancelAnimationFrame;function r(){e.start()}function o(){e.stop()}this.data.lt=0,e=this._heartbeat=function(){var e;function r(){var i=new Date,o=i-t._ltStart;t.data.lt=t.data.lt+o,t._inactiveTime=t._inactiveTime+o,t._ltStart=i,e=t._inactiveTime<=t._inactiveThreshold?n(r):null}return{start:function(){e||(t._ltStart=new Date,e=n(r))},stop:function(){e&&(i(e),e=null)}}}(),"onfocusin"in document?(document.onfocusin=r,document.onfocusout=o):(window.onfocus=r,window.onblur=o);var s,a,l,u=["","webkit","moz","ms","o"];if(this.data.pcmb===le){for(var c=0;c<u.length;c++)if((a=(s=u[c])?s+"Hidden":"hidden")in document){l=s+"visibilitychange";break}l&&he.addEvent(document,l,function(){document[a]?o():r()})}this._inactiveTime=0,e.start()},reportLeave:function(){if(!this._leaveReportSent){var e=new Date-0+"",t=he.assign(this.data,{io:0,ut:e,rnd:this.data.ui+e,hsid:V(s)});this.log("webstat",t),this._leaveReportSent=!0}},log:function(e,t){var n=this,i=[];for(var r in t)i.push(encodeURIComponent(r)+"="+encodeURIComponent(t[r]));var o,s=i.join("&"),a="log_"+(new Date).getTime(),l=new Image(1,1);if(window[a]=l,l.onerror=function(){(!0===window._HIIDO_OVERSEA_||n.options.isOversea)&&(l.src=ce+"?act="+e+"&"+s,l.onerror=function(){window[a]=null}),window[a]=null},l.onload=function(){window[a]=null},!function(e){return"string"==typeof e&&e.length<=2e3}(o=!0===window._HIIDO_OVERSEA_||n.options.isOversea?"//hlog.hiido.com/j.gif?act="+e+"&"+s:ce+"?act="+e+"&"+s))throw new ne("Exceeding Maximum URL length - 2000 Characters");l.src=o},attachEvents:function(){var e=this;he.addEvent(document,"click",function(t){var n=t.target||t.srcElement;(function(e){for(var t;e&&"a"!==(t=e.tagName.toLowerCase())&&"html"!==t;)e=e.parentNode;return"a"===t})(n)&&(e.data.ot=n.href),e.data.xy=t.clientX+","+t.clientY},!0),window.onbeforeunload=function(){e.reportLeave()},window.onunload=function(){e.reportLeave()},this.data.pcmb===le&&(he.addEvent(window,"pageshow",function(t){t.persisted&&(e._leaveReportSent=!1,e._enterReportSent=!1,e.data.lt=0,e.reportEnter())}),he.addEvent(window,"pagehide",function(t){t.persisted&&e.reportLeave()}),he.addEvent(window,"touchstart",function(){e._inactiveTime=0,e._heartbeat.start()}))},getSessionId:function(){var e,t=V(a);return""===t?(e=se(),ae()):""!==this.data.rfh&&-1===this.data.rfh.indexOf(this.data.ht)?e=se():(t=V(a),e=(new Date).getTime()-t>18e5?se():V(s)),ae(),e},validateMetricsReportData:function(e){for(var t,n=["scode","ver","uri"],i=0;i<n.length;i++)if(!e[t=n[i]])return window.console.warn("HiidoJS: Metrics "+t+".  https://hdjs.hiido.com/docs/#/metrics"),!1;return!0},setOptions:function(e){this.options=he.assign({},this.options,e)}};var pe,de=r(function(e,t){(function(){var n={function:!0,object:!0},r=t&&!t.nodeType&&t,o=n["undefined"==typeof window?"undefined":g(window)]&&window||this,s=r&&n.object&&e&&!e.nodeType&&"object"==g(i)&&i;function a(e,t){e||(e=o.Object()),t||(t=o.Object());var i=e.Number||o.Number,r=e.String||o.String,s=e.Object||o.Object,l=e.Date||o.Date,u=e.SyntaxError||o.SyntaxError,c=e.TypeError||o.TypeError,h=e.Math||o.Math,p=e.JSON||o.JSON;"object"==(void 0===p?"undefined":g(p))&&p&&(t.stringify=p.stringify,t.parse=p.parse);var d,f,y,m=s.prototype,v=m.toString,b=new l(-0xc782b5b800cec);try{b=-109252==b.getUTCFullYear()&&0===b.getUTCMonth()&&1===b.getUTCDate()&&10==b.getUTCHours()&&37==b.getUTCMinutes()&&6==b.getUTCSeconds()&&708==b.getUTCMilliseconds()}catch(e){}function w(e){if(w[e]!==y)return w[e];var n;if("bug-string-char-index"==e)n="a"!="a"[0];else if("json"==e)n=w("json-stringify")&&w("json-parse");else{var o,s='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var a=t.stringify,u="function"==typeof a&&b;if(u){(o=function(){return 1}).toJSON=o;try{u="0"===a(0)&&"0"===a(new i)&&'""'==a(new r)&&a(v)===y&&a(y)===y&&a()===y&&"1"===a(o)&&"[1]"==a([o])&&"[null]"==a([y])&&"null"==a(null)&&"[null,null,null]"==a([y,v,null])&&a({a:[o,!0,!1,null,"\0\b\n\f\r\t"]})==s&&"1"===a(null,o)&&"[\n 1,\n 2\n]"==a([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==a(new l(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==a(new l(864e13))&&'"-000001-01-01T00:00:00.000Z"'==a(new l(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==a(new l(-1))}catch(e){u=!1}}n=u}if("json-parse"==e){var c=t.parse;if("function"==typeof c)try{if(0===c("0")&&!c(!1)){var h=5==(o=c(s)).a.length&&1===o.a[0];if(h){try{h=!c('"\t"')}catch(e){}if(h)try{h=1!==c("01")}catch(e){}if(h)try{h=1!==c("1.")}catch(e){}}}}catch(e){h=!1}n=h}}return w[e]=!!n}if(!w("json")){var S=w("bug-string-char-index");if(!b)var I=h.floor,_=[0,31,59,90,120,151,181,212,243,273,304,334],k=function(e,t){return _[t]+365*(e-1970)+I((e-1969+(t=+(t>1)))/4)-I((e-1901+t)/100)+I((e-1601+t)/400)};if((d=m.hasOwnProperty)||(d=function(e){var t,n={};return(n.__proto__=null,n.__proto__={toString:1},n).toString!=v?d=function(e){var t=this.__proto__,n=e in(this.__proto__=null,this);return this.__proto__=t,n}:(t=n.constructor,d=function(e){var n=(this.constructor||t).prototype;return e in this&&!(e in n&&this[e]===n[e])}),n=null,d.call(this,e)}),f=function(e,t){var i,r,o,s=0;for(o in(i=function(){this.valueOf=0}).prototype.valueOf=0,r=new i)d.call(r,o)&&s++;return i=r=null,s?f=2==s?function(e,t){var n,i={},r="[object Function]"==v.call(e);for(n in e)r&&"prototype"==n||d.call(i,n)||!(i[n]=1)||!d.call(e,n)||t(n)}:function(e,t){var n,i,r="[object Function]"==v.call(e);for(n in e)r&&"prototype"==n||!d.call(e,n)||(i="constructor"===n)||t(n);(i||d.call(e,n="constructor"))&&t(n)}:(r=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],f=function(e,t){var i,o,s="[object Function]"==v.call(e),a=!s&&"function"!=typeof e.constructor&&n[g(e.hasOwnProperty)]&&e.hasOwnProperty||d;for(i in e)s&&"prototype"==i||!a.call(e,i)||t(i);for(o=r.length;i=r[--o];a.call(e,i)&&t(i));}),f(e,t)},!w("json-stringify")){var O={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},x=function(e,t){return("000000"+(t||0)).slice(-e)},A=function(e){for(var t='"',n=0,i=e.length,r=!S||i>10,o=r&&(S?e.split(""):e);n<i;n++){var s=e.charCodeAt(n);switch(s){case 8:case 9:case 10:case 12:case 13:case 34:case 92:t+=O[s];break;default:if(s<32){t+="\\u00"+x(2,s.toString(16));break}t+=r?o[n]:e.charAt(n)}}return t+'"'};t.stringify=function(e,t,i){var r,o,s,a;if(n[void 0===t?"undefined":g(t)]&&t)if("[object Function]"==(a=v.call(t)))o=t;else if("[object Array]"==a){s={};for(var l,u=0,h=t.length;u<h;l=t[u++],("[object String]"==(a=v.call(l))||"[object Number]"==a)&&(s[l]=1));}if(i)if("[object Number]"==(a=v.call(i))){if((i-=i%1)>0)for(r="",i>10&&(i=10);r.length<i;r+=" ");}else"[object String]"==a&&(r=i.length<=10?i:i.slice(0,10));return function e(t,n,i,r,o,s,a){var l,u,h,p,m,b,w,S,_,O,U,M,C,P,L,R;try{l=n[t]}catch(e){}if("object"==(void 0===l?"undefined":g(l))&&l)if("[object Date]"!=(u=v.call(l))||d.call(l,"toJSON"))"function"==typeof l.toJSON&&("[object Number]"!=u&&"[object String]"!=u&&"[object Array]"!=u||d.call(l,"toJSON"))&&(l=l.toJSON(t));else if(l>-1/0&&l<1/0){if(k){for(m=I(l/864e5),h=I(m/365.2425)+1970-1;k(h+1,0)<=m;h++);for(p=I((m-k(h,0))/30.42);k(h,p+1)<=m;p++);m=1+m-k(h,p),w=I((b=(l%864e5+864e5)%864e5)/36e5)%24,S=I(b/6e4)%60,_=I(b/1e3)%60,O=b%1e3}else h=l.getUTCFullYear(),p=l.getUTCMonth(),m=l.getUTCDate(),w=l.getUTCHours(),S=l.getUTCMinutes(),_=l.getUTCSeconds(),O=l.getUTCMilliseconds();l=(h<=0||h>=1e4?(h<0?"-":"+")+x(6,h<0?-h:h):x(4,h))+"-"+x(2,p+1)+"-"+x(2,m)+"T"+x(2,w)+":"+x(2,S)+":"+x(2,_)+"."+x(3,O)+"Z"}else l=null;if(i&&(l=i.call(n,t,l)),null===l)return"null";if("[object Boolean]"==(u=v.call(l)))return""+l;if("[object Number]"==u)return l>-1/0&&l<1/0?""+l:"null";if("[object String]"==u)return A(""+l);if("object"==(void 0===l?"undefined":g(l))){for(P=a.length;P--;)if(a[P]===l)throw c();if(a.push(l),U=[],L=s,s+=o,"[object Array]"==u){for(C=0,P=l.length;C<P;C++)M=e(C,l,i,r,o,s,a),U.push(M===y?"null":M);R=U.length?o?"[\n"+s+U.join(",\n"+s)+"\n"+L+"]":"["+U.join(",")+"]":"[]"}else f(r||l,function(t){var n=e(t,l,i,r,o,s,a);n!==y&&U.push(A(t)+":"+(o?" ":"")+n)}),R=U.length?o?"{\n"+s+U.join(",\n"+s)+"\n"+L+"}":"{"+U.join(",")+"}":"{}";return a.pop(),R}}("",((l={})[""]=e,l),o,s,r,"",[])}}if(!w("json-parse")){var U,M,C=r.fromCharCode,P={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},L=function(){throw U=M=null,u()},R=function(){for(var e,t,n,i,r,o=M,s=o.length;U<s;)switch(r=o.charCodeAt(U)){case 9:case 10:case 13:case 32:U++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=S?o.charAt(U):o[U],U++,e;case 34:for(e="@",U++;U<s;)if((r=o.charCodeAt(U))<32)L();else if(92==r)switch(r=o.charCodeAt(++U)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=P[r],U++;break;case 117:for(t=++U,n=U+4;U<n;U++)(r=o.charCodeAt(U))>=48&&r<=57||r>=97&&r<=102||r>=65&&r<=70||L();e+=C("0x"+o.slice(t,U));break;default:L()}else{if(34==r)break;for(r=o.charCodeAt(U),t=U;r>=32&&92!=r&&34!=r;)r=o.charCodeAt(++U);e+=o.slice(t,U)}if(34==o.charCodeAt(U))return U++,e;L();default:if(t=U,45==r&&(i=!0,r=o.charCodeAt(++U)),r>=48&&r<=57){for(48==r&&(r=o.charCodeAt(U+1))>=48&&r<=57&&L(),i=!1;U<s&&(r=o.charCodeAt(U))>=48&&r<=57;U++);if(46==o.charCodeAt(U)){for(n=++U;n<s&&(r=o.charCodeAt(n))>=48&&r<=57;n++);n==U&&L(),U=n}if(101==(r=o.charCodeAt(U))||69==r){for(43!=(r=o.charCodeAt(++U))&&45!=r||U++,n=U;n<s&&(r=o.charCodeAt(n))>=48&&r<=57;n++);n==U&&L(),U=n}return+o.slice(t,U)}if(i&&L(),"true"==o.slice(U,U+4))return U+=4,!0;if("false"==o.slice(U,U+5))return U+=5,!1;if("null"==o.slice(U,U+4))return U+=4,null;L()}return"$"},T=function(e,t,n){var i=N(e,t,n);i===y?delete e[t]:e[t]=i},N=function(e,t,n){var i,r=e[t];if("object"==(void 0===r?"undefined":g(r))&&r)if("[object Array]"==v.call(r))for(i=r.length;i--;)T(r,i,n);else f(r,function(e){T(r,e,n)});return n.call(e,t,r)};t.parse=function(e,t){var n,i;return U=0,M=""+e,n=function e(t){var n,i;if("$"==t&&L(),"string"==typeof t){if("@"==(S?t.charAt(0):t[0]))return t.slice(1);if("["==t){for(n=[];"]"!=(t=R());i||(i=!0))i&&(","==t?"]"==(t=R())&&L():L()),","==t&&L(),n.push(e(t));return n}if("{"==t){for(n={};"}"!=(t=R());i||(i=!0))i&&(","==t?"}"==(t=R())&&L():L()),","!=t&&"string"==typeof t&&"@"==(S?t.charAt(0):t[0])&&":"==R()||L(),n[t.slice(1)]=e(R());return n}L()}return t}(R()),"$"!=R()&&L(),U=M=null,t&&"[object Function]"==v.call(t)?N(((i={})[""]=n,i),"",t):n}}}return t.runInContext=a,t}if(!s||s.global!==s&&s.window!==s&&s.self!==s||(o=s),r)a(o,r);else{var l=o.JSON,u=o.JSON3,c=!1,h=a(o,o.JSON3={noConflict:function(){return c||(c=!0,o.JSON=l,o.JSON3=u,l=u=null),h}});o.JSON={parse:h.parse,stringify:h.stringify}}}).call(i)});(function(e){for(var t=0,n=["ms","moz","webkit","o"],i=0;i<n.length&&!e.requestAnimationFrame;++i)e.requestAnimationFrame=e[n[i]+"RequestAnimationFrame"],e.cancelAnimationFrame=e[n[i]+"CancelAnimationFrame"]||e[n[i]+"CancelRequestAnimationFrame"];if(e.requestAnimationFrame||(e.requestAnimationFrame=function(n){var i=(new Date).getTime(),r=Math.max(0,16-(i-t)),o=e.setTimeout(function(){n(i+r)},r);return t=i+r,o}),e.cancelAnimationFrame||(e.cancelAnimationFrame=function(t){e.clearTimeout(t)}),!window.console){var r={log:function(){},dir:function(e){for(var t in e)r.log(t+" ",e[t])}};r.warn=r.log,window.console=r}window.console.dir||(window.console.dir=function(e){for(var t in e)window.console.log(t+" ",e[t])}),window.console.warn||(window.console.warn=window.console.log)})(window),he.addEvent=function(e,t,n,i){e.addEventListener?e.addEventListener(t,n,!!i):e.attachEvent&&(e["e"+t+n]=n,e[t+n]=function(){e["e"+t+n](window.event)},e.attachEvent("on"+t,e[t+n]))},he.assign=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n},he.isInternal=!0,he.module=!0,he.JSON=de,he.prototype.setSiteId=function(e){he.isInternal||(this.data.siteid=e)},he.prototype.setSpeId=function(e){this.data&&(this.data.speid=W(e))},function(){try{var e=navigator.userAgent;pe=new he(e)}catch(s){if(s instanceof ne)throw s;window.console.dir(s);var t=new Image(1,1),n="";for(var i in s)n+=i+":"+s[i]+";";var r=encodeURIComponent,o=s.stack?r(s.stack):"";t.src=window.location.protocol+"//wbugs.hiido.com/c.gif?e="+r(n)+"|"+o+"|"+r(window.location.href)+"|"+r(e),t.onload=function(){}}}();var fe=pe.report,ge=pe.Metrics,ye=pe.oldMetrics,me=pe.setSiteId.bind(pe),ve=pe.setSpeId.bind(pe)}.call(this,n(15))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.context=null,this.uid=null,this.appid=0,this.instId=0,this.svcName="",this.fnName="",this.protoType="",this.data=null,this.dataCRC=0,this.serverId=null,this.seqId=null,this.traceId=""}unmarshall(e){this.context=e.popString(),this.uid=e.popUInt64(),this.appid=e.popUInt32(),this.instId=e.popUInt32(),this.svcName=e.popString(),this.fnName=e.popString(),this.protoType=e.popString(),this.data=e.popUint8Array32(),this.dataCRC=e.popUInt32(),this.serverId=e.popUInt64(),this.seqId=e.popUInt64(),this.traceId=e.popString()}toString(){return"context="+this.context+" uid="+JSON.stringify(this.uid)+" appid="+this.appid+" instId="+this.instId+" svcName="+this.svcName+" fnName="+this.fnName+" protoType="+this.protoType+" dataCRC="+this.dataCRC+" serverId="+JSON.stringify(this.serverId)+" seqId="+JSON.stringify(this.seqId)+" traceId="+this.traceId}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(3),r=n(4);t.default=class{constructor(){}marshall(){let e=new i.default;return e.setUri(r.default.PSvcUnicastResURI),e.pushString(this.context),e.marshall()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.appid=0,this.groupType=null,this.groupId=null,this.svcName="",this.fnName="",this.protoType="",this.data=null,this.dataCRC=0,this.serverId=null,this.seqId=null,this.traceId=""}unmarshall(e){this.appid=e.popUInt32(),this.groupType=e.popUInt64(),this.groupId=e.popUInt64(),this.svcName=e.popString(),this.fnName=e.popString(),this.protoType=e.popString(),this.data=e.popUint8Array32(),this.dataCRC=e.popUInt32(),this.serverId=e.popUInt64(),this.seqId=e.popUInt64(),this.traceId=e.popString()}toString(){return"appid="+this.appid+" groupType="+JSON.stringify(this.groupType)+" groupId="+JSON.stringify(this.groupId)+" svcName="+this.svcName+" fnName="+this.fnName+" protoType="+this.protoType+" dataCRC="+this.dataCRC+" serverId="+JSON.stringify(this.serverId)+" seqId="+JSON.stringify(this.seqId)+" traceId="+this.traceId}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0);t.default=class{constructor(){this.uid=null,this.appid=0,this.instId=0,this.code=0,this.desc=""}unmarshall(e){let t=e.popUInt64();this.uid=new i(t.low,t.high,!0).toString(),this.appid=e.popUInt32(),this.instId=e.popUInt32(),this.code=e.popUInt32(),this.desc=e.popString()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.appid=0,this.ugid="",this.svcName="",this.fnName="",this.protoType="",this.data=null,this.dataCRC=0,this.serverId=null,this.seqId=null,this.traceId=""}unmarshall(e){this.appid=e.popUInt32(),this.ugid=e.popString(),this.svcName=e.popString(),this.fnName=e.popString(),this.protoType=e.popString(),this.data=e.popUint8Array32(),this.dataCRC=e.popUInt32(),this.serverId=e.popUInt64(),this.seqId=e.popUInt64(),this.traceId=e.popString()}toString(){return"appid="+this.appid+" ugid="+this.ugid+" svcName="+this.svcName+" fnName="+this.fnName+" protoType="+this.protoType+" dataCRC="+this.dataCRC+" serverId="+JSON.stringify(this.serverId)+" seqId="+JSON.stringify(this.seqId)+" traceId="+this.traceId}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(34);t.default=class{constructor(){this.isMiniProgram=!1,this.bShareAnonymousUid=!0,this.defaultHeaderMap=new Map,this.appid=0,this.thirdUdbAppId="",this.wxAppid="",this.hiidoHost="",this.scode=0,this.bRetry=!1,this.seqId=0,this.seqContext={},this.domain="",this.chlAppkey=0,this.chlPassword="",this.uid="0",this.anonymousUid=0,this.yyid=0,this.instId=Math.round(4294967295*Math.random()),this.credit="",this.token="",this.tokenType=1,this.ticket=null,this.topSid=0,this.subSid=0,this.tryTopSid=0,this.trySubSid=0,this.roomid=0,this.joinProps=new Map,this.asid=0,this.loginedUDB=!1,this.channelJoined=!1,this.exclusiveJoin=!1,this.lastSentJoinChl=-2e3,this.lastSendLeaveChl=0,this.userType=0,this.nick="",this.channelInfo=null,this.channelUserCount={},this.micList={micList:[],linkedMicList:[]},this.userInfos={},this.userGroups={subs:{},unsubs:{}},this.innerBcGroups={},this.uuid=i.v4(),this.bLostConnection=!1,this.everJoinChannel=!1,this.loginUdbStartTs=0,this.logoutUdbStartTs=0,this.loginApStartTs=0,this.logoutApStartTs=0,this.sendChatMsgStartTs=0}getSeqId(){return this.seqId+=1,this.seqId}logout(){this.bRetry=!1,this.seqContext={},this.ticket=null,this.uid="0",this.yyid=0,this.credit=null,this.token=null,this.tokenType=1,this.topSid=0,this.subSid=0,this.tryTopSid=0,this.trySubSid=0,this.asid=0,this.loginedUDB=!1,this.channelJoined=!1,this.userType=0,this.nick="",this.channelInfo=null,this.channelUserCount={},this.micList={},this.userInfos={},this.userGroups={subs:{},unsubs:{}}}}},function(e,t,n){var i,r,o=n(35),s=n(36),a=0,l=0;e.exports=function(e,t,n){var u=t&&n||0,c=t||[],h=(e=e||{}).node||i,p=void 0!==e.clockseq?e.clockseq:r;if(null==h||null==p){var d=o();null==h&&(h=i=[1|d[0],d[1],d[2],d[3],d[4],d[5]]),null==p&&(p=r=16383&(d[6]<<8|d[7]))}var f=void 0!==e.msecs?e.msecs:(new Date).getTime(),g=void 0!==e.nsecs?e.nsecs:l+1,y=f-a+(g-l)/1e4;if(y<0&&void 0===e.clockseq&&(p=p+1&16383),(y<0||f>a)&&void 0===e.nsecs&&(g=0),g>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=f,l=g,r=p;var m=(1e4*(268435455&(f+=122192928e5))+g)%4294967296;c[u++]=m>>>24&255,c[u++]=m>>>16&255,c[u++]=m>>>8&255,c[u++]=255&m;var v=f/4294967296*1e4&268435455;c[u++]=v>>>8&255,c[u++]=255&v,c[u++]=v>>>24&15|16,c[u++]=v>>>16&255,c[u++]=p>>>8|128,c[u++]=255&p;for(var b=0;b<6;++b)c[u+b]=h[b];return t||s(c)}},function(e,t,n){var i=n(35),r=n(36);e.exports=function(e,t,n){var o=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var s=(e=e||{}).random||(e.rng||i)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t)for(var a=0;a<16;++a)t[o+a]=s[a];return t||r(s)}},function(e,t,n){(function(i){var r;
/*!
 * EventEmitter2
 * https://github.com/hij1nx/EventEmitter2
 *
 * Copyright (c) 2013 hij1nx
 * Licensed under the MIT license.
 */!function(o){var s=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},a=10;function l(){this._events={},this._conf&&u.call(this,this._conf)}function u(e){e?(this._conf=e,e.delimiter&&(this.delimiter=e.delimiter),this._maxListeners=e.maxListeners!==o?e.maxListeners:a,e.wildcard&&(this.wildcard=e.wildcard),e.newListener&&(this._newListener=e.newListener),e.removeListener&&(this._removeListener=e.removeListener),e.verboseMemoryLeak&&(this.verboseMemoryLeak=e.verboseMemoryLeak),this.wildcard&&(this.listenerTree={})):this._maxListeners=a}function c(e,t){var n="(node) warning: possible EventEmitter memory leak detected. "+e+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(n+=" Event name: "+t+"."),void 0!==i&&i.emitWarning){var r=new Error(n);r.name="MaxListenersExceededWarning",r.emitter=this,r.count=e,i.emitWarning(r)}else console.error(n),console.trace&&console.trace()}function h(e){this._events={},this._newListener=!1,this._removeListener=!1,this.verboseMemoryLeak=!1,u.call(this,e)}function p(e,t,n,i){if(!n)return[];var r,o,s,a,l,u,c,h=[],d=t.length,f=t[i],g=t[i+1];if(i===d&&n._listeners){if("function"==typeof n._listeners)return e&&e.push(n._listeners),[n];for(r=0,o=n._listeners.length;r<o;r++)e&&e.push(n._listeners[r]);return[n]}if("*"===f||"**"===f||n[f]){if("*"===f){for(s in n)"_listeners"!==s&&n.hasOwnProperty(s)&&(h=h.concat(p(e,t,n[s],i+1)));return h}if("**"===f){for(s in(c=i+1===d||i+2===d&&"*"===g)&&n._listeners&&(h=h.concat(p(e,t,n,d))),n)"_listeners"!==s&&n.hasOwnProperty(s)&&("*"===s||"**"===s?(n[s]._listeners&&!c&&(h=h.concat(p(e,t,n[s],d))),h=h.concat(p(e,t,n[s],i))):h=s===g?h.concat(p(e,t,n[s],i+2)):h.concat(p(e,t,n[s],i)));return h}h=h.concat(p(e,t,n[f],i+1))}if((a=n["*"])&&p(e,t,a,i+1),l=n["**"])if(i<d)for(s in l._listeners&&p(e,t,l,d),l)"_listeners"!==s&&l.hasOwnProperty(s)&&(s===g?p(e,t,l[s],i+2):s===f?p(e,t,l[s],i+1):((u={})[s]=l[s],p(e,t,{"**":u},i+1)));else l._listeners?p(e,t,l,d):l["*"]&&l["*"]._listeners&&p(e,t,l["*"],d);return h}h.EventEmitter2=h,h.prototype.delimiter=".",h.prototype.setMaxListeners=function(e){e!==o&&(this._maxListeners=e,this._conf||(this._conf={}),this._conf.maxListeners=e)},h.prototype.event="",h.prototype.once=function(e,t){return this._once(e,t,!1)},h.prototype.prependOnceListener=function(e,t){return this._once(e,t,!0)},h.prototype._once=function(e,t,n){return this._many(e,1,t,n),this},h.prototype.many=function(e,t,n){return this._many(e,t,n,!1)},h.prototype.prependMany=function(e,t,n){return this._many(e,t,n,!0)},h.prototype._many=function(e,t,n,i){var r=this;if("function"!=typeof n)throw new Error("many only accepts instances of Function");function o(){return 0==--t&&r.off(e,o),n.apply(this,arguments)}return o._origin=n,this._on(e,o,i),r},h.prototype.emit=function(){this._events||l.call(this);var e=arguments[0];if("newListener"===e&&!this._newListener&&!this._events.newListener)return!1;var t,n,i,r,o,s=arguments.length;if(this._all&&this._all.length){if(o=this._all.slice(),s>3)for(t=new Array(s),r=0;r<s;r++)t[r]=arguments[r];for(i=0,n=o.length;i<n;i++)switch(this.event=e,s){case 1:o[i].call(this,e);break;case 2:o[i].call(this,e,arguments[1]);break;case 3:o[i].call(this,e,arguments[1],arguments[2]);break;default:o[i].apply(this,t)}}if(this.wildcard){o=[];var a="string"==typeof e?e.split(this.delimiter):e.slice();p.call(this,o,a,this.listenerTree,0)}else{if("function"==typeof(o=this._events[e])){switch(this.event=e,s){case 1:o.call(this);break;case 2:o.call(this,arguments[1]);break;case 3:o.call(this,arguments[1],arguments[2]);break;default:for(t=new Array(s-1),r=1;r<s;r++)t[r-1]=arguments[r];o.apply(this,t)}return!0}o&&(o=o.slice())}if(o&&o.length){if(s>3)for(t=new Array(s-1),r=1;r<s;r++)t[r-1]=arguments[r];for(i=0,n=o.length;i<n;i++)switch(this.event=e,s){case 1:o[i].call(this);break;case 2:o[i].call(this,arguments[1]);break;case 3:o[i].call(this,arguments[1],arguments[2]);break;default:o[i].apply(this,t)}return!0}if(!this._all&&"error"===e)throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},h.prototype.emitAsync=function(){this._events||l.call(this);var e=arguments[0];if("newListener"===e&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);var t,n,i,r,o,s=[],a=arguments.length;if(this._all){if(a>3)for(t=new Array(a),r=1;r<a;r++)t[r]=arguments[r];for(i=0,n=this._all.length;i<n;i++)switch(this.event=e,a){case 1:s.push(this._all[i].call(this,e));break;case 2:s.push(this._all[i].call(this,e,arguments[1]));break;case 3:s.push(this._all[i].call(this,e,arguments[1],arguments[2]));break;default:s.push(this._all[i].apply(this,t))}}if(this.wildcard){o=[];var u="string"==typeof e?e.split(this.delimiter):e.slice();p.call(this,o,u,this.listenerTree,0)}else o=this._events[e];if("function"==typeof o)switch(this.event=e,a){case 1:s.push(o.call(this));break;case 2:s.push(o.call(this,arguments[1]));break;case 3:s.push(o.call(this,arguments[1],arguments[2]));break;default:for(t=new Array(a-1),r=1;r<a;r++)t[r-1]=arguments[r];s.push(o.apply(this,t))}else if(o&&o.length){if(o=o.slice(),a>3)for(t=new Array(a-1),r=1;r<a;r++)t[r-1]=arguments[r];for(i=0,n=o.length;i<n;i++)switch(this.event=e,a){case 1:s.push(o[i].call(this));break;case 2:s.push(o[i].call(this,arguments[1]));break;case 3:s.push(o[i].call(this,arguments[1],arguments[2]));break;default:s.push(o[i].apply(this,t))}}else if(!this._all&&"error"===e)return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(s)},h.prototype.on=function(e,t){return this._on(e,t,!1)},h.prototype.prependListener=function(e,t){return this._on(e,t,!0)},h.prototype.onAny=function(e){return this._onAny(e,!1)},h.prototype.prependAny=function(e){return this._onAny(e,!0)},h.prototype.addListener=h.prototype.on,h.prototype._onAny=function(e,t){if("function"!=typeof e)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),t?this._all.unshift(e):this._all.push(e),this},h.prototype._on=function(e,t,n){if("function"==typeof e)return this._onAny(e,t),this;if("function"!=typeof t)throw new Error("on only accepts instances of Function");return this._events||l.call(this),this._newListener&&this.emit("newListener",e,t),this.wildcard?(function(e,t){for(var n=0,i=(e="string"==typeof e?e.split(this.delimiter):e.slice()).length;n+1<i;n++)if("**"===e[n]&&"**"===e[n+1])return;for(var r=this.listenerTree,s=e.shift();s!==o;){if(r[s]||(r[s]={}),r=r[s],0===e.length)return r._listeners?("function"==typeof r._listeners&&(r._listeners=[r._listeners]),r._listeners.push(t),!r._listeners.warned&&this._maxListeners>0&&r._listeners.length>this._maxListeners&&(r._listeners.warned=!0,c.call(this,r._listeners.length,s))):r._listeners=t,!0;s=e.shift()}return!0}.call(this,e,t),this):(this._events[e]?("function"==typeof this._events[e]&&(this._events[e]=[this._events[e]]),n?this._events[e].unshift(t):this._events[e].push(t),!this._events[e].warned&&this._maxListeners>0&&this._events[e].length>this._maxListeners&&(this._events[e].warned=!0,c.call(this,this._events[e].length,e))):this._events[e]=t,this)},h.prototype.off=function(e,t){if("function"!=typeof t)throw new Error("removeListener only takes instances of Function");var n,i=[];if(this.wildcard){var r="string"==typeof e?e.split(this.delimiter):e.slice();i=p.call(this,null,r,this.listenerTree,0)}else{if(!this._events[e])return this;n=this._events[e],i.push({_listeners:n})}for(var a=0;a<i.length;a++){var l=i[a];if(n=l._listeners,s(n)){for(var u=-1,c=0,h=n.length;c<h;c++)if(n[c]===t||n[c].listener&&n[c].listener===t||n[c]._origin&&n[c]._origin===t){u=c;break}if(u<0)continue;return this.wildcard?l._listeners.splice(u,1):this._events[e].splice(u,1),0===n.length&&(this.wildcard?delete l._listeners:delete this._events[e]),this._removeListener&&this.emit("removeListener",e,t),this}(n===t||n.listener&&n.listener===t||n._origin&&n._origin===t)&&(this.wildcard?delete l._listeners:delete this._events[e],this._removeListener&&this.emit("removeListener",e,t))}return function e(t){if(t!==o){var n=Object.keys(t);for(var i in n){var r=n[i],s=t[r];s instanceof Function||"object"!=typeof s||null===s||(Object.keys(s).length>0&&e(t[r]),0===Object.keys(s).length&&delete t[r])}}}(this.listenerTree),this},h.prototype.offAny=function(e){var t,n=0,i=0;if(e&&this._all&&this._all.length>0){for(n=0,i=(t=this._all).length;n<i;n++)if(e===t[n])return t.splice(n,1),this._removeListener&&this.emit("removeListenerAny",e),this}else{if(t=this._all,this._removeListener)for(n=0,i=t.length;n<i;n++)this.emit("removeListenerAny",t[n]);this._all=[]}return this},h.prototype.removeListener=h.prototype.off,h.prototype.removeAllListeners=function(e){if(e===o)return!this._events||l.call(this),this;if(this.wildcard)for(var t="string"==typeof e?e.split(this.delimiter):e.slice(),n=p.call(this,null,t,this.listenerTree,0),i=0;i<n.length;i++){n[i]._listeners=null}else this._events&&(this._events[e]=null);return this},h.prototype.listeners=function(e){if(this.wildcard){var t=[],n="string"==typeof e?e.split(this.delimiter):e.slice();return p.call(this,t,n,this.listenerTree,0),t}return this._events||l.call(this),this._events[e]||(this._events[e]=[]),s(this._events[e])||(this._events[e]=[this._events[e]]),this._events[e]},h.prototype.eventNames=function(){return Object.keys(this._events)},h.prototype.listenerCount=function(e){return this.listeners(e).length},h.prototype.listenersAny=function(){return this._all?this._all:[]},(r=function(){return h}.call(t,n,t,e))===o||(e.exports=r)}()}).call(this,n(33))},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{l(i.next(e))}catch(e){o(e)}}function a(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(s,a)}l((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const r=n(1),o=n(37),s=n(84),a=n(0),l=n(34),u=n(105),c=n(49),h=n(108),p=n(12),d=n(4),f=n(14),g=n(17),y=n(117),m=n(118),v=n(119),b=n(120),w=n(121),S=n(122),I=n(123),_=n(124),k="ChannelService",O="SignalService/",x="SignalService/P2P",A=100,U=3e5,M=9e5,C=c.getLogger("hummer.channel");t.default=class extends h.default{constructor(e,t){super(e),this.pollTimer=null,this.pollChannelTimer=null,this.offline_check_duration=30,0==this.error.code?(this.setBaseCallbacks({onConnectStatus:this.onConnectionStatus.bind(this),onLoginStatus:this.onLoginStatus.bind(this)}),t.onReceiveMessage&&(this.messageCallback=t.onReceiveMessage),t.onReceiveChannelMessage&&(this.messageChannelCallback=t.onReceiveChannelMessage),t.onNotifyJoinChannel&&(this.notifyJoinChannelCallback=t.onNotifyJoinChannel),t.onNotifyLeaveChannel&&(this.notifyLeaveChannelCallback=t.onNotifyLeaveChannel),t.onNotifyUserAttributesSet&&(this.notifyUserAttributesSetCb=t.onNotifyUserAttributesSet),t.onNotifyUserAttributesDelete&&(this.notifyUserAttributesDeleteCb=t.onNotifyUserAttributesDelete),t.onerror&&(this.errorCallback=t.onerror),this.initPullStatus(),this.start(),this.onerror({code:0,msg:"ok"})):t.onerror&&t.onerror(this.error)}initPullStatus(){this.hasFirstGetMaxSeqSuccess=!1,this.firstGetMaxSeqIsOnGoing=!1,this.receivedMaxSeqId=a.fromNumber(0),this.maxPushSeqId=a.fromNumber(0),this.pullMsgIsOnGoing=!1,this.channelMap=new Map}stop(){super.stop(),this.pollTimer&&(clearInterval(this.pollTimer),delete this.pollTimer,this.pollTimer=null),this.pollChannelTimer&&(clearInterval(this.pollChannelTimer),delete this.pollChannelTimer,this.pollChannelTimer=null)}setMessageCallback(e){this.messageCallback=e}setNotifyJoinChannelCallback(e){this.notifyJoinChannelCallback=e}setNotifyLeaveChannelCallback(e){this.notifyLeaveChannelCallback=e}setErrorCallBack(e){this.errorCallback=e}onerror(e){this.errorCallback&&this.errorCallback(e)}onConnectionStatus(e){switch(e){case p.ConnectStatus.Disconnected:this.resetPullStateForChannelList();break;case p.ConnectStatus.Connecting:case p.ConnectStatus.Connected:}}getFirstGetMaxSeqIdAfterLogin(){return i(this,void 0,void 0,function*(){try{const e=yield this.getMaxSeqId();C.info("first max seq id:",e,typeof e.maxSeqId)(),this.receivedMaxSeqId=e.maxSeqId,this.hasFirstGetMaxSeqSuccess=!0,this.firstGetMaxSeqIsOnGoing=!1,C.info("getFirstGetMaxSeqIdAfterLogin: seq:",e.maxSeqId)(),this.pullMsgIfAny(),this.pollTimer||(this.pollTimer=setInterval(this.pullMsgPeriod.bind(this),U))}catch(e){C.error("failed to get first Max Seq Id:",e)(),this.firstGetMaxSeqIsOnGoing=!1,setTimeout(this.getFirstGetMaxSeqIdAfterLogin.bind(this),2e3)}})}getBcFirstGetMaxSeqIdAfterJoin(e){return i(this,void 0,void 0,function*(){if(e)try{const t=yield this.getGrpSysMaxSeqId(e.channelId);C.info("first group max seq id:",t,typeof t.maxSeqId)(),e.receivedBcMaxSeqId=t.maxSeqId,e.hasBcFirstGetMaxSeqSuccess=!0,e.firstBcGetMaxSeqIsOnGoing=!1,C.info("getBcFirstGetMaxSeqIdAfterJoin: receivedBcMaxSeqId:",t.maxSeqId)(),this.pullGroupSysMsgIfAny(e)}catch(t){C.error("failed to get group first Max Seq Id:",t)(),e.firstBcGetMaxSeqIsOnGoing=!1,setTimeout(this.getBcFirstGetMaxSeqIdAfterJoin.bind(this),2e3,e)}})}onLoginStatus(e){switch(e){case p.LoginStatus.Idle:break;case p.LoginStatus.Logined:this.pullMsgPeriod().catch(e=>{C.error("failed to pull msg")()}),this.pullGroupSysMsgPeriodForChannelList(),this.joinChannelBcForChannelList(),this.pollChannelTimer||(this.pollChannelTimer=setInterval(this.pullGroupSysMsgPeriodForChannelList.bind(this),M)),this.hasFirstGetMaxSeqSuccess||this.firstGetMaxSeqIsOnGoing||this.getFirstGetMaxSeqIdAfterLogin().catch(e=>{C.error("failed to getFirstGetMaxSeqIdAfterLogin:",e)()})}}onUnicast(e){const t=this.decodeUnicastRes(e);t instanceof o.proto.IMPushMsgRequest?this.onReceivePushMsgRequest(t):t instanceof o.proto.UnreliableIMPushMsgRequest?t.msg instanceof o.proto.UnreliableMsg&&this.notifyUnreliableMessageListener(t):C.info("ignore this  unicast msg")()}onReceivePushMsgRequest(e){C.info("SignalService: receive IMPushMsgRequest:\n",e)(),e.topic===x&&e.region===this.env.area&&e.envName===this.env.name&&e.envType==this.env.type?(this.maxPushSeqId=e.seqId,this.hasFirstGetMaxSeqSuccess?this.pullMsgIfAny().catch(e=>{C.error("pullMsgIfAny failed:",e)()}):C.info("receive push msg. but wait for first get max seq success")()):C.info("ignore this IMPushMsgRequest as it not for our topic or env")()}onBroadcast(e){const t=this.decodeBroadcastRes(e);t instanceof o.proto.IMPushGroupSysMsgRequest?this.onReceivePushGroupMsgRequest(t):t instanceof o.proto.UnreliableIMPushGroupSysMsgRequest?(C.info("ChannelService: receive UnreliableIMPushGroupSysMsgRequest:\n",t)(),this.notifyMessageUnreliableChannelListener(t)):C.info("ignore onBroadcast")()}decodeBroadcastRes(e){return s.default.decodeBroadcastRes(e)}onReceivePushGroupMsgRequest(e){if(C.info("ChannelService: receive IMPushGroupSysMsgRequest:\n",e)(),e.region!==this.env.area||e.envName!==this.env.name||e.envType!=this.env.type)return void C.info("ignore this IMPushGroupSysMsgRequest as it not for env")();let t=this.getChannelIdFromTopic(e.topic),n=this.channelMap.get(t);void 0!==n?(n.maxBcPushSeqId=e.seqId,n.hasBcFirstGetMaxSeqSuccess?this.pullGroupSysMsgIfAny(n).catch(e=>{C.error("pullGroupsysMsgIfAny failed:",e)()}):C.info("receive group push msg. but wait for first get max seq success")()):C.warn("IMPushGroupSysMsgRequest: not found group_id="+e.groupId.toString())()}pullMsgIfAny(){return i(this,void 0,void 0,function*(){if(this.receivedMaxSeqId>=this.maxPushSeqId)C.info(`no pull needed. receivedMaxSeqId:${this.receivedMaxSeqId}, maxPushSeqId: ${this.maxPushSeqId}`)();else if(this.pullMsgIsOnGoing)C.info("another pull msg is ongoing")();else{this.pullMsgIsOnGoing=!0;try{const e=yield this.pullMsgOnce();e&&e.hasMore?(C.info("has more. schedule a new pull")(),setTimeout(this.pullMsgIfAny.bind(this),100)):this.receivedMaxSeqId<this.maxPushSeqId&&(C.info("has new push seq id. schedule a new pull.")(),setTimeout(this.pullMsgIfAny.bind(this),100))}catch(e){C.error("failed to pull msgs, retry!",e)(),setTimeout(this.pullMsgIfAny.bind(this),2e3)}finally{this.pullMsgIsOnGoing=!1}}})}notifyMessageListener(e){if(null!=this.messageCallback)for(const t of e.msgs)if(t.action==o.proto.Action.kNotifySignalMessage){let e=o.proto.SignalMessage.decode(t.content);this.messageCallback({message:{type:e.type,data:e.content,appExtras:e.extensions,serverAcceptedTs:t.timestamp.toString()},fromUid:e.fromUid.toString()})}else C.warn("unexpected action:",t.action)();else C.error("no message callback set!")()}notifyUnreliableMessageListener(e){if(null!=this.messageCallback)if(e.msg.action==o.proto.Action.kNotifySignalMessage){if(C.info("UnreliableIMPushMsgRequest: ",e.msg)(),e.msg.action==o.proto.Action.kNotifySignalMessage){let t=o.proto.SignalMessage.decode(e.msg.content);this.messageCallback({message:{type:t.type,data:t.content,appExtras:t.extensions,serverAcceptedTs:e.msg.timestamp.toString()},fromUid:t.fromUid.toString()})}}else C.warn("unexpected action:",e.msg.action)();else C.error("no message callback set!")()}pullGroupSysMsgIfAny(e){return i(this,void 0,void 0,function*(){if(e)if(e.pullBcMsgIsOnGoing)C.info("another group pull msg is ongoing")();else{e.pullBcMsgIsOnGoing=!0;try{const t=yield this.pullGroupSysMsgOnce(e);t&&t.hasMore?(C.info("has more. schedule a new pull")(),setTimeout(this.pullGroupSysMsgIfAny.bind(this),100,e)):e.pullBcMsgIsOnGoing=!1}catch(t){C.error("failed to pull group msgs, retry!",t)(),setTimeout(this.pullGroupSysMsgIfAny.bind(this),2e3,e)}finally{e.pullBcMsgIsOnGoing=!1}}})}notifyMessageGroupOnlineListener(e,t){for(const n of e.msgs)switch(n.action){case o.proto.Action.kNotifyJoinSignalGroup:case o.proto.Action.kNotifyLeaveSignalGroup:break;case o.proto.Action.kNotifySignalMessage:{let e=o.proto.SignalMessage.decode(n.content);if(!this.messageChannelCallback)return;this.messageChannelCallback({message:{type:e.type,data:e.content,appExtras:e.extensions,serverAcceptedTs:n.timestamp.toString(),channelId:t},fromUid:e.fromUid.toString()});break}case o.proto.Action.kNotifyUinfoChange:{let e=o.proto.NotifyUinfoChange.decode(n.content);this.notifyUserAttributesChangeCb(e);break}case o.proto.Action.kNotifyUserOnlineStatusChange:{let e=o.proto.NotifyUserStatusChange.decode(n.content);console.log("userOnlineGrp:",e),this.notifyUserOnlineStatusChange(e);break}default:C.warn("unexpected group action:",n.action)()}}notifyUserOnlineStatusChange(e){if(!this.notifyJoinChannelCallback)return;let t=new Array;for(const n of e.joinuids)t.push(n.toString());if(t.length>0&&this.notifyJoinChannelCallback({uids:t,channelId:e.groupId}),!this.notifyLeaveChannelCallback)return;let n=new Array;for(const t of e.leaveuids)n.push(t.toString());n.length>0&&this.notifyLeaveChannelCallback({uids:n,channelId:e.groupId})}notifyMessageUnreliableChannelListener(e){if(e.region!==this.env.area||e.envName!==this.env.name||e.envType!=this.env.type)return void C.info("ignore this UnreliableIMPushGroupSysMsgRequest as it not for our env")();let t=this.getChannelIdFromTopic(e.topic);if(void 0!==this.channelMap.get(t)){if(this.messageChannelCallback&&e.msg instanceof o.proto.UnreliableMsg){if(e.msg.uri!==k)return void C.info("invalid uri:"+e.msg.uri)();if(e.msg.action==o.proto.Action.kNotifySignalMessage){let t=o.proto.SignalMessage.decode(e.msg.content);this.messageChannelCallback({message:{type:t.type,data:t.content,appExtras:t.extensions,serverAcceptedTs:e.msg.timestamp.toString()},fromUid:t.fromUid.toString()})}}}else C.warn("IMPushGroupSysMsgRequest: not found group_id="+e.groupId.toString())()}notifyUserAttributesChangeCb(e){C.info("notifyUserAttributesChangeCb: ",e)();let t={uid:e.uid.toString(),channelId:e.groupId,attributes:e.infos};switch(e.opType){case o.proto.NotifyUinfoChange.OpType.kOpSet:if(!this.notifyUserAttributesSetCb)return;this.notifyUserAttributesSetCb(t);break;case o.proto.NotifyUinfoChange.OpType.kOpDel:if(!this.notifyUserAttributesDeleteCb)return;this.notifyUserAttributesDeleteCb(t);break;default:C.warn("not support opType=",e.opType)()}}pullMsgOnce(){return i(this,void 0,void 0,function*(){if(!this.hasFirstGetMaxSeqSuccess)return C.info("the first GetMaxSeq request it not finished yet. wait")(),null;const e=yield this.pullMsg({start_seq_id:this.receivedMaxSeqId,limit:A});return e.maxSeqId instanceof a&&e.maxSeqId.greaterThan(0)?(this.receivedMaxSeqId=e.maxSeqId,C.info("========receivedMaxSeqId is updated to",this.receivedMaxSeqId.toString())()):C.info("pullMsgOnce: has_more=",e.hasMore)(),e instanceof o.proto.PullMsgResponse?(this.notifyMessageListener(e),e):(C.info("pullMsgOnce: unkown sys msg")(),null)})}pullMsgPeriod(){return i(this,void 0,void 0,function*(){if(this.pullMsgIsOnGoing)C.info("another pull msg is ongoing")();else{this.pullMsgIsOnGoing=!0;try{const e=yield this.pullMsgOnce();null!=e&&e.hasMore&&setTimeout(this.pullMsgPeriod.bind(this),100)}catch(e){C.error("failed to pull msg period:",e)()}finally{this.pullMsgIsOnGoing=!1}}})}resetPullStateForChannelList(){for(let[e,t]of this.channelMap)t.pullBcMsgIsOnGoing=!1}pullGroupSysMsgPeriodForChannelList(){return i(this,void 0,void 0,function*(){for(let[e,t]of this.channelMap)C.info(t.channelId+" pullGroupSysMsgPeriodForChannelList")(),setTimeout(this.pullGroupSysMsgPeriod.bind(this),1e3,t)})}pullGroupSysMsgPeriod(e){return i(this,void 0,void 0,function*(){if(e)if(C.info(e.channelId," poll group msg period......")(),e.pullBcMsgIsOnGoing)C.info("another pull group msg is ongoing")();else{e.pullBcMsgIsOnGoing=!0;try{const t=yield this.pullGroupSysMsgOnce(e);t&&t.hasMore&&setTimeout(this.pullGroupSysMsgPeriod.bind(this),100,e)}catch(e){C.error("failed to pull group msg period:",e)()}finally{e.pullBcMsgIsOnGoing=!1}}})}pullGroupSysMsgOnce(e){return i(this,void 0,void 0,function*(){if(!e)return null;let t={start_seq_id:e.receivedBcMaxSeqId,limit:A,channelId:e.channelId};C.info(e.channelId+" pullGroupSysMsgOnce: request=",t)();const n=yield this.pullGroupSysMsg({start_seq_id:e.receivedBcMaxSeqId,limit:A,channelId:e.channelId});return C.info("pullGroupSysMsgOnce res:",n)(),n.maxSeqId instanceof a&&n.maxSeqId.greaterThan(0)?(e.receivedBcMaxSeqId=n.maxSeqId,C.info("========receivedBcMaxSeqId is updated to",e.receivedBcMaxSeqId.toString())()):C.info("pullGroupSysMsgOnce: has_more=",n.hasMore)(),n instanceof o.proto.PullGroupSysMsgResponse?(this.notifyMessageGroupOnlineListener(n,e.channelId),n):(C.info("pullGroupSysMsgOnce: unkown group sys msg")(),null)})}decodeUnicastRes(e){return s.default.decodeUnicastRes(e)}decodeRouteRes(e){return s.default.decodeRouteRes(e)}getMaxSeqId(){return i(this,void 0,void 0,function*(){const e=o.proto.GetMaxSeqIdRequest;let t=e.create({logId:this.generateLogId(),appId:a.fromNumber(this.appid),selfUid:a.fromString(this.uid),topic:x});C.info("ChannelService.GetMaxSeqId:",t,"logId=",t.logId)();let n=e.encode(t).finish();const i=yield this.send(this.serviceName,"cim.proto.ProxyService.GetMaxSeqId",n);return i instanceof o.proto.GetMaxSeqIdResponse?0==i.code?(C.info("get max seq id res:",i,", type: ",typeof i.maxSeqId)(),"number"==typeof i.maxSeqId?{maxSeqId:a.fromNumber(i.maxSeqId)}:{maxSeqId:i.maxSeqId}):(C.error("getMaxSeqId failed",i)(),Promise.reject({code:i.code,msg:i.msg})):(C.error("getMaxSeqId: unexpected response:",i)(),Promise.reject({code:-1,msg:"unexpected response: "+i}))})}getGrpSysMaxSeqId(e){return i(this,void 0,void 0,function*(){let t=O+e,n=this.calcDJBHash(t);const i=o.proto.GetGrpSysMaxSeqIdRequest;let r=i.create({logId:this.generateLogId(),appId:a.fromNumber(this.appid),selfUid:a.fromString(this.uid),groupId:n,topic:t});C.info("SignalService.getGrpSysMaxSeqId: ",r,"logId=",r.logId)();let s=i.encode(r).finish();const l=yield this.send(this.serviceName,"cim.proto.ProxyService.GetGrpSysMaxSeqId",s);return l instanceof o.proto.GetGrpSysMaxSeqIdResponse?0==l.code?(C.info("get group max seq id res: ",l,", type: ",typeof l.maxSeqId)(),"number"==typeof l.maxSeqId?{maxSeqId:a.fromNumber(l.maxSeqId)}:{maxSeqId:l.maxSeqId}):(C.error("getGrpSysMaxSeqId failed",l)(),Promise.reject({code:l.code,msg:l.msg})):(C.error("getGrpSysMaxSeqId: unexpected response:",l)(),Promise.reject({code:-1,msg:"unexpected response: "+l}))})}sendMessageToUser(e){return i(this,void 0,void 0,function*(){const t=o.proto.P2PSignalRequest;let n=t.create({logId:this.generateLogId(),appId:a.fromNumber(this.appid),fromUid:a.fromString(this.uid),toUid:a.fromString(e.receiver),type:e.type,content:e.content,option:{reliable:e.option.reliable||"yes"},uuid:l.v4(),extension:e.extension,extensions:e.appExtras});C.info("ChannelService.sendMessageToUser:",n,"logId=",n.logId)();let i=t.encode(n).finish();const r=yield this.send(this.serviceName,"cim.proto.ProxyService.P2PSignal",i);return r instanceof o.proto.P2PSignalResponse?0==r.code?{code:r.code,msg:r.msg,timestamp:r.timestamp.toString()}:(C.error("sendMessageToUser failed",r)(),Promise.reject({code:r.code,msg:r.msg})):(C.error("sendMessageToUser: unexpected response:",r)(),Promise.reject({code:-1,msg:"unexpected response: "+r}))})}sendMessageToChannel(e){return i(this,void 0,void 0,function*(){let t=!0;t=!(!e.option||"yes"!==e.option.reliable);let n=new b.default;n.appid=this.appid,n.uid=this.uid,n.channelId=e.channelId,n.type=e.type,n.content=e.content,n.reliable=t;let i=n.marshall();return this.send("svc_chn_channel_service_auther","SendBroadcast",i)})}setUserAttributes(e){return i(this,void 0,void 0,function*(){let t=new S.default;t.appid=this.appid,t.uid=this.uid,t.channelId=e.channelId,t.infos=r.default.toMap(e.attributes);let n=t.marshall();return this.send("svc_chn_channel_service_auther","SetUserInfo",n)})}deleteUserAttributesByKeys(e){return i(this,void 0,void 0,function*(){let t=new w.default;t.appid=this.appid,t.uid=this.uid,t.channelId=e.channelId,t.keys=e.keys;let n=t.marshall();return this.send("svc_chn_channel_service_auther","DeleteUserInfo",n)})}join(e){return new Promise((t,n)=>{let i=new I.default;i.appid=this.appid,i.uid=this.uid,i.channelId=e.channelId,e.extra&&(i.extra=r.default.toMap(e.extra)),C.info("joinChannel: ",JSON.stringify(i))();let o=i.marshall();this.send("svc_chn_channel_service_auther","JoinChannelService",o).then(i=>{if(C.info("JoinChannelService: "+JSON.stringify(i))(),0==i.rescode){this.setCheckOfflineTime(i.props);let r=this.channelMap.get(e.channelId);r.firstBcGetMaxSeqIsOnGoing||this.getBcFirstGetMaxSeqIdAfterJoin(r).catch(e=>{C.error("failed to getBcFirstGetMaxSeqIdAfterJoin:",e)()}),this.joinChannelBc(e.channelId).then(e=>{t(e)}).catch(e=>{n(e)})}else t({rescode:i.rescode,msg:i.msg})}).catch(e=>{n(e)})})}setCheckOfflineTime(e){e.hasOwnProperty("props_offline_check_duration")&&(this.offline_check_duration=Number(e.props_offline_check_duration)),C.info("offline_check_duration="+this.offline_check_duration)()}joinChannel(e){if(r.default.isEmpty(e.channelId))return Promise.resolve({rescode:-1,msg:"channelId is invalid!"});if(this.isInChannel(e.channelId))C.info(e.channelId,"already in channel")();else{let t=O+e.channelId,n=this.calcDJBHash(t).toNumber();C.info("joinChannel: group_id=",n)();let i={channelId:e.channelId,groupId:n,hasBcFirstGetMaxSeqSuccess:!1,firstBcGetMaxSeqIsOnGoing:!1,receivedBcMaxSeqId:a.fromNumber(0),maxBcPushSeqId:a.fromNumber(0),pullBcMsgIsOnGoing:!1};this.channelMap.set(e.channelId,i)}return this.join({channelId:e.channelId,extra:e.extra})}leaveChannel(e){return r.default.isEmpty(e.channelId)?Promise.resolve({rescode:-1,msg:"channelId is invalid!"}):(this.isInChannel(e.channelId)||C.info(e.channelId,"not in channel")(),new Promise((t,n)=>{let i=new _.default;i.appid=this.appid,i.uid=this.uid,i.channelId=e.channelId,e.extra&&(i.extra=r.default.toMap(e.extra)),C.info("leaveChannel: ",JSON.stringify(i))();let o=i.marshall();this.send("svc_chn_channel_service_auther","LeaveChannelService",o).then(i=>{C.info("LeaveChannelService: "+JSON.stringify(i))(),0==i.rescode?this.leaveChannelBc(e.channelId).then(n=>{t(n),this.channelMap.delete(e.channelId)}).catch(e=>{n(e)}):t({rescode:i.rescode,msg:i.msg})}).catch(e=>{n(e)})}))}getChannelUserList(e){if(r.default.isEmpty(e.channelId))return Promise.resolve({rescode:-1,msg:"channelId is invalid!"});let t=new m.default;t.appid=this.appid,t.channelId=e.channelId,C.info("getChannelUserList: ",JSON.stringify(t))();let n=t.marshall();return this.send("svc_chn_channel_service_query","GetUserList",n)}getChannelUserListByAtrribute(e){if(r.default.isEmpty(e.channelId))return Promise.resolve({rescode:-1,msg:"channelId is invalid!"});let t=new v.default;t.appid=this.appid,t.channelId=e.channelId,t.key=e.key,t.prop=e.prop,C.info("getChannelUserListByAtrribute: ",JSON.stringify(t))();let n=t.marshall();return this.send("svc_chn_channel_service_query","GetSpecificUserList",n)}pullMsg(e){return i(this,void 0,void 0,function*(){if(r.default.isEmpty(e.start_seq_id))return Promise.reject({code:-1,msg:"start_seq_id is empty!"});if(0==e.limit)return Promise.reject({code:-1,msg:"limit is zero!"});let t;t="string"==typeof e.start_seq_id?a.fromString(e.start_seq_id):e.start_seq_id;const n=o.proto.PullMsgRequest;let i=n.create({logId:this.generateLogId(),appId:a.fromNumber(this.appid),selfUid:a.fromString(this.uid),exclusiveStartSeqId:t,limit:e.limit,statisDeliveryDelay:!0,topic:x});C.info("ChannelService.PullMsg:",i)();let s=n.encode(i).finish();const l=yield this.send(this.serviceName,"cim.proto.ProxyService.PullMsg",s);return l instanceof o.proto.PullMsgResponse?0==l.code?(C.info("pull msg res:",l)(),l):(C.error("pullMsg failed",l)(),Promise.reject({code:l.code,msg:l.msg})):(C.error("pullMsg: unexpected response:",l)(),Promise.reject({code:-1,msg:"unexpected response: "+l}))})}pullGroupSysMsg(e){return i(this,void 0,void 0,function*(){if(r.default.isEmpty(e.start_seq_id))return Promise.reject({code:-1,msg:"start_seq_id is empty!"});if(0==e.limit)return Promise.reject({code:-1,msg:"limit is zero!"});let t;t="string"==typeof e.start_seq_id?a.fromString(e.start_seq_id):e.start_seq_id;let n=O+e.channelId,i=this.calcDJBHash(n);const s=o.proto.PullGroupSysMsgRequest;let l=s.create({logId:this.generateLogId(),appId:a.fromNumber(this.appid),selfUid:a.fromString(this.uid),groupId:i,exclusiveStartSeqId:t,limit:e.limit,statisDeliveryDelay:!0,topic:n});C.info("ChannelService.pullGroupSysMsg: ",l)();let u=s.encode(l).finish();const c=yield this.send(this.serviceName,"cim.proto.ProxyService.PullGroupSysMsg",u);return c instanceof o.proto.PullGroupSysMsgResponse?0==c.code?(C.info("pull group msg res: ",c)(),c):(C.error("pullGroupSysMsg failed",c)(),Promise.reject({code:c.code,msg:c.msg})):(C.error("pullGroupSysMsg: unexpected response:",c)(),Promise.reject({code:-1,msg:"unexpected response: "+c}))})}queryOnlineStatusForUser({uid:e}){return i(this,void 0,void 0,function*(){const t=o.proto.CheckUserIsOnlineRequest;let n=t.create({logId:this.generateLogId(),appId:a.fromNumber(this.appid),selfUid:a.fromString(this.uid),uid:a.fromString(e)});C.info("ChannelService.CheckUserIsOnline: ",n)();let i=t.encode(n).finish();const r=yield this.send(this.serviceName,"cim.proto.ProxyService.CheckUserIsOnline",i);return r instanceof o.proto.CheckUserIsOnlineResponse?(C.info("CheckUserIsOnline res: ",r)(),0==r.code?{code:r.code,uid:e,isOnline:r.isOnline}:(C.error("queryOnlineStatusForUser failed: ",r)(),Promise.reject({code:r.code,msg:r.msg}))):(C.error("queryOnlineStatusForUser: unexpected response:",r)(),Promise.reject({code:-1,msg:"unexpected response "+r}))})}getInstance(){if(this.h5_g_globals.bLostConnection)return Promise.resolve({rescode:-1,msg:"disconnected"});let e=[];for(let[t,n]of this.channelMap)e.push(t);return C.info("channelList: "+JSON.stringify(e))(),Promise.resolve({rescode:200,uid:this.h5_g_globals.uid,instanceId:this.h5_g_globals.instId,isAnonymous:0==this.h5_g_globals.userType,appid:this.h5_g_globals.appid})}joinChannelBc(e){return new Promise((t,n)=>{let i=O+e,r=this.calcDJBHash(i);const o="hummer:"+this.appid.toString()+":"+i+":"+r.toString();let s={subs:[o]};this.h5_g_globals.innerBcGroups[o]=1,C.info("joinChannelBc innerBcGroups="+JSON.stringify(this.h5_g_globals.innerBcGroups))(),this.subscribeBc(s).then(e=>{t({rescode:e.resCode})}).catch(e=>{n(e)})})}joinChannelBcForChannelList(){for(let[e,t]of this.channelMap)this.joinChannelBc(t.channelId)}leaveChannelBc(e){return C.info("leaveChannelBc")(),new Promise((t,n)=>{let i=O+e,r=this.calcDJBHash(i),o={unsubs:["hummer:"+this.appid.toString()+":"+i+":"+r.toString()]};this.subscribeBc(o).then(e=>{t({rescode:e.resCode})}).catch(e=>{n(e)})})}subscribeBc(e){const t=this.h5_g_globals;let n=t.getSeqId().toString(),i=new Promise((i,r)=>{let o=new y.default;if(o.context=n,o.appid=t.appid,e.subs){o.join=e.subs;let n=e.subs.length;for(let i=0;i<n;++i){let n=e.subs[i];t.userGroups.subs[n]=1}}if(e.unsubs){o.leave=e.unsubs;let n=e.unsubs.length;for(let i=0;i<n;++i){let n=e.unsubs[i];t.userGroups.unsubs[n]=1}}C.info("subscribeBc "+JSON.stringify(o))();let s=o.marshall();if(this.ap.appidReady())this.ap.send(s);else{let e={data:s,resolve:i,reject:r,origin:!0};this.ap.sendBuf.push(e)}t.seqContext[n]={resolve:i,reject:r,subReqStartTs:f.default.now(),traceId:"web_"+t.instId+"_"+o.context}}),o=r.default.DelayPromise(11e3).then(()=>{let e=t.seqContext[n];if(e){C.warn("subscribeBc seqId:"+n+" timeout.");let i=new Map;throw this.fillStatMap(i,d.default.PSvcSubsGroupReqURI,e),i.set("rrt",11e3),i.set("cc",-3),this.checkAndSendStatMap(i),g.default.report(t.scode,"svc_sub","","",11e3,-3),delete t.seqContext[n],new Error("subscribe timeout after 11000 ms")}});return Promise.race([i,o])}isInChannel(e){return!!this.channelMap.get(e)}calcDJBHash(e){const t=u.Base64.encode(e);let n=a.fromInt(5381,!0);for(let e=0;e<t.length;++e){let i=n.shl(5);n=(n=n.add(i)).add(a.fromInt(t.charCodeAt(e),!0))}return new a(n.getLowBitsUnsigned(),0,!0)}getChannelIdFromTopic(e){let t=e.split("/");return 2!=t.length?null:"SignalService"==t[0]?t[1]:void 0}},c.exportControlWithName("HUMMER_LOG_HOOK")},function(e,t,n){"use strict";e.exports=n(38)},function(e,t,n){"use strict";var i=t;i.length=function(e){var t=e.length;if(!t)return 0;for(var n=0;--t%4>1&&"="===e.charAt(t);)++n;return Math.ceil(3*e.length)/4-n};for(var r=new Array(64),o=new Array(123),s=0;s<64;)o[r[s]=s<26?s+65:s<52?s+71:s<62?s-4:s-59|43]=s++;i.encode=function(e,t,n){for(var i,o=null,s=[],a=0,l=0;t<n;){var u=e[t++];switch(l){case 0:s[a++]=r[u>>2],i=(3&u)<<4,l=1;break;case 1:s[a++]=r[i|u>>4],i=(15&u)<<2,l=2;break;case 2:s[a++]=r[i|u>>6],s[a++]=r[63&u],l=0}a>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,s)),a=0)}return l&&(s[a++]=r[i],s[a++]=61,1===l&&(s[a++]=61)),o?(a&&o.push(String.fromCharCode.apply(String,s.slice(0,a))),o.join("")):String.fromCharCode.apply(String,s.slice(0,a))};i.decode=function(e,t,n){for(var i,r=n,s=0,a=0;a<e.length;){var l=e.charCodeAt(a++);if(61===l&&s>1)break;if(void 0===(l=o[l]))throw Error("invalid encoding");switch(s){case 0:i=l,s=1;break;case 1:t[n++]=i<<2|(48&l)>>4,i=l,s=2;break;case 2:t[n++]=(15&i)<<4|(60&l)>>2,i=l,s=3;break;case 3:t[n++]=(3&i)<<6|l,s=0}}if(1===s)throw Error("invalid encoding");return n-r},i.test=function(e){return/^(?:[A-Za-z0-9+\/]{4})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(e)}},function(e,t,n){"use strict";function i(){this._listeners={}}e.exports=i,i.prototype.on=function(e,t,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:n||this}),this},i.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var n=this._listeners[e],i=0;i<n.length;)n[i].fn===t?n.splice(i,1):++i;return this},i.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var n=[],i=1;i<arguments.length;)n.push(arguments[i++]);for(i=0;i<t.length;)t[i].fn.apply(t[i++].ctx,n)}return this}},function(e,t,n){"use strict";function i(e){return"undefined"!=typeof Float32Array?function(){var t=new Float32Array([-0]),n=new Uint8Array(t.buffer),i=128===n[3];function r(e,i,r){t[0]=e,i[r]=n[0],i[r+1]=n[1],i[r+2]=n[2],i[r+3]=n[3]}function o(e,i,r){t[0]=e,i[r]=n[3],i[r+1]=n[2],i[r+2]=n[1],i[r+3]=n[0]}function s(e,i){return n[0]=e[i],n[1]=e[i+1],n[2]=e[i+2],n[3]=e[i+3],t[0]}function a(e,i){return n[3]=e[i],n[2]=e[i+1],n[1]=e[i+2],n[0]=e[i+3],t[0]}e.writeFloatLE=i?r:o,e.writeFloatBE=i?o:r,e.readFloatLE=i?s:a,e.readFloatBE=i?a:s}():function(){function t(e,t,n,i){var r=t<0?1:0;if(r&&(t=-t),0===t)e(1/t>0?0:2147483648,n,i);else if(isNaN(t))e(2143289344,n,i);else if(t>3.4028234663852886e38)e((r<<31|2139095040)>>>0,n,i);else if(t<1.1754943508222875e-38)e((r<<31|Math.round(t/1.401298464324817e-45))>>>0,n,i);else{var o=Math.floor(Math.log(t)/Math.LN2);e((r<<31|o+127<<23|8388607&Math.round(t*Math.pow(2,-o)*8388608))>>>0,n,i)}}function n(e,t,n){var i=e(t,n),r=2*(i>>31)+1,o=i>>>23&255,s=8388607&i;return 255===o?s?NaN:r*(1/0):0===o?1.401298464324817e-45*r*s:r*Math.pow(2,o-150)*(s+8388608)}e.writeFloatLE=t.bind(null,r),e.writeFloatBE=t.bind(null,o),e.readFloatLE=n.bind(null,s),e.readFloatBE=n.bind(null,a)}(),"undefined"!=typeof Float64Array?function(){var t=new Float64Array([-0]),n=new Uint8Array(t.buffer),i=128===n[7];function r(e,i,r){t[0]=e,i[r]=n[0],i[r+1]=n[1],i[r+2]=n[2],i[r+3]=n[3],i[r+4]=n[4],i[r+5]=n[5],i[r+6]=n[6],i[r+7]=n[7]}function o(e,i,r){t[0]=e,i[r]=n[7],i[r+1]=n[6],i[r+2]=n[5],i[r+3]=n[4],i[r+4]=n[3],i[r+5]=n[2],i[r+6]=n[1],i[r+7]=n[0]}function s(e,i){return n[0]=e[i],n[1]=e[i+1],n[2]=e[i+2],n[3]=e[i+3],n[4]=e[i+4],n[5]=e[i+5],n[6]=e[i+6],n[7]=e[i+7],t[0]}function a(e,i){return n[7]=e[i],n[6]=e[i+1],n[5]=e[i+2],n[4]=e[i+3],n[3]=e[i+4],n[2]=e[i+5],n[1]=e[i+6],n[0]=e[i+7],t[0]}e.writeDoubleLE=i?r:o,e.writeDoubleBE=i?o:r,e.readDoubleLE=i?s:a,e.readDoubleBE=i?a:s}():function(){function t(e,t,n,i,r,o){var s=i<0?1:0;if(s&&(i=-i),0===i)e(0,r,o+t),e(1/i>0?0:2147483648,r,o+n);else if(isNaN(i))e(0,r,o+t),e(2146959360,r,o+n);else if(i>1.7976931348623157e308)e(0,r,o+t),e((s<<31|2146435072)>>>0,r,o+n);else{var a;if(i<2.2250738585072014e-308)e((a=i/5e-324)>>>0,r,o+t),e((s<<31|a/4294967296)>>>0,r,o+n);else{var l=Math.floor(Math.log(i)/Math.LN2);1024===l&&(l=1023),e(4503599627370496*(a=i*Math.pow(2,-l))>>>0,r,o+t),e((s<<31|l+1023<<20|1048576*a&1048575)>>>0,r,o+n)}}}function n(e,t,n,i,r){var o=e(i,r+t),s=e(i,r+n),a=2*(s>>31)+1,l=s>>>20&2047,u=4294967296*(1048575&s)+o;return 2047===l?u?NaN:a*(1/0):0===l?5e-324*a*u:a*Math.pow(2,l-1075)*(u+4503599627370496)}e.writeDoubleLE=t.bind(null,r,0,4),e.writeDoubleBE=t.bind(null,o,4,0),e.readDoubleLE=n.bind(null,s,0,4),e.readDoubleBE=n.bind(null,a,4,0)}(),e}function r(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}function o(e,t,n){t[n]=e>>>24,t[n+1]=e>>>16&255,t[n+2]=e>>>8&255,t[n+3]=255&e}function s(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function a(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}e.exports=i(i)},function(e,t,n){"use strict";e.exports=function(e,t,n){var i=n||8192,r=i>>>1,o=null,s=i;return function(n){if(n<1||n>r)return e(n);s+n>i&&(o=e(i),s=0);var a=t.call(o,s,s+=n);return 7&s&&(s=1+(7|s)),a}}},function(e,t,n){"use strict";e.exports=r;var i=n(7);function r(e,t){this.lo=e>>>0,this.hi=t>>>0}var o=r.zero=new r(0,0);o.toNumber=function(){return 0},o.zzEncode=o.zzDecode=function(){return this},o.length=function(){return 1};var s=r.zeroHash="\0\0\0\0\0\0\0\0";r.fromNumber=function(e){if(0===e)return o;var t=e<0;t&&(e=-e);var n=e>>>0,i=(e-n)/4294967296>>>0;return t&&(i=~i>>>0,n=~n>>>0,++n>4294967295&&(n=0,++i>4294967295&&(i=0))),new r(n,i)},r.from=function(e){if("number"==typeof e)return r.fromNumber(e);if(i.isString(e)){if(!i.Long)return r.fromNumber(parseInt(e,10));e=i.Long.fromString(e)}return e.low||e.high?new r(e.low>>>0,e.high>>>0):o},r.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,n=~this.hi>>>0;return t||(n=n+1>>>0),-(t+4294967296*n)}return this.lo+4294967296*this.hi},r.prototype.toLong=function(e){return i.Long?new i.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var a=String.prototype.charCodeAt;r.fromHash=function(e){return e===s?o:new r((a.call(e,0)|a.call(e,1)<<8|a.call(e,2)<<16|a.call(e,3)<<24)>>>0,(a.call(e,4)|a.call(e,5)<<8|a.call(e,6)<<16|a.call(e,7)<<24)>>>0)},r.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},r.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},r.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},r.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return 0===n?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:n<128?9:10}},function(e,t,n){"use strict";e.exports=s;var i=n(18);(s.prototype=Object.create(i.prototype)).constructor=s;var r=n(7),o=r.Buffer;function s(){i.call(this)}s.alloc=function(e){return(s.alloc=r._Buffer_allocUnsafe)(e)};var a=o&&o.prototype instanceof Uint8Array&&"set"===o.prototype.set.name?function(e,t,n){t.set(e,n)}:function(e,t,n){if(e.copy)e.copy(t,n,0,e.length);else for(var i=0;i<e.length;)t[n++]=e[i++]};function l(e,t,n){e.length<40?r.utf8.write(e,t,n):t.utf8Write(e,n)}s.prototype.bytes=function(e){r.isString(e)&&(e=r._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(a,t,e),this},s.prototype.string=function(e){var t=o.byteLength(e);return this.uint32(t),t&&this._push(l,t,e),this}},function(e,t,n){"use strict";e.exports=o;var i=n(19);(o.prototype=Object.create(i.prototype)).constructor=o;var r=n(7);function o(e){i.call(this,e)}r.Buffer&&(o.prototype._slice=r.Buffer.prototype.slice),o.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len))}},function(e,t,n){"use strict";e.exports=r;var i=n(7);function r(e,t,n){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");i.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(n)}(r.prototype=Object.create(i.EventEmitter.prototype)).constructor=r,r.prototype.rpcCall=function e(t,n,r,o,s){if(!o)throw TypeError("request must be specified");var a=this;if(!s)return i.asPromise(e,a,t,n,r,o);if(a.rpcImpl)try{return a.rpcImpl(t,n[a.requestDelimited?"encodeDelimited":"encode"](o).finish(),function(e,n){if(e)return a.emit("error",e,t),s(e);if(null!==n){if(!(n instanceof r))try{n=r[a.responseDelimited?"decodeDelimited":"decode"](n)}catch(e){return a.emit("error",e,t),s(e)}return a.emit("data",n,t),s(null,n)}a.end(!0)})}catch(e){return a.emit("error",e,t),void setTimeout(function(){s(e)},0)}else setTimeout(function(){s(Error("already ended"))},0)},r.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(85),r=n(8),o=n(0),s=n(93),a=n(94),l=n(95),u=n(96),c=n(97),h=n(98),p=n(99),d=n(100),f=n(101),g=n(102),y=n(103),m=n(104),v=n(37);i.util.Long=o,i.configure();t.default=class{static decodeRouteRes(e){console.info("decodeRouteRes:",e);try{if("cim.proto.ProxyService.GetMaxSeqId"==e.fnName)return v.proto.GetMaxSeqIdResponse.decode(new Uint8Array(e.data));if("cim.proto.ProxyService.PullMsg"==e.fnName)return v.proto.PullMsgResponse.decode(new Uint8Array(e.data));if("cim.proto.ProxyService.P2PSignal"==e.fnName)return v.proto.P2PSignalResponse.decode(new Uint8Array(e.data));if("cim.proto.ProxyService.GroupSignal"==e.fnName)return v.proto.GroupSignalResponse.decode(new Uint8Array(e.data));if("cim.proto.ProxyService.CheckUserIsOnline"==e.fnName)return v.proto.CheckUserIsOnlineResponse.decode(new Uint8Array(e.data));if("cim.proto.ProxyService.GetGrpSysMaxSeqId"==e.fnName)return v.proto.GetGrpSysMaxSeqIdResponse.decode(new Uint8Array(e.data));if("cim.proto.ProxyService.PullGroupSysMsg"==e.fnName)return v.proto.PullGroupSysMsgResponse.decode(new Uint8Array(e.data));if("svc_chn_channel_service_auther"==e.svcName&&"JoinChannelService"==e.fnName){let t=new s.default;return t.unmarshall(e.data),t}if("svc_chn_channel_service_auther"==e.svcName&&"LeaveChannelService"==e.fnName){let t=new a.default;return t.unmarshall(e.data),t}if("svc_chn_channel_service_auther"==e.svcName&&"SetUserInfo"==e.fnName){let t=new p.default;return t.unmarshall(e.data),t}if("svc_chn_channel_service_auther"==e.svcName&&"DeleteUserInfo"==e.fnName){let t=new d.default;return t.unmarshall(e.data),t}if("svc_chn_channel_service_query"==e.svcName&&"GetUserList"==e.fnName){let t=new f.default;return t.unmarshall(e.data),t}if("svc_chn_channel_service_query"==e.svcName&&"GetSpecificUserList"==e.fnName){let t=new g.default;return t.unmarshall(e.data),t}if("svc_chn_channel_service_auther"==e.svcName&&"SendBroadcast"==e.fnName){let t=new y.default;return t.unmarshall(e.data),t}if("svc_chn_channel_service_auther"==e.svcName&&"SendUnicast"==e.fnName){let t=new m.default;return t.unmarshall(e.data),t}r.default.info("msProtocol.decodeRouteRes: unexpected msg: "+e)}catch(e){r.default.error("msProtocol.decodeRouteRes: failed to decode msg:"+e)}return null}static decodeUnicastRes(e){console.info("decodeUnicastRes:",e);try{if("cim.proto.PushService.IMPushMsg"==e.fnName)return v.proto.IMPushMsgRequest.decode(new Uint8Array(e.data));if("cim.proto.PushService.UnreliableIMPushMsg"==e.fnName)return v.proto.UnreliableIMPushMsgRequest.decode(new Uint8Array(e.data));if("svc_chn_channel_service_auther"==e.svcName&&"SendUnicastUc"==e.fnName){let t=new u.default;return t.unmarshall(e.data),t}r.default.info("msProtocol.decodeUnicastRes: unexpected msg: "+e)}catch(e){r.default.error("msProtocol.decodeUnicastRes: failed to decode msg:"+e)}return null}static decodeBroadcastRes(e){console.info("decodeBroadcastRes:",e);try{if("cim.proto.PushService.IMPushGroupSysMsg"==e.fnName)return v.proto.IMPushGroupSysMsgRequest.decode(new Uint8Array(e.data));if("cim.proto.PushService.UnreliableIMPushGroupSysMsg"==e.fnName)return v.proto.UnreliableIMPushGroupSysMsgRequest.decode(new Uint8Array(e.data));if("svc_chn_channel_service_auther"==e.svcName&&"SendBroadcastBc"==e.fnName){let t=new l.default;return t.unmarshall(e.data),t}if("svc_chn_channel_service_online"==e.svcName&&"UserStateChangeBc"==e.fnName){let t=new c.default;return t.unmarshall(e.data),t}if("svc_chn_channel_service_user_info"==e.svcName&&"UserInfoChangeBc"==e.fnName){let t=new h.default;return t.unmarshall(e.data),t}r.default.info("msProtocol.decodeBroadcastRes: unexpected msg: "+e)}catch(e){r.default.error("msProtocol.decodeBroadcastRes: failed to decode msg:"+e)}return null}}},function(e,t,n){"use strict";e.exports=n(86)},function(e,t,n){"use strict";var i=e.exports=n(87);i.build="full",i.tokenize=n(48),i.parse=n(91),i.common=n(92),i.Root._configure(i.Type,i.parse,i.common)},function(e,t,n){"use strict";var i=e.exports=n(38);i.build="light",i.load=function(e,t,n){return"function"==typeof t?(n=t,t=new i.Root):t||(t=new i.Root),t.load(e,n)},i.loadSync=function(e,t){return t||(t=new i.Root),t.loadSync(e)},i.encoder=n(43),i.decoder=n(44),i.verifier=n(45),i.converter=n(46),i.ReflectionObject=n(10),i.Namespace=n(13),i.Root=n(25),i.Enum=n(6),i.Type=n(20),i.Field=n(9),i.OneOf=n(16),i.MapField=n(21),i.Service=n(22),i.Method=n(23),i.Message=n(24),i.wrappers=n(47),i.types=n(11),i.util=n(2),i.ReflectionObject._configure(i.Root),i.Namespace._configure(i.Type,i.Service,i.Enum),i.Root._configure(i.Type),i.Field._configure(i.Type)},function(e,t,n){"use strict";function i(e,t){"string"==typeof e&&(t=e,e=void 0);var n=[];function r(e){if("string"!=typeof e){var t=o();if(i.verbose&&console.log("codegen: "+t),t="return "+t,e){for(var s=Object.keys(e),a=new Array(s.length+1),l=new Array(s.length),u=0;u<s.length;)a[u]=s[u],l[u]=e[s[u++]];return a[u]=t,Function.apply(null,a).apply(null,l)}return Function(t)()}for(var c=new Array(arguments.length-1),h=0;h<c.length;)c[h]=arguments[++h];if(h=0,e=e.replace(/%([%dfijs])/g,function(e,t){var n=c[h++];switch(t){case"d":case"f":return String(Number(n));case"i":return String(Math.floor(n));case"j":return JSON.stringify(n);case"s":return String(n)}return"%"}),h!==c.length)throw Error("parameter count mismatch");return n.push(e),r}function o(i){return"function "+(i||t||"")+"("+(e&&e.join(",")||"")+"){\n  "+n.join("\n  ")+"\n}"}return r.toString=o,r}e.exports=i,i.verbose=!1},function(e,t,n){"use strict";e.exports=o;var i=n(39),r=n(40)("fs");function o(e,t,n){return"function"==typeof t?(n=t,t={}):t||(t={}),n?!t.xhr&&r&&r.readFile?r.readFile(e,function(i,r){return i&&"undefined"!=typeof XMLHttpRequest?o.xhr(e,t,n):i?n(i):n(null,t.binary?r:r.toString("utf8"))}):o.xhr(e,t,n):i(o,this,e,t)}o.xhr=function(e,t,n){var i=new XMLHttpRequest;i.onreadystatechange=function(){if(4===i.readyState){if(0!==i.status&&200!==i.status)return n(Error("status "+i.status));if(t.binary){var e=i.response;if(!e){e=[];for(var r=0;r<i.responseText.length;++r)e.push(255&i.responseText.charCodeAt(r))}return n(null,"undefined"!=typeof Uint8Array?new Uint8Array(e):e)}return n(null,i.responseText)}},t.binary&&("overrideMimeType"in i&&i.overrideMimeType("text/plain; charset=x-user-defined"),i.responseType="arraybuffer"),i.open("GET",e),i.send()}},function(e,t,n){"use strict";var i=t,r=i.isAbsolute=function(e){return/^(?:\/|\w+:)/.test(e)},o=i.normalize=function(e){var t=(e=e.replace(/\\/g,"/").replace(/\/{2,}/g,"/")).split("/"),n=r(e),i="";n&&(i=t.shift()+"/");for(var o=0;o<t.length;)".."===t[o]?o>0&&".."!==t[o-1]?t.splice(--o,2):n?t.splice(o,1):++o:"."===t[o]?t.splice(o,1):++o;return i+t.join("/")};i.resolve=function(e,t,n){return n||(t=o(t)),r(t)?t:(n||(e=o(e)),(e=e.replace(/(?:\/|^)[^\/]+$/,"")).length?o(e+"/"+t):t)}},function(e,t,n){"use strict";e.exports=k,k.filename=null,k.defaults={keepCase:!1};var i=n(48),r=n(25),o=n(20),s=n(9),a=n(21),l=n(16),u=n(6),c=n(22),h=n(23),p=n(11),d=n(2),f=/^[1-9][0-9]*$/,g=/^-?[1-9][0-9]*$/,y=/^0[x][0-9a-fA-F]+$/,m=/^-?0[x][0-9a-fA-F]+$/,v=/^0[0-7]+$/,b=/^-?0[0-7]+$/,w=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/,S=/^[a-zA-Z_][a-zA-Z_0-9]*$/,I=/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)(?:\.[a-zA-Z_][a-zA-Z_0-9]*)*$/,_=/^(?:\.[a-zA-Z_][a-zA-Z_0-9]*)+$/;function k(e,t,n){t instanceof r||(n=t,t=new r),n||(n=k.defaults);var O,x,A,U,M,C=i(e,n.alternateCommentMode||!1),P=C.next,L=C.push,R=C.peek,T=C.skip,N=C.cmnt,j=!0,B=!1,q=t,E=n.keepCase?function(e){return e}:d.camelCase;function D(e,t,n){var i=k.filename;return n||(k.filename=null),Error("illegal "+(t||"token")+" '"+e+"' ("+(i?i+", ":"")+"line "+C.line+")")}function H(){var e,t=[];do{if('"'!==(e=P())&&"'"!==e)throw D(e);t.push(P()),T(e),e=R()}while('"'===e||"'"===e);return t.join("")}function G(e){var t=P();switch(t){case"'":case'"':return L(t),H();case"true":case"TRUE":return!0;case"false":case"FALSE":return!1}try{return function(e,t){var n=1;"-"===e.charAt(0)&&(n=-1,e=e.substring(1));switch(e){case"inf":case"INF":case"Inf":return n*(1/0);case"nan":case"NAN":case"Nan":case"NaN":return NaN;case"0":return 0}if(f.test(e))return n*parseInt(e,10);if(y.test(e))return n*parseInt(e,16);if(v.test(e))return n*parseInt(e,8);if(w.test(e))return n*parseFloat(e);throw D(e,"number",t)}(t,!0)}catch(n){if(e&&I.test(t))return t;throw D(t,"value")}}function F(e,t){var n,i;do{!t||'"'!==(n=R())&&"'"!==n?e.push([i=J(P()),T("to",!0)?J(P()):i]):e.push(H())}while(T(",",!0));T(";")}function J(e,t){switch(e){case"max":case"MAX":case"Max":return 536870911;case"0":return 0}if(!t&&"-"===e.charAt(0))throw D(e,"id");if(g.test(e))return parseInt(e,10);if(m.test(e))return parseInt(e,16);if(b.test(e))return parseInt(e,8);throw D(e,"id")}function V(){if(void 0!==O)throw D("package");if(O=P(),!I.test(O))throw D(O,"name");q=q.define(O),T(";")}function z(){var e,t=R();switch(t){case"weak":e=A||(A=[]),P();break;case"public":P();default:e=x||(x=[])}t=H(),T(";"),e.push(t)}function W(){if(T("="),U=H(),!(B="proto3"===U)&&"proto2"!==U)throw D(U,"syntax");T(";")}function $(e,t){switch(t){case"option":return Z(e,t),T(";"),!0;case"message":return function(e,t){if(!S.test(t=P()))throw D(t,"type name");var n=new o(t);X(n,function(e){if(!$(n,e))switch(e){case"map":!function(e){T("<");var t=P();if(void 0===p.mapKey[t])throw D(t,"type");T(",");var n=P();if(!I.test(n))throw D(n,"type");T(">");var i=P();if(!S.test(i))throw D(i,"name");T("=");var r=new a(E(i),J(P()),t,n);X(r,function(e){if("option"!==e)throw D(e);Z(r,e),T(";")},function(){ee(r)}),e.add(r)}(n);break;case"required":case"optional":case"repeated":K(n,e);break;case"oneof":!function(e,t){if(!S.test(t=P()))throw D(t,"name");var n=new l(E(t));X(n,function(e){"option"===e?(Z(n,e),T(";")):(L(e),K(n,"optional"))}),e.add(n)}(n,e);break;case"extensions":F(n.extensions||(n.extensions=[]));break;case"reserved":F(n.reserved||(n.reserved=[]),!0);break;default:if(!B||!I.test(e))throw D(e);L(e),K(n,"optional")}}),e.add(n)}(e,t),!0;case"enum":return function(e,t){if(!S.test(t=P()))throw D(t,"name");var n=new u(t);X(n,function(e){switch(e){case"option":Z(n,e),T(";");break;case"reserved":F(n.reserved||(n.reserved=[]),!0);break;default:!function(e,t){if(!S.test(t))throw D(t,"name");T("=");var n=J(P(),!0),i={};X(i,function(e){if("option"!==e)throw D(e);Z(i,e),T(";")},function(){ee(i)}),e.add(t,n,i.comment)}(n,e)}}),e.add(n)}(e,t),!0;case"service":return function(e,t){if(!S.test(t=P()))throw D(t,"service name");var n=new c(t);X(n,function(e){if(!$(n,e)){if("rpc"!==e)throw D(e);!function(e,t){var n=t;if(!S.test(t=P()))throw D(t,"name");var i,r,o,s,a=t;T("("),T("stream",!0)&&(r=!0);if(!I.test(t=P()))throw D(t);i=t,T(")"),T("returns"),T("("),T("stream",!0)&&(s=!0);if(!I.test(t=P()))throw D(t);o=t,T(")");var l=new h(a,n,i,o,r,s);X(l,function(e){if("option"!==e)throw D(e);Z(l,e),T(";")}),e.add(l)}(n,e)}}),e.add(n)}(e,t),!0;case"extend":return function(e,t){if(!I.test(t=P()))throw D(t,"reference");var n=t;X(null,function(t){switch(t){case"required":case"repeated":case"optional":K(e,t,n);break;default:if(!B||!I.test(t))throw D(t);L(t),K(e,"optional",n)}})}(e,t),!0}return!1}function X(e,t,n){var i=C.line;if(e&&(e.comment=N(),e.filename=k.filename),T("{",!0)){for(var r;"}"!==(r=P());)t(r);T(";",!0)}else n&&n(),T(";"),e&&"string"!=typeof e.comment&&(e.comment=N(i))}function K(e,t,n){var i=P();if("group"!==i){if(!I.test(i))throw D(i,"type");var r=P();if(!S.test(r))throw D(r,"name");r=E(r),T("=");var a=new s(r,J(P()),i,t,n);X(a,function(e){if("option"!==e)throw D(e);Z(a,e),T(";")},function(){ee(a)}),e.add(a),B||!a.repeated||void 0===p.packed[i]&&void 0!==p.basic[i]||a.setOption("packed",!1,!0)}else!function(e,t){var n=P();if(!S.test(n))throw D(n,"name");var i=d.lcFirst(n);n===i&&(n=d.ucFirst(n));T("=");var r=J(P()),a=new o(n);a.group=!0;var l=new s(i,r,n,t);l.filename=k.filename,X(a,function(e){switch(e){case"option":Z(a,e),T(";");break;case"required":case"optional":case"repeated":K(a,e);break;default:throw D(e)}}),e.add(a).add(l)}(e,t)}function Z(e,t){var n=T("(",!0);if(!I.test(t=P()))throw D(t,"name");var i=t;n&&(T(")"),i="("+i+")",t=R(),_.test(t)&&(i+=t,P())),T("="),Y(e,i)}function Y(e,t){if(T("{",!0))do{if(!S.test(M=P()))throw D(M,"name");"{"===R()?Y(e,t+"."+M):(T(":"),"{"===R()?Y(e,t+"."+M):Q(e,t+"."+M,G(!0))),T(",",!0)}while(!T("}",!0));else Q(e,t,G(!0))}function Q(e,t,n){e.setOption&&e.setOption(t,n)}function ee(e){if(T("[",!0)){do{Z(e,"option")}while(T(",",!0));T("]")}return e}for(;null!==(M=P());)switch(M){case"package":if(!j)throw D(M);V();break;case"import":if(!j)throw D(M);z();break;case"syntax":if(!j)throw D(M);W();break;case"option":if(!j)throw D(M);Z(q,M),T(";");break;default:if($(q,M)){j=!1;continue}throw D(M)}return k.filename=null,{package:O,imports:x,weakImports:A,syntax:U,root:t}}},function(e,t,n){"use strict";e.exports=o;var i,r=/\/|\./;function o(e,t){r.test(e)||(e="google/protobuf/"+e+".proto",t={nested:{google:{nested:{protobuf:{nested:t}}}}}),o[e]=t}o("any",{Any:{fields:{type_url:{type:"string",id:1},value:{type:"bytes",id:2}}}}),o("duration",{Duration:i={fields:{seconds:{type:"int64",id:1},nanos:{type:"int32",id:2}}}}),o("timestamp",{Timestamp:i}),o("empty",{Empty:{fields:{}}}),o("struct",{Struct:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Value:{oneofs:{kind:{oneof:["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},fields:{nullValue:{type:"NullValue",id:1},numberValue:{type:"double",id:2},stringValue:{type:"string",id:3},boolValue:{type:"bool",id:4},structValue:{type:"Struct",id:5},listValue:{type:"ListValue",id:6}}},NullValue:{values:{NULL_VALUE:0}},ListValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}}}),o("wrappers",{DoubleValue:{fields:{value:{type:"double",id:1}}},FloatValue:{fields:{value:{type:"float",id:1}}},Int64Value:{fields:{value:{type:"int64",id:1}}},UInt64Value:{fields:{value:{type:"uint64",id:1}}},Int32Value:{fields:{value:{type:"int32",id:1}}},UInt32Value:{fields:{value:{type:"uint32",id:1}}},BoolValue:{fields:{value:{type:"bool",id:1}}},StringValue:{fields:{value:{type:"string",id:1}}},BytesValue:{fields:{value:{type:"bytes",id:1}}}}),o("field_mask",{FieldMask:{fields:{paths:{rule:"repeated",type:"string",id:1}}}}),o.get=function(e){return o[e]||null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(5),r=n(1),o=n(0);t.default=class{constructor(){this.appid=0,this.uid="0",this.channelId="",this.rescode=0,this.msg="",this.props={}}unmarshall(e){let t=r.default.payload2DataView(e);e=null;let n=new i.default(t,!1);this.appid=n.popUInt32();let s=n.popUInt64(),a=new o(s.low,s.high,!0);this.uid=a.toString(),this.channelId=n.popString(),this.rescode=n.popUInt32(),this.msg=n.popString();let l=n.popUInt32();for(let e=0;e<l;e++){let e=n.popString(),t=n.popString();this.props[e]=t}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(5),r=n(1),o=n(0);t.default=class{constructor(){this.appid=0,this.uid="0",this.channelId="",this.rescode=0,this.msg=""}unmarshall(e){let t=r.default.payload2DataView(e);e=null;let n=new i.default(t,!1);this.appid=n.popUInt32();let s=n.popUInt64(),a=new o(s.low,s.high,!0);this.uid=a.toString(),this.channelId=n.popString(),this.rescode=n.popUInt32(),this.msg=n.popString()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0);t.default=class{constructor(){this.appid=0,this.uid="0",this.channelId="",this.content="",this.reliable=!0}unmarshall(e){this.appid=e.popUInt32();let t=e.popUInt64(),n=new i(t.low,t.high,!0);this.uid=n.toString(),this.channelId=e.popString(),this.content=e.popUtf8String(),this.reliable=e.popBool()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(5),r=n(1),o=n(0);t.default=class{constructor(){this.appid=0,this.uid="0",this.channelId="",this.content="",this.receiver="",this.reliable=!0}unmarshall(e){let t=r.default.payload2DataView(e);e=null;let n=new i.default(t);this.appid=n.popUInt32();let s=n.popUInt64(),a=new o(s.low,s.high,!0);this.uid=a.toString(),this.channelId=n.popString(),this.content=n.popUtf8String(),this.receiver=n.popString(),this.reliable=n.popBool()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0);t.default=class{constructor(){this.appid=0,this.channelId="",this.joinUsers=new Array,this.leaveUsers=new Array}unmarshall(e){this.appid=e.popUInt32(),this.channelId=e.popUtf8String();let t=e.popUInt32();for(let n=0;n<t;n++){let t=e.popUInt64(),n=new i(t.low,t.high,!0);this.joinUsers.push(n.toString())}t=e.popUInt32();for(let n=0;n<t;n++){let t=e.popUInt64(),n=new i(t.low,t.high,!0);this.leaveUsers.push(n.toString())}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.appid=0,this.channelId="",this.updateInfo=new Map,this.deleteInfo=new Map}unmarshall(e){this.appid=e.popUInt32(),this.channelId=e.popUtf8String();let t=e.popUInt32();for(let n=0;n<t;n++){let t=e.popString(),n=new Map,i=e.popUInt32();for(let t=0;t<i;t++){let t=e.popString(),i=e.popUtf8String();n.set(t,i)}this.updateInfo.set(t,n)}t=e.popUInt32();for(let n=0;n<t;n++){let t=e.popString(),n=e.popUInt32(),i=[];for(let t=0;t<n;t++){let t=e.popString();i.push(t)}this.deleteInfo.set(t,i)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(5),r=n(1),o=n(0);t.default=class{constructor(){this.appid=0,this.uid="0",this.channelId="",this.rescode=0,this.msg=""}unmarshall(e){let t=r.default.payload2DataView(e);e=null;let n=new i.default(t,!1);this.appid=n.popUInt32();let s=n.popUInt64(),a=new o(s.low,s.high,!0);this.uid=a.toString(),this.channelId=n.popUtf8String(),this.rescode=n.popUInt32(),this.msg=n.popString()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(5),r=n(1),o=n(0);t.default=class{constructor(){this.appid=0,this.uid="",this.channelId="",this.rescode=0,this.msg=""}unmarshall(e){let t=r.default.payload2DataView(e);e=null;let n=new i.default(t,!1);this.appid=n.popUInt32();let s=n.popUInt64(),a=new o(s.low,s.high,!0);this.uid=a.toString(),this.channelId=n.popString(),this.rescode=n.popUInt32(),this.msg=n.popString()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(5),r=n(1),o=n(0);t.default=class{constructor(){this.appid=0,this.channelId="",this.users=new Array,this.rescode=0,this.msg=""}unmarshall(e){let t=r.default.payload2DataView(e);e=null;let n=new i.default(t,!1);this.appid=n.popUInt32(),this.channelId=n.popUtf8String();let s=n.popUInt32();for(let e=0;e<s;e++){let e=n.popUInt64(),t=new o(e.low,e.high,!0);this.users.push(t.toString())}this.rescode=n.popUInt32(),this.msg=n.popString()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(5),r=n(1),o=n(0);t.default=class{constructor(){this.appid=0,this.channelId="",this.users=new Array,this.rescode=0,this.msg=""}unmarshall(e){let t=r.default.payload2DataView(e);e=null;let n=new i.default(t,!1);this.appid=n.popUInt32(),this.channelId=n.popString();let s=n.popUInt32();for(let e=0;e<s;e++){let e=n.popUInt64(),t=new o(e.low,e.high,!0);this.users.push(t.toString())}this.rescode=n.popUInt32(),this.msg=n.popString()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(5),r=n(1),o=n(0);t.default=class{constructor(){this.appid=0,this.uid="",this.channelId="",this.rescode=0,this.msg=""}unmarshall(e){let t=r.default.payload2DataView(e);e=null;let n=new i.default(t,!1);this.appid=n.popUInt32();let s=n.popUInt64(),a=new o(s.low,s.high,!0);this.uid=a.toString(),this.channelId=n.popString(),this.rescode=n.popUInt32(),this.msg=n.popString()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(5),r=n(1),o=n(0);t.default=class{constructor(){this.appid=0,this.uid="0",this.channelId="",this.rescode=0,this.msg=""}unmarshall(e){let t=r.default.payload2DataView(e);e=null;let n=new i.default(t,!1);this.appid=n.popUInt32();let s=n.popUInt64(),a=new o(s.low,s.high,!0);this.uid=a.toString(),this.channelId=n.popString(),this.rescode=n.popUInt32(),this.msg=n.popString()}}},function(module,exports,__webpack_require__){(function(global){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;!function(e,t){module.exports=t(e)}("undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==global?global:this,function(global){"use strict";global=global||{};var _Base64=global.Base64,version="2.5.1",buffer;if(module.exports)try{buffer=eval("require('buffer').Buffer")}catch(e){buffer=void 0}var b64chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b64tab=function(e){for(var t={},n=0,i=e.length;n<i;n++)t[e.charAt(n)]=n;return t}(b64chars),fromCharCode=String.fromCharCode,cb_utob=function(e){if(e.length<2)return(t=e.charCodeAt(0))<128?e:t<2048?fromCharCode(192|t>>>6)+fromCharCode(128|63&t):fromCharCode(224|t>>>12&15)+fromCharCode(128|t>>>6&63)+fromCharCode(128|63&t);var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return fromCharCode(240|t>>>18&7)+fromCharCode(128|t>>>12&63)+fromCharCode(128|t>>>6&63)+fromCharCode(128|63&t)},re_utob=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,utob=function(e){return e.replace(re_utob,cb_utob)},cb_encode=function(e){var t=[0,2,1][e.length%3],n=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0);return[b64chars.charAt(n>>>18),b64chars.charAt(n>>>12&63),t>=2?"=":b64chars.charAt(n>>>6&63),t>=1?"=":b64chars.charAt(63&n)].join("")},btoa=global.btoa?function(e){return global.btoa(e)}:function(e){return e.replace(/[\s\S]{1,3}/g,cb_encode)},_encode=buffer?buffer.from&&Uint8Array&&buffer.from!==Uint8Array.from?function(e){return(e.constructor===buffer.constructor?e:buffer.from(e)).toString("base64")}:function(e){return(e.constructor===buffer.constructor?e:new buffer(e)).toString("base64")}:function(e){return btoa(utob(e))},encode=function(e,t){return t?_encode(String(e)).replace(/[+\/]/g,function(e){return"+"==e?"-":"_"}).replace(/=/g,""):_encode(String(e))},encodeURI=function(e){return encode(e,!0)},re_btou=new RegExp(["[-][-]","[-][-]{2}","[-][-]{3}"].join("|"),"g"),cb_btou=function(e){switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return fromCharCode(55296+(t>>>10))+fromCharCode(56320+(1023&t));case 3:return fromCharCode((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return fromCharCode((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},btou=function(e){return e.replace(re_btou,cb_btou)},cb_decode=function(e){var t=e.length,n=t%4,i=(t>0?b64tab[e.charAt(0)]<<18:0)|(t>1?b64tab[e.charAt(1)]<<12:0)|(t>2?b64tab[e.charAt(2)]<<6:0)|(t>3?b64tab[e.charAt(3)]:0),r=[fromCharCode(i>>>16),fromCharCode(i>>>8&255),fromCharCode(255&i)];return r.length-=[0,0,2,1][n],r.join("")},_atob=global.atob?function(e){return global.atob(e)}:function(e){return e.replace(/\S{1,4}/g,cb_decode)},atob=function(e){return _atob(String(e).replace(/[^A-Za-z0-9\+\/]/g,""))},_decode=buffer?buffer.from&&Uint8Array&&buffer.from!==Uint8Array.from?function(e){return(e.constructor===buffer.constructor?e:buffer.from(e,"base64")).toString()}:function(e){return(e.constructor===buffer.constructor?e:new buffer(e,"base64")).toString()}:function(e){return btou(_atob(e))},decode=function(e){return _decode(String(e).replace(/[-_]/g,function(e){return"-"==e?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))},noConflict=function(){var e=global.Base64;return global.Base64=_Base64,e};if(global.Base64={VERSION:version,atob:atob,btoa:btoa,fromBase64:decode,toBase64:encode,utob:utob,encode:encode,encodeURI:encodeURI,btou:btou,decode:decode,noConflict:noConflict,__buffer__:buffer},"function"==typeof Object.defineProperty){var noEnum=function(e){return{value:e,enumerable:!1,writable:!0,configurable:!0}};global.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",noEnum(function(){return decode(this)})),Object.defineProperty(String.prototype,"toBase64",noEnum(function(e){return encode(this,e)})),Object.defineProperty(String.prototype,"toBase64URI",noEnum(function(){return encode(this,!0)}))}}return global.Meteor&&(Base64=global.Base64),module.exports?module.exports.Base64=global.Base64:(__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_RESULT__=function(){return global.Base64}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)),{Base64:global.Base64}})}).call(this,__webpack_require__(15))},function(e,t,n){"use strict";var i,r=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),r=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,r++)i[r]=o[s];return i};Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Trace=0]="Trace",e[e.Debug=1]="Debug",e[e.Info=2]="Info",e[e.Warn=3]="Warn",e[e.Error=4]="Error",e[e.Silent=5]="Silent"}(i=t.LogLevel||(t.LogLevel={}));var o=function(){};function s(e,t,n){var r,o,s,a=(r=e.name,(o=new Date).toLocaleString("en-US",{hour12:!1})+"."+((s=o.getMilliseconds())<10?"00"+s.toString():s<100?"0"+s.toString():s.toString())+(""===r?"":" "+r+":")+" "+i[t]);"string"==typeof n.message?n.message=a+" "+n.message:(null!=n.message&&n.optionalParams.unshift(n.message),n.message=a)}t.Hook_AddNameAndTime=s;var a=function(){function e(e){this.name=e||"",this.logLevel=i.Info,this.hooks=[],this.addDefaultHooks()}return e.prototype.addDefaultHooks=function(){this.addHook(s)},e.prototype.addHook=function(e){this.hooks.push(e)},e.prototype.clearAllHook=function(){this.hooks=[]},e.prototype.setLogLevel=function(e){this.logLevel=e},e.prototype.logTemplate=function(e,t,n){for(var i,s=[],a=3;a<arguments.length;a++)s[a-3]=arguments[a];if(e<this.logLevel)return o;for(var l={message:n,optionalParams:s},u=0,c=this.hooks;u<c.length;u++){n=(0,c[u])(this,e,l)}return(i=t.bind).call.apply(i,r([t,console,l.message],l.optionalParams))},e.prototype.trace=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return this.logTemplate.apply(this,r([i.Trace,console.trace,e],t))},e.prototype.debug=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return this.logTemplate.apply(this,r([i.Debug,console.info,e],t))},e.prototype.info=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return this.logTemplate.apply(this,r([i.Info,console.info,e],t))},e.prototype.warn=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return this.logTemplate.apply(this,r([i.Warn,console.warn,e],t))},e.prototype.error=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return this.logTemplate.apply(this,r([i.Error,console.error,e],t))},e}();function l(e,n){null==n?t.log.setLogLevel(e):h(n).setLogLevel(e)}function u(e){for(var t in c)c[t].setLogLevel(e)}t.LogHook=a,t.setLogLevel=l,t.setLogLevelForAllLoggers=u,t.log=new a;var c={};function h(e){if(""===e)throw new TypeError("You must supply a name when creating a logger.");var t=c[e];return t||(t=c[e]=new a(e)),t}t.getLogger=h;var p={setLogLevel:l,setLogLevelForAllLoggers:u};t.exportControlWithName=function(e){try{window&&(window[e]=p)}catch(e){}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=!1,r=!1,o="com.logHook.__logHook",s=1e3,a=[];function l(e){r=e}function u(e){i=e;var t=document.getElementById(o);e?(r=!0,t||((t=document.createElement("textarea")).id=o,t.style.display="block",t.style.position="absolute",t.style.top="0",t.style.width="500px",t.style.height="300px",document.body.appendChild(t)),a.length>0&&(t.value=a.join("\r\n")+"\r\n"),t.scrollTop=t.scrollHeight):t&&null!=t.parentNode&&t.parentNode.removeChild(t)}t.Hook_LogView=function(e,t,n){!function(e){if(r){a.length===s+100&&a.splice(0,100);var t=e.message.toString()+" "+e.optionalParams.join(" ");if(a.push(t),i){var n=document.getElementById(o);n.value+=t+"\r\n",n.scrollTop=n.scrollHeight}}}(n)},t.setRecordLog=l,t.setLogVisible=u;var c={setLogVisible:u,setRecordLog:l};t.exportViewWithName=function(e){try{window&&(window.LOGVIEW=c)}catch(e){}}},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{l(i.next(e))}catch(e){o(e)}}function a(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(s,a)}l((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const r=n(109),o=n(1),s=n(4),a=n(113),l=n(114),u=n(115),c=n(32),h=n(14),p=n(17),d=n(27),f=n(12),g=n(0),y=n(49),m=n(116),v=y.getLogger("hummer.baseService");t.default=class{constructor(e){this.disconnect=!1,this.currLoopCount=0,this.error={code:0,msg:"ok"},this.hummer=e,this.env=this.hummer.getEnv(),null!=this.env?(this.serviceName=`svc_${this.env.area}_cim_${this.env.type}_${this.env.name}_proxy`,this.h5_g_globals=this.hummer.h5_g_globals,this.ap=this.hummer.ap,this.setApSvcHandle(),this.appid=this.h5_g_globals.appid,this.uid=this.h5_g_globals.uid,this.useLbs=!1,this.h5Cb=null,this.anonymousUserPingAlive=!1,this.checkTimes=0,this.checkTimer=setInterval(this.onCheckTimer.bind(this),1e3),this.addApUriHandle(s.default.PSvcRouteResURI,this.onPSvcRouteRes.bind(this)),this.addApUriHandle(s.default.PSvcLoginResURI,this.onPSvcLoginRes.bind(this)),this.addApUriHandle(s.default.PSvcLogoutResURI,this.onPSvcLogoutRes.bind(this)),this.addApUriHandle(s.default.PCS_ServiceSubcribeUserGroupResV2URI,this.onPSvcSubsGroupResV2.bind(this)),this.setCallback(e=>{switch(e.type){case"on_data":v.info("on_data(unhandled):",e)();break;case"on_unicast":this.onUnicast(e);break;case"on_broadcast":this.onBroadcast(e);break;default:v.info("unhandled event:",e)()}})):this.error={code:-1,msg:"area params error"}}onUnicast(e){this.decodeUnicastRes(e)}onBroadcast(e){this.decodeBroadcastRes(e)}decodeUnicastRes(e){return null}decodeBroadcastRes(e){return null}decodeRouteRes(e){return null}setBaseCallbacks(e){this.baseCallbacks=e}onCheckTimer(){let e=h.default.now();this.checkTimes++,this.checkTimes%10==0&&this.anonymousUserPingAlive&&this.pingAlive(),this.ap&&this.ap.onCheckTimer(e,this.checkTimes)}setApSvcHandle(){this.ap.setSvcHandler(this)}addApUriHandle(e,t){this.ap.handleDic.set(e,t)}onPSvcRouteRes(e){let t=new a.default;t.unmarshall(e);const n=this.h5_g_globals;let i=n.seqContext[t.context];if(i){let r=i.resolve,o=i.reject;delete n.seqContext[t.context],v.info("onPSvcRouteRes:"+t.toString())();let s=h.default.now()-i.routeReqStartTs,a=new Map;return this.fillStatMap(a,e.uri,t),a.set("rtt",s),this.checkAndSendStatMap(a),p.default.report(n.scode,i.svcName,i.fnName,i.protoType,s,t.resCode),void(200==t.resCode?r&&r(t):o&&o({code:t.resCode,errMsg:t.resMsg,appid:i.appid,svcName:i.svcName,fnName:i.fnName,traceId:t.traceId}))}v.warn("onPSvcRouteRes unhandled svcName:"+t.svcName+" fnName:"+t.fnName)()}onPSvcLoginRes(e){let t=new l.default;t.unmarshall(e);let n=h.default.now()-this.h5_g_globals.loginApStartTs,i=new Map;this.fillStatMap(i,e.uri,t),i.set("rtt",n),this.checkAndSendStatMap(i,!0,"ystsvclogin"),p.default.report(this.h5_g_globals.scode,"svc_login","","",n,t.resCode),200==t.resCode?(v.info("onPSvcLoginRes success:")(),this.onLoginAp({code:f.LoginStatus.Logined,msg:"success"})):(v.error("onPSvcLoginRes error:"+JSON.stringify(t))(),this.onLoginAp({code:t.resCode,msg:"login fail"}),this.ap.start())}onPSvcLogoutRes(e){let t=new u.default;t.unmarshall(e);let n=h.default.now()-this.h5_g_globals.logoutApStartTs,i=new Map;this.fillStatMap(i,e.uri,t),i.set("cost",n),this.checkAndSendStatMap(i),p.default.report(this.h5_g_globals.scode,"svc_logout","","",n,t.resCode),v.info("onPSvcLogoutRes success."+JSON.stringify(t))()}onPSvcSubsGroupResV2(e){let t=new m.default;t.unmarshall(e);const n=this.h5_g_globals;let i=n.seqContext[t.context];if(i){let r=i.resolve,o=i.reject;v.info("SignalService.onPSvcSubsGroupResV2:"+JSON.stringify(t))();let s=h.default.now()-i.subReqStartTs,a=new Map;return this.fillStatMap(a,e.uri,t),a.set("rtt",s),a.set("tid",i.traceId),this.checkAndSendStatMap(a),p.default.report(n.scode,"svc_sub","","",s,t.resCode),200==t.resCode?r&&r({context:t.context,resCode:0,traceId:i.traceId}):o&&o({code:t.resCode,msg:"subs bc groups err:",traceId:i.traceId}),void delete n.seqContext[t.context]}v.warn("onPSvcSubsGroupResV2 no context for PCS_ServiceSubcribeUserGroupResV2. maybe timeout. context:"+t.context+" resCode:"+t.resCode)}setCallback(e){this.h5Cb=e}invokeCallback(e){this.h5Cb?this.h5Cb(e):v.error("BaseService.invokeCallback h5Cb should not be null!!!")()}onGetApInfos(e){let t=e[0];t.ip,t.ports[0],this.ap&&this.ap.start()}start(){v.info("start")(),this.useLbs?(this.lbs=new r.default(this.onGetApInfos),this.lbs.getApInfo()):this.ap?this.ap.start():v.error("ap object is null")()}restart(){v.warn("restart")(),this.h5_g_globals.loginedUDB=!1,this.ap&&this.ap.start()}login(){const e=this.h5_g_globals;this.ap.logoutAp(),e.logout();let t=o.default.getCookie("hummer_uid",e.isMiniProgram),n=o.default.getCookie("hummer_token",e.isMiniProgram);t&&n?e.userType=1:(t="0",e.userType=0),e.uid=t,e.token=n,v.info("login uid:"+e.uid+" credit:"+e.token)()}sendAppData(e){return this.ap.sendApRouter(e)}logout(e){const t=this.h5_g_globals;if(v.info("logout uid:"+t.uid+" bGuestLogin="+this.isGuestLogin())(),this.ap.logoutAp(),t.logout(),t.loginedUDB=!0,this.ap.logined=!0,!e&&!t.isMiniProgram){v.warn("logout clear osudb cookie.")();let e=document.cookie.split(";");for(let n=0;n<e.length;n++)/^hummer_/.test(e[n].split("=")[0].replace(/\s/,""))&&(document.cookie=e[n].split("=")[0].replace(/\s/,"")+"="+e[n].split("=")[1]+";expires="+new Date(1)+";domain="+t.domain+";path=/")}}onLoginAp(e){if(this.ap.onLoginAp(e),e.code!=f.LoginStatus.Logined)return;this.ap.flushBuf();const t=this.h5_g_globals;if(t.bRetry){let e=t.userGroups.subs,n=[],i=Object.keys(e);for(let e=0;e<i.length;++e){let t=i[e].split("_");n.push({grpType:t[0],grpId:t[1]})}e=t.userGroups.unsubs;let r=[],o=Object.keys(e);for(let e=0;e<o.length;++e){let t=o[e].split("_");r.push({grpType:t[0],grpId:t[1]})}}t.bRetry||(t.bRetry=!0),this.baseCallbacks&&this.baseCallbacks.onLoginStatus&&this.baseCallbacks.onLoginStatus(f.LoginStatus.Logined),v.info("onLoginAp: login ap success")()}isGuestLogin(){return 0==this.h5_g_globals.userType}pingAlive(){}fillStatMap(e,t,n){const i=this.h5_g_globals;e.set("said",i.appid),e.set("uid",i.uid),e.set("uri",t),e.set("sdkv","web_"+d.version),n.svcName&&e.set("sn",n.svcName),n.fnName&&e.set("fn",n.fnName),n.traceId&&e.set("tid",i.uid+"_"+n.traceId),n.resCode&&e.set("sc",n.resCode),e.set("cc",1)}checkAndSendStatMap(e,t=!0,n="ystrpc"){e.get("rtt")<0&&(e.set("rtt",o.default.getUintMax),v.warn("checkAndSendStatMap invalid cost value, set it to uint.max, map:"+JSON.stringify(e))());let i=c.default.genUrl(e,n,this.h5_g_globals.hiidoHost);c.default.sendUrl(i,this.h5_g_globals.isMiniProgram)}stop(){"0"!=this.h5_g_globals.uid&&this.ap.stop(this.h5_g_globals.uid,"Graceful exit!"),this.checkTimer&&(clearInterval(this.checkTimer),delete this.checkTimer,this.checkTimer=null)}setDefaultHeader(e){if(o.default.isMap(e))for(let[t,n]of e)this.h5_g_globals.defaultHeaderMap.set(t,n);else v.error("setDefaultHeader argument should be a map!!!")()}send(e,t,n){return this.h5_g_globals.bLostConnection?Promise.reject({code:-1,msg:"disconnected"}):new Promise((r,o)=>i(this,void 0,void 0,function*(){const i=Date.now();console.time(`sendData_${i}`);try{v.info("sendAppData cb",e,t)();const s=yield this.sendAppData({appid:this.appid,svcName:e,fnName:t,data:n,routeArgs:new Map,clientHeaders:new Map,protoType:"yyp"});if(console.timeEnd(`sendData_${i}`),!s)return v.error("send error, d:",s)(),void o(s);r(this.decodeRouteRes(s))}catch(e){v.error("send error catch:",e)(),o(e)}}))}generateLogId(){let e=Math.round(Date.now()/1e3);return new g(this.h5_g_globals.seqId,e,!0)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i="ws://web-aplbs.service.yy.com:8880/websocket",r=n(8),o=n(29),s=n(4),a=n(110),l=n(111),u=n(5),c=n(1);t.default=class{constructor(e){this.onGetApInfos=e,this.wsAddr=i,this.link=new o.default(this)}getApInfo(){if(this.link&&this.link.connected){var e=new a.default;this.link.send(e.marshall())}else this.link.connect(this.wsAddr)}onopen(e){r.default.log("Lbs.onopen"),this.getApInfo()}onclose(e){r.default.log("Lbs.onclose evt="+JSON.stringify(e))}onerror(e){r.default.log("Lbs.onerror err="+JSON.stringify(e))}onData(e,t){let n=new u.default(t);if(e==s.default.PGetApInfoResURI){let e=new l.default;if(e.unmarshall(n),0==e.apInfos.length){r.default.warn("Lbs.onData apinfo empty! will retry...");let e=this;return void c.default.DelayPromise(3e3).then(function(){e.getApInfo()})}this.onGetApInfos(e.apInfos)}else r.default.warn("Lbs.onData unknown uri:"+Math.round(e/256)+" | "+e%256)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(3),r=n(4);t.default=class{constructor(){}marshall(){let e=new i.default;return e.setUri(r.default.PGetApInfoReqURI),e.marshall()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(112);t.default=class{constructor(){this.areaId=0,this.ip=0,this.isp=0,this.apInfos=[],this.appid=0,this.resCode=0,this.extension="",this.apLinkMode=0,this.apLoginMode=0,this.context="",this.mode=0,this.udbMode=0}unmarshall(e){this.areaId=e.popUInt32(),this.ip=e.popUInt32(),this.isp=e.popUInt16();let t=e.popUInt32();for(let n=0;n<t;n++){let t=new i.default;t.unmarshall(e),this.apInfos.push(t)}this.appid=e.popUInt32(),this.resCode=e.popUInt32(),this.extension=e.popString(),this.apLinkMode=e.popUInt32(),this.apLoginMode=e.popUInt32(),this.context=e.popString(),this.mode=e.popUInt32(),this.udbMode=e.popUInt32()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.ip="",this.grpId=0,this.ports=[]}unmarshall(e){this.ip=e.popString(),this.grpId=e.popUInt32();let t=e.popUInt32();for(let n=0;n<t;n++)this.ports.push(e.popUInt16())}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1);t.default=class{constructor(){this.context="",this.resCode=0,this.resMsg="",this.svcName="",this.fnName="",this.protoType="",this.data=null,this.dataCRC=0,this.serverHeaders=new Map,this.traceId=""}unmarshall(e){this.context=e.popString(),this.resCode=e.popUInt32(),this.resMsg=e.popString(),this.svcName=e.popString(),this.fnName=e.popString(),this.protoType=e.popString(),this.data=e.popUint8Array32(),this.dataCRC=e.popUInt32();let t=e.popUInt32();for(let n=0;n<t;n++)this.serverHeaders.set(e.popString(),e.popString());this.traceId=e.popString()}toString(){return"context="+this.context+" resCode="+this.resCode+" resMsg="+this.resMsg+" svcName="+this.svcName+" fnName="+this.fnName+" traceId="+this.traceId+" serverHeaders="+i.default.stringfyMap(this.serverHeaders)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.context="",this.resCode=0,this.resMsg="",this.serverHeaders=new Map}unmarshall(e){this.context=e.popString(),this.resCode=e.popUInt32(),this.resMsg=e.popString();let t=e.popUInt32();for(let n=0;n<t;n++){let t=e.popString(),n=e.popString();this.serverHeaders.set(t,n)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.context="",this.resCode=0,this.resMsg=""}unmarshall(e){this.context=e.popString(),this.resCode=e.popUInt32(),this.resMsg=e.popString()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.context="",this.resCode=0}unmarshall(e){this.context=e.popString(),this.resCode=e.popUInt32()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(3),r=n(4);t.default=class{constructor(){this.context="",this.appid=0,this.join=new Array,this.leave=new Array}marshall(){let e=new i.default;e.setUri(r.default.PCS_ServiceSubcribeUserGroupV2URI),e.pushString(this.context),e.pushUInt32(this.appid);let t=this.join.length;if(0==t)e.pushUInt32(0);else{e.pushUInt32(t);for(let n=0;n<t;n++)e.pushUtf8String(this.join[n])}if(0==(t=this.leave.length))e.pushUInt32(0);else{e.pushUInt32(t);for(let n=0;n<t;n++)e.pushUtf8String(this.leave[n])}return e.marshall()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(3);t.default=class{constructor(){this.appid=0,this.channelId=""}marshall(){let e=new i.default(!1);return e.pushUInt32(this.appid),e.pushUtf8String(this.channelId),e.marshall()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(3);t.default=class{constructor(){this.appid=0,this.channelId="",this.key="",this.prop=""}marshall(){let e=new i.default(!1);return e.pushUInt32(this.appid),e.pushUtf8String(this.channelId),e.pushString(this.key),e.pushUtf8String(this.prop),e.marshall()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(3),r=n(0);t.default=class{constructor(){this.appid=0,this.uid="0",this.channelId="",this.type="",this.content=null,this.reliable=!0}marshall(){let e=new i.default(!1);e.pushUInt32(this.appid);let t=r.fromString(this.uid);return e.pushUInt32(t.low),e.pushUInt32(t.high),e.pushString(this.channelId),e.pushString(this.type),"string"==typeof this.content?e.pushString32(this.content):e.pushUint8Array32(this.content),e.pushBool(this.reliable),e.marshall()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(3),r=n(0);t.default=class{constructor(){this.appid=0,this.uid="0",this.channelId="",this.keys=new Array}marshall(){let e=new i.default(!1);e.pushUInt32(this.appid);let t=r.fromString(this.uid);e.pushUInt32(t.low),e.pushUInt32(t.high),e.pushUtf8String(this.channelId);let n=this.keys.length;if(0==n)e.pushUInt32(0);else{e.pushUInt32(n);for(let t=0;t<n;t++)e.pushString(this.keys[t])}return e.marshall()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(3),r=n(0);t.default=class{constructor(){this.appid=0,this.uid="0",this.channelId="",this.infos=new Map}marshall(){let e=new i.default(!1);e.pushUInt32(this.appid);let t=r.fromString(this.uid);if(e.pushUInt32(t.low),e.pushUInt32(t.high),e.pushUtf8String(this.channelId),0==this.infos.size)e.pushUInt32(0);else{e.pushUInt32(this.infos.size);for(let[t,n]of this.infos)e.pushString(t.toString()),e.pushUtf8String(n.toString())}return e.marshall()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(3),r=n(0);t.default=class{constructor(){this.appid=0,this.uid="0",this.channelId="",this.extra=new Map}marshall(){let e=new i.default(!1);e.pushUInt32(this.appid);let t=r.fromString(this.uid);if(e.pushUInt32(t.low),e.pushUInt32(t.high),e.pushUtf8String(this.channelId),0==this.extra.size)e.pushUInt32(0);else{e.pushUInt32(this.extra.size);for(let[t,n]of this.extra)e.pushString(t.toString()),e.pushUtf8String(n.toString())}return e.marshall()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(3),r=n(0);t.default=class{constructor(){this.appid=0,this.uid="0",this.channelId="",this.extra=new Map}marshall(){let e=new i.default(!1);e.pushUInt32(this.appid);let t=r.fromString(this.uid);if(e.pushUInt32(t.low),e.pushUInt32(t.high),e.pushUtf8String(this.channelId),0==this.extra.size)e.pushUInt32(0);else{e.pushUInt32(this.extra.size);for(let[t,n]of this.extra)e.pushString(t.toString()),e.pushUtf8String(n.toString())}return e.marshall()}}}]).default});